import{r as e,f as s,P as o,R as n}from"./vendor-react-CWhE6-Gf.js";import{B as m,s as r,t as i}from"./index-BzUzpWLW.js";import{m as a,X as t,u as l,B as c,a1 as u,aa as d,a4 as b,J as N,b as v,w as x,n as p,ab as g,ac as D,l as j,$ as f,ad as h,q as C,_ as U,ae as E,af as z}from"./vendor-ui-BBpB3Q8s.js";import{C as G}from"./ConfirmationModal-By6tTfcV.js";import"./sentry-CxmcrLP_.js";import"./vendor-supabase-CR9Q8AJ3.js";import"./vendor-charts-BY8kkf7J.js";const V=({member:o,onSubmit:n,onCancel:r})=>{const[i,b]=e.useState({name:"",function:"",email:"",role:"Assistant(e)"});e.useEffect(()=>{o&&b({name:o.name||"",function:o.function||"",email:o.email||"",role:o.role||"Assistant(e)"})},[o]);const N=e=>{const{name:s,value:o}=e.target;b(e=>({...e,[s]:o}))};return s.jsxDEV(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxDEV(a.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-slate-800 border border-slate-700 rounded-xl p-6 w-full max-w-lg",children:[s.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[s.jsxDEV("h2",{className:"text-2xl font-bold text-white",children:o?"Modifier le Collaborateur":"Nouveau Collaborateur"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:52,columnNumber:11},void 0),s.jsxDEV(m,{variant:"ghost",size:"icon",onClick:r,className:"text-slate-400 hover:text-white",children:s.jsxDEV(t,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:61,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:55,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:51,columnNumber:9},void 0),s.jsxDEV("form",{onSubmit:e=>{e.preventDefault(),n(i)},className:"space-y-5",children:[s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(l,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:68,columnNumber:15},void 0),"Nom et PrÃ©noms *"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:67,columnNumber:13},void 0),s.jsxDEV("input",{type:"text",name:"name",value:i.name,onChange:N,required:!0,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Marie Dupont"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:71,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:66,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(c,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:84,columnNumber:15},void 0),"Titre / Fonction"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:83,columnNumber:13},void 0),s.jsxDEV("select",{name:"function",value:i.function,onChange:N,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-green-500 cursor-pointer",children:[s.jsxDEV("option",{value:"",children:"SÃ©lectionner un titre"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:93,columnNumber:15},void 0),s.jsxDEV("option",{value:"AssociÃ© principal",children:"AssociÃ© principal"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:94,columnNumber:15},void 0),s.jsxDEV("option",{value:"AssociÃ©",children:"AssociÃ©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:95,columnNumber:15},void 0),s.jsxDEV("option",{value:"Avocat senior",children:"Avocat senior"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:96,columnNumber:15},void 0),s.jsxDEV("option",{value:"Avocat",children:"Avocat"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:97,columnNumber:15},void 0),s.jsxDEV("option",{value:"Avocat stagiaire",children:"Avocat stagiaire"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:98,columnNumber:15},void 0),s.jsxDEV("option",{value:"Juriste senior",children:"Juriste senior"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:99,columnNumber:15},void 0),s.jsxDEV("option",{value:"Juriste",children:"Juriste"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:100,columnNumber:15},void 0),s.jsxDEV("option",{value:"SecrÃ©taire juridique",children:"SecrÃ©taire juridique"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:101,columnNumber:15},void 0),s.jsxDEV("option",{value:"SecrÃ©taire",children:"SecrÃ©taire"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:102,columnNumber:15},void 0),s.jsxDEV("option",{value:"Assistant(e) juridique",children:"Assistant(e) juridique"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:103,columnNumber:15},void 0),s.jsxDEV("option",{value:"Assistant(e)",children:"Assistant(e)"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:104,columnNumber:15},void 0),s.jsxDEV("option",{value:"Comptable",children:"Comptable"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:105,columnNumber:15},void 0),s.jsxDEV("option",{value:"Responsable administratif",children:"Responsable administratif"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:106,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:87,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-xs text-slate-400 mt-1",children:"Position hiÃ©rarchique et rÃ´le au cabinet"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:108,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:82,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(u,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:113,columnNumber:15},void 0),"Courriel *"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:112,columnNumber:13},void 0),s.jsxDEV("input",{type:"email",name:"email",value:i.email,onChange:N,required:!0,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"marie.dupont@cabinet.com"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:116,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:111,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(d,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:129,columnNumber:15},void 0),"RÃ´le *"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:128,columnNumber:13},void 0),s.jsxDEV("select",{name:"role",value:i.role,onChange:N,required:!0,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-green-500 cursor-pointer",children:[s.jsxDEV("option",{value:"",children:"SÃ©lectionner un rÃ´le"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:139,columnNumber:15},void 0),s.jsxDEV("option",{value:"Administrateur",children:"Administrateur"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:140,columnNumber:15},void 0),s.jsxDEV("option",{value:"GÃ©rant",children:"GÃ©rant"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:141,columnNumber:15},void 0),s.jsxDEV("option",{value:"Collaborateur",children:"Collaborateur"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:142,columnNumber:15},void 0),s.jsxDEV("option",{value:"Assistant(e)",children:"Assistant(e)"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:143,columnNumber:15},void 0),s.jsxDEV("option",{value:"Consultant",children:"Consultant"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:144,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:132,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-xs text-slate-400 mt-1",children:"Niveau d'accÃ¨s dans l'application"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:146,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:127,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex gap-4 pt-6",children:[s.jsxDEV(m,{type:"submit",className:"flex-1 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700",children:o?"Mettre Ã  jour":"Ajouter le collaborateur"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:150,columnNumber:13},void 0),s.jsxDEV(m,{type:"button",variant:"outline",onClick:r,className:"flex-1 border-slate-600 text-slate-300 hover:bg-slate-700",children:"Annuler"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:156,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:149,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:65,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:45,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamMemberForm.jsx",lineNumber:39,columnNumber:5},void 0)},M=({member:e,index:o,onEdit:n,onDelete:r,isCurrentUser:i})=>{if(!e)return null;const t=e=>{const s={admin:"bg-red-500/20 text-red-400",manager:"bg-purple-500/20 text-purple-400",lawyer:"bg-blue-500/20 text-blue-400",assistant:"bg-green-500/20 text-green-400",default:"bg-slate-500/20 text-slate-400"};return s[e?.toLowerCase()]||s.default};return s.jsxDEV(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*o},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-lg p-4 hover:border-slate-600/50 transition-all duration-200",children:[s.jsxDEV("div",{className:"lg:hidden space-y-3",children:[s.jsxDEV("div",{className:"flex items-start justify-between",children:[s.jsxDEV("div",{className:"flex items-start gap-3 flex-1",children:[s.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center flex-shrink-0",children:s.jsxDEV(l,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:44,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:43,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex-1",children:[s.jsxDEV("h3",{className:"text-white font-medium",children:e.name||"N/A"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:47,columnNumber:15},void 0),s.jsxDEV("div",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium mt-1 ${t(e.role)}`,children:[s.jsxDEV(d,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:49,columnNumber:17},void 0),s.jsxDEV("span",{children:e.role||"Non spÃ©cifiÃ©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:50,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:48,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:46,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:42,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex gap-1",children:[s.jsxDEV(m,{variant:"ghost",size:"icon",onClick:()=>n(e),className:"w-8 h-8 text-slate-400 hover:text-white",children:s.jsxDEV(b,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:61,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:55,columnNumber:13},void 0),!i&&s.jsxDEV(m,{variant:"ghost",size:"icon",onClick:()=>r(e.id),className:"w-8 h-8 text-slate-400 hover:text-[#6D071A]",children:s.jsxDEV(N,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:70,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:64,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:54,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:41,columnNumber:9},void 0),s.jsxDEV("div",{className:"space-y-2 pl-13",children:[e.function&&s.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxDEV(c,{className:"w-4 h-4 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:79,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-slate-300",children:e.function},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:80,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-xs text-slate-500",children:"(Titre/Fonction)"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:81,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:78,columnNumber:13},void 0),e.email&&s.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxDEV(u,{className:"w-4 h-4 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:86,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-slate-300 truncate",children:e.email},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:87,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:85,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxDEV(v,{className:"w-4 h-4 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:91,columnNumber:13},void 0),s.jsxDEV("span",{className:"text-slate-400",children:(x=e.created_at,x?new Date(x).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A")},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:92,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:90,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:76,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:40,columnNumber:7},void 0),s.jsxDEV("div",{className:"hidden lg:grid lg:grid-cols-4 gap-4 items-center",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center flex-shrink-0",children:s.jsxDEV(l,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:102,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:101,columnNumber:11},void 0),s.jsxDEV("div",{children:s.jsxDEV("div",{className:"text-white font-medium",children:e.name||"N/A"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:105,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:104,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:100,columnNumber:9},void 0),s.jsxDEV("div",{children:s.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxDEV(c,{className:"w-4 h-4 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:112,columnNumber:13},void 0),s.jsxDEV("span",{className:"text-slate-300",children:e.function||"Non spÃ©cifiÃ©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:113,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:111,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:110,columnNumber:9},void 0),s.jsxDEV("div",{children:s.jsxDEV("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxDEV(u,{className:"w-4 h-4 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:120,columnNumber:13},void 0),s.jsxDEV("span",{className:"text-slate-300 truncate",children:e.email||"N/A"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:121,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:119,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:118,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium ${t(e.role)}`,children:[s.jsxDEV(d,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:128,columnNumber:13},void 0),s.jsxDEV("span",{children:e.role||"Non spÃ©cifiÃ©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:129,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:127,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex gap-1",children:[s.jsxDEV(m,{variant:"ghost",size:"icon",onClick:()=>n(e),className:"w-8 h-8 text-slate-400 hover:text-white",children:s.jsxDEV(b,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:138,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:132,columnNumber:13},void 0),!i&&s.jsxDEV(m,{variant:"ghost",size:"icon",onClick:()=>r(e.id),className:"w-8 h-8 text-slate-400 hover:text-[#6D071A]",children:s.jsxDEV(N,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:147,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:141,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:131,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:126,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:98,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CollaboratorListItem.jsx",lineNumber:33,columnNumber:5},void 0);var x},w=({isOpen:o,onClose:n,user:i,onConfirmDelete:l})=>{const[c,u]=e.useState([]),[d,b]=e.useState([]),[N,v]=e.useState(""),[j,f]=e.useState(!0),[h,C]=e.useState(!1);e.useEffect(()=>{o&&i&&(U(),E())},[o,i]);const U=async()=>{try{const{data:e,error:s}=await r.from("tasks").select("id, title, status").eq("assigned_to_id",i.id);if(s)throw s;u(e||[])}catch(e){}finally{f(!1)}},E=async()=>{try{const{data:e,error:s}=await r.from("profiles").select("id, name, email").neq("id",i.id).eq("admin_approved",!0);if(s)throw s;b(e||[])}catch(e){}};return o?s.jsxDEV(x,{children:s.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:s.jsxDEV(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-slate-800 border border-slate-700 rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[s.jsxDEV("div",{className:"bg-gradient-to-r from-red-500/20 to-rose-600/20 border-b border-red-500/30 px-6 py-4",children:s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV("div",{className:"bg-red-500/20 p-2 rounded-lg",children:s.jsxDEV(p,{className:"w-5 h-5 text-red-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:102,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:101,columnNumber:17},void 0),s.jsxDEV("div",{children:[s.jsxDEV("h3",{className:"text-lg font-semibold text-white",children:["Supprimer ",i?.name]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:105,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-sm text-slate-400",children:i?.email},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:108,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:104,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:100,columnNumber:15},void 0),s.jsxDEV("button",{onClick:n,className:"text-slate-400 hover:text-white transition-colors",children:s.jsxDEV(t,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:115,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:111,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:99,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:98,columnNumber:11},void 0),s.jsxDEV("div",{className:"p-6 space-y-4 max-h-[calc(90vh-200px)] overflow-y-auto",children:j?s.jsxDEV("div",{className:"flex items-center justify-center py-8",children:s.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:124,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:123,columnNumber:15},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:s.jsxDEV("div",{className:"flex gap-3",children:[s.jsxDEV(g,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:131,columnNumber:21},void 0),s.jsxDEV("div",{className:"flex-1",children:s.jsxDEV("p",{className:"text-sm text-slate-200",children:["Cette action est ",s.jsxDEV("span",{className:"font-semibold text-red-400",children:"irrÃ©versible"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:134,columnNumber:42},void 0),". Le compte utilisateur sera supprimÃ© dÃ©finitivement."]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:133,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:132,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:130,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:129,columnNumber:17},void 0),c.length>0&&s.jsxDEV("div",{className:"space-y-3",children:[s.jsxDEV("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-lg p-4",children:[s.jsxDEV("p",{className:"text-sm text-slate-200 mb-3",children:[s.jsxDEV("span",{className:"font-semibold text-orange-400",children:c.length},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:146,columnNumber:25},void 0)," tÃ¢che(s)",c.length>1?" sont assignÃ©es":" est assignÃ©e"," Ã  cet utilisateur :"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:145,columnNumber:23},void 0),s.jsxDEV("ul",{className:"space-y-1.5 text-xs text-slate-400 max-h-32 overflow-y-auto",children:c.map(e=>s.jsxDEV("li",{className:"flex items-center gap-2",children:[s.jsxDEV("span",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:152,columnNumber:29},void 0),s.jsxDEV("span",{className:"truncate",children:e.title},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:153,columnNumber:29},void 0)]},e.id,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:151,columnNumber:27},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:149,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:144,columnNumber:21},void 0),s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[s.jsxDEV(D,{className:"w-4 h-4 text-blue-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:162,columnNumber:25},void 0),"RÃ©attribuer les tÃ¢ches Ã  :"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:161,columnNumber:23},void 0),s.jsxDEV("select",{value:N,onChange:e=>v(e.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsxDEV("option",{value:"",children:"-- SÃ©lectionner un collaborateur --"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:170,columnNumber:25},void 0),d.map(e=>s.jsxDEV("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:172,columnNumber:27},void 0))]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:165,columnNumber:23},void 0),!N&&s.jsxDEV("p",{className:"text-xs text-red-400",children:"âš ï¸ Vous devez sÃ©lectionner un collaborateur pour rÃ©attribuer les tÃ¢ches"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:178,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:160,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:143,columnNumber:19},void 0),0===c.length&&s.jsxDEV("div",{className:"text-center py-4",children:s.jsxDEV("p",{className:"text-sm text-slate-400",children:"Aucune tÃ¢che assignÃ©e Ã  cet utilisateur."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:188,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:187,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:127,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:121,columnNumber:11},void 0),s.jsxDEV("div",{className:"bg-slate-900/50 border-t border-slate-700 px-6 py-4 flex justify-end gap-3",children:[s.jsxDEV(m,{variant:"outline",onClick:n,disabled:h,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Annuler"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:199,columnNumber:13},void 0),s.jsxDEV(m,{onClick:async()=>{if(!(c.length>0)||N){C(!0);try{if(c.length>0&&N){const e=d.find(e=>e.id===N),{error:s}=await r.from("tasks").update({assigned_to_id:N,assigned_to_name:e?.name||""}).eq("assigned_to_id",i.id);if(s)throw s}await l(i.id),n()}catch(e){}finally{C(!1)}}},disabled:h||c.length>0&&!N,className:"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white",children:h?s.jsxDEV(s.Fragment,{children:[s.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:214,columnNumber:19},void 0),"Suppression..."]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:213,columnNumber:17},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV(g,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:219,columnNumber:19},void 0),"Supprimer dÃ©finitivement"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:218,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:207,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:198,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:91,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:90,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/DeleteUserModal.jsx",lineNumber:89,columnNumber:5},void 0):null};w.propTypes={isOpen:o.bool.isRequired,onClose:o.func.isRequired,user:o.shape({id:o.string,name:o.string,email:o.string}),onConfirmDelete:o.func.isRequired};const y=()=>{const[o,n]=e.useState([]),[t,c]=e.useState(!0),[u,d]=e.useState(!1),[b,N]=e.useState(null);e.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:e,error:s}=await r.from("profiles").select("id, name, email, function, role, created_at").eq("admin_approved",!1).neq("role","admin").order("created_at",{ascending:!1});if(s)throw s;n(e||[])}catch(e){i({variant:"destructive",title:"Erreur",description:"Impossible de charger les utilisateurs en attente."})}finally{c(!1)}};return t?s.jsxDEV("div",{className:"flex items-center justify-center p-8",children:s.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:110,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:109,columnNumber:7},void 0):0===o.length?null:s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[s.jsxDEV("div",{className:"bg-gradient-to-r from-orange-500/20 to-amber-500/20 p-3 rounded-lg backdrop-blur-sm",children:s.jsxDEV(j,{className:"w-5 h-5 text-orange-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:123,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:122,columnNumber:9},void 0),s.jsxDEV("div",{children:[s.jsxDEV("h3",{className:"text-lg font-semibold text-white",children:"Validations en attente"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:126,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-sm text-slate-400",children:[o.length," ",o.length>1?"utilisateurs":"utilisateur"," Ã  approuver"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:129,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:125,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:121,columnNumber:7},void 0),s.jsxDEV("div",{className:"space-y-3",children:o.map((e,n)=>s.jsxDEV(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*n},className:"bg-slate-800/50 border border-orange-500/30 rounded-lg p-4 backdrop-blur-sm hover:border-orange-500/50 transition-all",children:s.jsxDEV("div",{className:"flex items-start justify-between gap-4",children:[s.jsxDEV("div",{className:"flex items-start gap-3 flex-1",children:[s.jsxDEV("div",{className:"bg-gradient-to-br from-orange-500 to-amber-600 rounded-full p-2.5 shadow-lg",children:s.jsxDEV(l,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:147,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:146,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex-1 min-w-0",children:[s.jsxDEV("h4",{className:"font-semibold text-white truncate",children:e.name},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:150,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-sm text-slate-300 truncate",children:e.email},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:151,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-sm text-slate-400",children:e.function},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:152,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-xs text-slate-500 mt-1",children:["CrÃ©Ã© le ",new Date(e.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:153,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:149,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:145,columnNumber:15},void 0),s.jsxDEV("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsxDEV(m,{size:"sm",className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white border-0 shadow-lg",onClick:()=>(async(e,s)=>{try{const{error:o}=await r.from("profiles").update({admin_approved:!0}).eq("id",e);if(o)throw o;i({title:"âœ… Utilisateur approuvÃ©",description:`${s} peut maintenant se connecter.`}),v()}catch(o){i({variant:"destructive",title:"Erreur",description:"Impossible d'approuver cet utilisateur."})}})(e.id,e.name),children:[s.jsxDEV(f,{className:"w-4 h-4 mr-1.5"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:169,columnNumber:19},void 0),"Approuver"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:164,columnNumber:17},void 0),s.jsxDEV(m,{size:"sm",className:"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white border-0 shadow-lg",onClick:()=>(e=>{const s=o.find(s=>s.id===e);s&&(N(s),d(!0))})(e.id,e.name),children:[s.jsxDEV(h,{className:"w-4 h-4 mr-1.5"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:177,columnNumber:19},void 0),"Rejeter"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:172,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:163,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:144,columnNumber:13},void 0)},e.id,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:137,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:135,columnNumber:7},void 0),s.jsxDEV(w,{isOpen:u,onClose:()=>{d(!1),N(null)},user:b,onConfirmDelete:async e=>{try{const{data:s,error:o}=await r.rpc("delete_user_account",{user_id:e});if(o)throw o;if(!s?.success)throw new Error(s?.error||"Erreur lors de la suppression");i({title:"âŒ Utilisateur rejetÃ©",description:"L'utilisateur a Ã©tÃ© supprimÃ© complÃ¨tement."}),v()}catch(s){i({variant:"destructive",title:"Erreur",description:"Impossible de rejeter cet utilisateur."})}}},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:186,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PendingApprovals.jsx",lineNumber:120,columnNumber:5},void 0)},T=({currentUser:o})=>{const[t,u]=e.useState([]),[d,b]=e.useState(!1),[N,v]=e.useState(null),[x,p]=e.useState(""),[g,D]=e.useState({open:!1,title:"",message:"",onConfirm:()=>{}}),[j,f]=e.useState(!1),[h,T]=e.useState(null);e.useEffect(()=>{L()},[]);const L=async()=>{const{data:e,error:s}=await r.from("profiles").select("id, name, email, function, role, created_at");if(s)i({variant:"destructive",title:"Erreur",description:"Impossible de charger les collaborateurs."});else{const s=(e||[]).filter(e=>"admin"!==e.role);u(s)}},I=t.filter(e=>{if(!e)return!1;const s=x.toLowerCase();return e?.name?.toLowerCase().includes(s)||e?.email?.toLowerCase().includes(s)||e?.role?.toLowerCase().includes(s)}),A=t.reduce((e,s)=>{if(s?.role){const o=s.role.toLowerCase();e[o]=(e[o]||0)+1}return e},{});return s.jsxDEV("div",{className:"space-y-6",id:"team-manager-section",children:[s.jsxDEV("div",{className:"flex items-center justify-between print:hidden",children:[s.jsxDEV("div",{children:[s.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gestion des Collaborateurs"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:278,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-slate-400",children:"GÃ©rez les membres de votre cabinet et leurs accÃ¨s"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:279,columnNumber:11},void 0),s.jsxDEV("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1.5 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:s.jsxDEV("span",{className:"text-xs text-blue-300",children:["ðŸ’¡ ",s.jsxDEV("strong",{children:"Info :"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:282,columnNumber:18},void 0)," Cette section gÃ¨re le ",s.jsxDEV("strong",{children:"personnel interne"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:282,columnNumber:64},void 0)," du cabinet (avocats, assistants, etc.)"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:281,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:280,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:277,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex gap-2",children:s.jsxDEV(m,{onClick:()=>{v(null),b(!0)},className:"bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700",children:[s.jsxDEV(C,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:294,columnNumber:13},void 0),"Nouveau Collaborateur"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:287,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:286,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:276,columnNumber:7},void 0),s.jsxDEV("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6 print:hidden",children:s.jsxDEV(y,{},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:302,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:301,columnNumber:7},void 0),s.jsxDEV("div",{className:"print:hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxDEV(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-lg p-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("p",{className:"text-slate-400",children:"Total"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:307,columnNumber:62},void 0),s.jsxDEV(c,{className:"w-6 h-6 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:307,columnNumber:101},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:307,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-3xl font-bold text-white",children:t.length},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:308,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:306,columnNumber:9},void 0),Object.entries(A).slice(0,3).map(([e,o],n)=>s.jsxDEV(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*(n+1)},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-lg p-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("p",{className:"text-slate-400 capitalize",children:e},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:312,columnNumber:64},void 0),s.jsxDEV(l,{className:"w-6 h-6 text-green-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:312,columnNumber:115},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:312,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-3xl font-bold text-white",children:o},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:313,columnNumber:13},void 0)]},e,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:311,columnNumber:11},void 0))]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:305,columnNumber:7},void 0),s.jsxDEV("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6 print:hidden",children:s.jsxDEV("div",{className:"relative",children:[s.jsxDEV(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:320,columnNumber:11},void 0),s.jsxDEV("input",{type:"text",placeholder:"Rechercher un collaborateur par nom, email ou rÃ´le...",value:x,onChange:e=>p(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:321,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:319,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:318,columnNumber:7},void 0),s.jsxDEV("div",{className:"hidden lg:grid lg:grid-cols-4 gap-4 px-6 py-3 bg-slate-900/50 backdrop-blur-sm rounded-lg border border-slate-700/50 text-sm text-slate-400 font-medium",children:[s.jsxDEV("div",{children:"Nom et PrÃ©noms"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:333,columnNumber:9},void 0),s.jsxDEV("div",{children:"Titre / Fonction"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:334,columnNumber:9},void 0),s.jsxDEV("div",{children:"Courriel"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:335,columnNumber:9},void 0),s.jsxDEV("div",{children:"RÃ´le & Actions"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:336,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:332,columnNumber:7},void 0),s.jsxDEV("div",{className:"space-y-4",children:I.map((e,n)=>s.jsxDEV(M,{member:e,index:n,onEdit:e=>{v(e),b(!0)},onDelete:e=>{const s=t.find(s=>s.id===e);D({open:!0,title:"Supprimer le collaborateur",message:`Voulez-vous vraiment supprimer le membre "${s?.name}" ?\n\nCette action est irrÃ©versible.`,onConfirm:()=>{(async e=>{const s=t.find(s=>s.id===e);s&&(T(s),f(!0))})(e),D({...g,open:!1})}})},isCurrentUser:e.id===o.id},e.id,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:342,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:340,columnNumber:7},void 0),0===I.length&&s.jsxDEV(a.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 print:hidden",children:[s.jsxDEV(c,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:369,columnNumber:11},void 0),s.jsxDEV("h3",{className:"text-xl font-semibold text-slate-400 mb-2",children:"Aucun collaborateur trouvÃ©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:370,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-slate-500",children:x?"Essayez de modifier votre recherche":"Commencez par ajouter un membre Ã  votre Ã©quipe"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:371,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:368,columnNumber:9},void 0),d&&s.jsxDEV(V,{member:N,onSubmit:N?async e=>{if(!N)return;const{data:s,error:o}=await r.from("profiles").update({name:e.name,function:e.function,role:e.role}).eq("id",N.id).select("id, name, email, function, role, created_at");o?i({variant:"destructive",title:"Erreur",description:`Impossible de modifier le collaborateur: ${o.message||"Erreur inconnue"}`}):(u(t.map(e=>e.id===N.id?s[0]:e)),v(null),b(!1),i({title:"âœ… Collaborateur modifiÃ©",description:"Les informations ont Ã©tÃ© mises Ã  jour."}))}:async e=>{try{const{data:o}=await r.from("profiles").select("email").eq("email",e.email).maybeSingle();if(o)return void i({variant:"destructive",title:"Erreur",description:"Un utilisateur avec cet email existe dÃ©jÃ ."});const{data:m,error:a}=await r.rpc("generate_initial_password");if(a||!m)return void i({variant:"destructive",title:"Erreur",description:"Impossible de gÃ©nÃ©rer le mot de passe initial."});const t=m,{data:l,error:c}=await r.rpc("create_auth_user_with_profile",{user_email:e.email,user_password:t,user_name:e.name,user_role:e.role,user_function:e.function});if(c||!l?.success)return void i({variant:"destructive",title:"Erreur",description:l?.error||"Impossible de crÃ©er le compte utilisateur."});L(),b(!1);const u=()=>{const[e,o]=n.useState(!1);return s.jsxDEV("button",{onClick:async()=>{try{await navigator.clipboard.writeText(t),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),o(!0),setTimeout(()=>o(!1),2e3)}},className:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded bg-slate-600 hover:bg-slate-500 transition-colors",type:"button",children:e?s.jsxDEV(s.Fragment,{children:[s.jsxDEV(E,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:133,columnNumber:17},void 0),s.jsxDEV("span",{children:"CopiÃ© !"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:134,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:132,columnNumber:15},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV(z,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:138,columnNumber:17},void 0),s.jsxDEV("span",{children:"Copier"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:139,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:137,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:126,columnNumber:11},void 0)};i({title:"âœ… Collaborateur crÃ©Ã© avec succÃ¨s",description:s.jsxDEV("div",{className:"space-y-2",children:[s.jsxDEV("p",{children:[s.jsxDEV("strong",{children:"Nom :"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:150,columnNumber:16},void 0)," ",e.name]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:150,columnNumber:13},void 0),s.jsxDEV("p",{children:[s.jsxDEV("strong",{children:"Email :"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:151,columnNumber:16},void 0)," ",e.email]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:151,columnNumber:13},void 0),s.jsxDEV("div",{className:"bg-slate-700 p-2 rounded mt-2",children:[s.jsxDEV("div",{className:"flex items-center justify-between gap-2 mb-1",children:[s.jsxDEV("strong",{children:"Mot de passe initial :"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:154,columnNumber:17},void 0),s.jsxDEV(u,{},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:155,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:153,columnNumber:15},void 0),s.jsxDEV("code",{className:"text-green-400 text-sm block",children:t},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:157,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:152,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-xs text-slate-400 mt-2",children:["âš ï¸ Transmettez ce mot de passe Ã  l'utilisateur.",s.jsxDEV("br",{},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:160,columnNumber:62},void 0),"Il devra le changer lors de sa premiÃ¨re connexion."]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:159,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:149,columnNumber:11},void 0),duration:15e3})}catch(o){i({variant:"destructive",title:"Erreur",description:"Une erreur est survenue lors de la crÃ©ation du collaborateur."})}},onCancel:()=>{b(!1),v(null)}},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:378,columnNumber:9},void 0),s.jsxDEV(G,{open:g.open,onOpenChange:e=>D({...g,open:e}),title:g.title,message:g.message,onConfirm:g.onConfirm},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:388,columnNumber:7},void 0),s.jsxDEV(w,{isOpen:j,onClose:()=>{f(!1),T(null)},user:h,onConfirmDelete:async e=>{try{const{data:s,error:o}=await r.rpc("delete_user_account",{user_id:e});if(o)return void i({variant:"destructive",title:"Erreur",description:"Impossible de supprimer l'utilisateur."});if(!s?.success)return void i({variant:"destructive",title:"Erreur",description:s?.error||"Erreur lors de la suppression."});u(t.filter(s=>s.id!==e)),i({title:"âœ… Utilisateur supprimÃ©",description:"Le compte utilisateur a Ã©tÃ© supprimÃ© complÃ¨tement."})}catch(s){i({variant:"destructive",title:"Erreur",description:"Une erreur est survenue lors de la suppression."})}}},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:396,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/TeamManager.jsx",lineNumber:275,columnNumber:5},void 0)};T.propTypes={currentUser:o.shape({id:o.string,name:o.string,email:o.string,role:o.string,function:o.string})};export{T as default};
