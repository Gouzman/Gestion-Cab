import{r as e,f as s}from"./vendor-react-CWhE6-Gf.js";import{B as n,u as o,s as i,t as m,a as r,e as t,f as a,h as l,i as c,j as u}from"./index-BzUzpWLW.js";import{L as d,C as b}from"./label-fotUBuUV.js";import{u as N,d as g}from"./permissionsUtils-ZkRZ7LKG.js";import{m as x,o as p,ar as v,as as f,q as j,U as D,at as C,M as h,au as U,av as E,K as z,l as G,u as V,a1 as y,aw as S,X as w,ao as A,ax as M,ay as P,az as H,aA as k,J as _,aB as I,aC as q,aD as L,aE as F,aF as $,ae as T,aG as R}from"./vendor-ui-BBpB3Q8s.js";import"./sentry-CxmcrLP_.js";import"./vendor-supabase-CR9Q8AJ3.js";import"./vendor-charts-BY8kkf7J.js";const B=({onClose:o})=>{const{createUser:i}=N(),[m,r]=e.useState({email:"",name:"",role:"user",function:""}),[t,a]=e.useState(!1),l=(e,s)=>{r(n=>({...n,[e]:s}))};return s.jsxDEV(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-slate-700/50 border border-slate-600 rounded-lg p-6 mb-6",children:[s.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[s.jsxDEV(p,{className:"w-6 h-6 text-green-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:56,columnNumber:9},void 0),s.jsxDEV("h3",{className:"text-xl font-semibold text-white",children:"Créer un nouvel utilisateur"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:57,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:55,columnNumber:7},void 0),s.jsxDEV("form",{onSubmit:async e=>{e.preventDefault(),a(!0);(await i(m)).success&&(r({email:"",name:"",role:"user",function:""}),o&&setTimeout(o,1500)),a(!1)},className:"space-y-4",children:[s.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxDEV("div",{children:[s.jsxDEV(d,{htmlFor:"user-email",className:"text-slate-300 mb-2 block",children:"Adresse email *"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:63,columnNumber:13},void 0),s.jsxDEV("input",{id:"user-email",type:"email",required:!0,value:m.email,onChange:e=>l("email",e.target.value),placeholder:"utilisateur@cabinet.com",className:"w-full px-3 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:66,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:62,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV(d,{htmlFor:"user-name",className:"text-slate-300 mb-2 block",children:"Nom complet *"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:78,columnNumber:13},void 0),s.jsxDEV("input",{id:"user-name",type:"text",required:!0,value:m.name,onChange:e=>l("name",e.target.value),placeholder:"Nom Prénom",className:"w-full px-3 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:81,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:77,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:61,columnNumber:9},void 0),s.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxDEV("div",{children:[s.jsxDEV(d,{htmlFor:"user-role-select",className:"text-slate-300 mb-2 block",children:"Rôle *"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:95,columnNumber:13},void 0),s.jsxDEV("select",{id:"user-role-select",value:m.role,onChange:e=>l("role",e.target.value),className:"w-full px-3 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-green-500",children:[s.jsxDEV("option",{value:"user",children:"Utilisateur"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:104,columnNumber:15},void 0),s.jsxDEV("option",{value:"secretaire",children:"Secrétaire"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:105,columnNumber:15},void 0),s.jsxDEV("option",{value:"avocat",children:"Avocat"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:106,columnNumber:15},void 0),s.jsxDEV("option",{value:"gerant",children:"Gérant"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:107,columnNumber:15},void 0),s.jsxDEV("option",{value:"admin",children:"Administrateur"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:108,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:98,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:94,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV(d,{htmlFor:"user-function-input",className:"text-slate-300 mb-2 block",children:"Fonction"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:113,columnNumber:13},void 0),s.jsxDEV("input",{id:"user-function-input",type:"text",value:m.function,onChange:e=>l("function",e.target.value),placeholder:"Ex: Avocat principal, Assistant juridique...",className:"w-full px-3 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:116,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:112,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:93,columnNumber:9},void 0),s.jsxDEV("div",{className:"p-3 bg-slate-600/30 rounded-lg",children:[s.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxDEV(v,{className:"w-4 h-4 text-blue-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:129,columnNumber:13},void 0),s.jsxDEV("span",{className:"text-sm font-medium text-blue-300",children:"Informations importantes"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:130,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:128,columnNumber:11},void 0),s.jsxDEV("ul",{className:"text-sm text-slate-400 space-y-1",children:[s.jsxDEV("li",{children:"• L'utilisateur devra définir son mot de passe lors de sa première connexion"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:133,columnNumber:13},void 0),s.jsxDEV("li",{children:"• Les permissions par défaut seront appliquées selon le rôle choisi"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:134,columnNumber:13},void 0),s.jsxDEV("li",{children:"• Vous pourrez modifier les permissions individuellement après création"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:135,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:132,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:127,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex justify-end gap-3",children:[o&&s.jsxDEV(n,{type:"button",onClick:o,disabled:t,className:"bg-slate-600 hover:bg-slate-700",children:"Annuler"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:141,columnNumber:13},void 0),s.jsxDEV(n,{type:"submit",disabled:t||!m.email||!m.name,className:"bg-green-600 hover:bg-green-700",children:t?s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:157,columnNumber:17},void 0),"Création..."]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:156,columnNumber:15},void 0):s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV(f,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:162,columnNumber:17},void 0),"Créer l'utilisateur"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:161,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:150,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:139,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:60,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/UserCreator.jsx",lineNumber:50,columnNumber:5},void 0)},O=[{id:"dashboard",label:"Tableau de Bord",actions:[]},{id:"tasks",label:"Tâches",actions:["create","edit","delete","reassign"]},{id:"clients",label:"Clients",actions:["create","edit","delete"]},{id:"cases",label:"Dossiers",actions:["create","edit","delete"]},{id:"calendar",label:"Agenda",actions:["create","edit","delete"]},{id:"documents",label:"Documents",actions:["upload","delete"]},{id:"billing",label:"Facturation",actions:["create","edit","delete"]},{id:"team",label:"Collaborateurs",actions:["create","edit","delete"]},{id:"reports",label:"Rapports",actions:[]},{id:"settings",label:"Paramètres",actions:[]}],J={create:"Créer",edit:"Modifier",delete:"Supprimer",reassign:"Réassigner",upload:"Télécharger"},K=()=>{const{users:o,loading:i,fetchUsers:m,getUserPermissions:r,saveUserPermissions:t}=N(),[a,l]=e.useState(null),[c,u]=e.useState(null),[p,E]=e.useState(!1);e.useEffect(()=>{m()},[]),e.useEffect(()=>{(async()=>{if(a){const e=await r(a.id);u(e||g[a.role]||g.user)}else u(null)})()},[a]);const z=(e,s,n=null)=>{u(o=>{const i=structuredClone(o);return i[e]||(i[e]={visible:!1,actions:{}}),"visible"===s?(i[e].visible=!i[e].visible,i[e].visible||Object.keys(i[e].actions||{}).forEach(s=>{i[e].actions[s]=!1})):"action"===s&&n&&(i[e].actions||(i[e].actions={}),i[e].actions[n]=!i[e].actions[n]),i})};return i?s.jsxDEV("div",{className:"flex items-center justify-center py-8",children:[s.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:128,columnNumber:9},void 0),s.jsxDEV("span",{className:"ml-2 text-slate-300",children:"Chargement..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:129,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:127,columnNumber:7},void 0):s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV(v,{className:"w-6 h-6 text-purple-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:139,columnNumber:11},void 0),s.jsxDEV("h2",{className:"text-xl font-semibold text-white",children:"Gestion des Permissions"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:140,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:138,columnNumber:9},void 0),s.jsxDEV(n,{onClick:()=>E(!p),className:"bg-green-600 hover:bg-green-700",children:[s.jsxDEV(j,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:146,columnNumber:11},void 0),"Nouvel utilisateur"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:142,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:137,columnNumber:7},void 0),p&&s.jsxDEV(B,{onClose:()=>{E(!1),m()}},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:153,columnNumber:9},void 0),s.jsxDEV("div",{className:"grid lg:grid-cols-3 gap-6",children:[s.jsxDEV("div",{className:"lg:col-span-1",children:[s.jsxDEV("h3",{className:"text-white font-medium mb-3 flex items-center",children:[s.jsxDEV(D,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:166,columnNumber:13},void 0),"Utilisateurs (",o.length,")"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:165,columnNumber:11},void 0),s.jsxDEV("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.map(e=>{const n=(e=>{const s=g[e.role]||g.user;return{visibleModules:Object.values(s).filter(e=>e.visible).length,totalActions:Object.values(s).reduce((e,s)=>e+Object.values(s.actions||{}).filter(Boolean).length,0)}})(e),i=a?.id===e.id;return s.jsxDEV(x.div,{whileHover:{scale:1.02},className:"p-3 rounded-lg cursor-pointer transition-all "+(i?"bg-purple-600/30 border-purple-500 border":"bg-slate-700/30 hover:bg-slate-700/50"),onClick:()=>(e=>{const s=o.find(s=>s.id===e);l(s||null)})(e.id),children:s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{className:"flex-1 min-w-0",children:[s.jsxDEV("p",{className:"font-medium text-white truncate",children:e.name},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:188,columnNumber:23},void 0),s.jsxDEV("p",{className:"text-sm text-slate-300 truncate",children:e.email},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:189,columnNumber:23},void 0),s.jsxDEV("div",{className:"flex items-center gap-2 mt-1",children:s.jsxDEV("span",{className:"px-2 py-0.5 rounded text-xs font-medium "+("admin"===e.role||"gerant"===e.role?"bg-red-500/20 text-red-300":"avocat"===e.role?"bg-blue-500/20 text-blue-300":"secretaire"===e.role?"bg-green-500/20 text-green-300":"bg-gray-500/20 text-gray-300"),children:e.role},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:191,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:190,columnNumber:23},void 0),s.jsxDEV("p",{className:"text-xs text-slate-400 mt-1",children:[n.visibleModules," modules • ",n.totalActions," actions"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:200,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:187,columnNumber:21},void 0),i&&s.jsxDEV(C,{className:"w-5 h-5 text-purple-400 flex-shrink-0"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:206,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:186,columnNumber:19},void 0)},e.id,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:176,columnNumber:17},void 0)})},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:170,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:164,columnNumber:9},void 0),s.jsxDEV("div",{className:"lg:col-span-2",children:a?s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxDEV("div",{className:"p-4 bg-slate-700/30 rounded-lg border-l-4 border-purple-500",children:[s.jsxDEV("h3",{className:"text-white font-semibold mb-3 flex items-center",children:[s.jsxDEV(C,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:226,columnNumber:19},void 0),"Configuration pour ",a.name]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:225,columnNumber:17},void 0),s.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxDEV("div",{children:[s.jsxDEV(d,{htmlFor:"user-role",className:"text-slate-300 mb-1 block",children:"Rôle"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:232,columnNumber:21},void 0),s.jsxDEV("select",{id:"user-role",value:a.role||"",onChange:e=>(e=>{l(s=>({...s,role:e}));const s=g[e]||g.user;u(s)})(e.target.value),className:"w-full px-3 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[s.jsxDEV("option",{value:"user",children:"Utilisateur"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:241,columnNumber:23},void 0),s.jsxDEV("option",{value:"avocat",children:"Avocat"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:242,columnNumber:23},void 0),s.jsxDEV("option",{value:"secretaire",children:"Secrétaire"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:243,columnNumber:23},void 0),s.jsxDEV("option",{value:"gerant",children:"Gérant"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:244,columnNumber:23},void 0),s.jsxDEV("option",{value:"admin",children:"Administrateur"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:245,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:235,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:231,columnNumber:19},void 0),s.jsxDEV("div",{children:[s.jsxDEV(d,{htmlFor:"user-function",className:"text-slate-300 mb-1 block",children:"Fonction"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:250,columnNumber:21},void 0),s.jsxDEV("input",{id:"user-function",type:"text",value:a.function||"",onChange:e=>l(s=>({...s,function:e.target.value})),placeholder:"Ex: Avocat principal, Assistant...",className:"w-full px-3 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:253,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:249,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:230,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:224,columnNumber:15},void 0),c&&s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV("h3",{className:"text-white font-semibold flex items-center",children:[s.jsxDEV(v,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:269,columnNumber:21},void 0),"Permissions par Module"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:268,columnNumber:19},void 0),O.map(e=>s.jsxDEV("div",{className:"p-4 bg-slate-700/30 rounded-lg",children:[s.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[s.jsxDEV(d,{className:"text-lg font-medium text-white flex items-center",children:[c[e.id]?.visible?s.jsxDEV(h,{className:"w-4 h-4 mr-2 text-green-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:278,columnNumber:29},void 0):s.jsxDEV(U,{className:"w-4 h-4 mr-2 text-red-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:280,columnNumber:29},void 0),e.label]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:276,columnNumber:25},void 0),s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV(d,{htmlFor:`visible-${e.id}`,className:"text-slate-300",children:"Module visible"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:286,columnNumber:27},void 0),s.jsxDEV(b,{id:`visible-${e.id}`,checked:c[e.id]?.visible||!1,onCheckedChange:()=>z(e.id,"visible")},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:289,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:285,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:275,columnNumber:23},void 0),e.actions.length>0&&c[e.id]?.visible&&s.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4 pt-3 border-t border-slate-600/50",children:e.actions.map(n=>s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV(b,{id:`${e.id}-${n}`,checked:c[e.id]?.actions?.[n]||!1,onCheckedChange:()=>z(e.id,"action",n)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:301,columnNumber:31},void 0),s.jsxDEV(d,{htmlFor:`${e.id}-${n}`,className:"text-sm text-slate-300",children:J[n]||n},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:306,columnNumber:31},void 0)]},n,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:300,columnNumber:29},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:298,columnNumber:25},void 0)]},e.id,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:274,columnNumber:21},void 0)),s.jsxDEV("div",{className:"flex justify-end mt-6",children:s.jsxDEV(n,{onClick:async()=>{if(!a||!c)return;if((await t(a.id,c,a.role,a.function)).success){await m();const e=o.find(e=>e.id===a.id);e&&l(e)}},className:"bg-purple-600 hover:bg-purple-700",children:[s.jsxDEV(f,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:321,columnNumber:23},void 0),"Sauvegarder les Permissions"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:320,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:319,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:267,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:218,columnNumber:13},void 0):s.jsxDEV("div",{className:"text-center py-12",children:[s.jsxDEV(D,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:330,columnNumber:15},void 0),s.jsxDEV("h3",{className:"text-xl font-medium text-white mb-2",children:"Aucun utilisateur sélectionné"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:331,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-slate-400",children:"Sélectionnez un utilisateur dans la liste pour configurer ses permissions."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:332,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:329,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:216,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:162,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/PermissionManager.jsx",lineNumber:135,columnNumber:5},void 0)},Q=()=>{const{user:r}=o(),[t,a]=e.useState([]),[l,c]=e.useState(!1),[u,d]=e.useState(!1),b="admin"===r?.role;e.useEffect(()=>{b&&N()},[b]);const N=async()=>{c(!0);try{const{data:e,error:s}=await i.auth.admin.listUsers();if(s)throw new Error(`Erreur Auth: ${s.message}`);const{data:n,error:o}=await i.from("profiles").select("id, email, name, role, function, created_at, updated_at");if(o)throw new Error(`Erreur données: ${o.message}`);const m=n.map(s=>{const n=e.users.find(e=>e.email===s.email);return{id:s.id,email:s.email,name:s.name||"Nom non défini",role:s.role||"user",function:s.function||"Non définie",created_at:s.created_at,updated_at:s.updated_at,isFirstLogin:!1,auth_id:n?.id||null,last_sign_in_at:n?.last_sign_in_at||null,email_confirmed_at:n?.email_confirmed_at||null,password_updated_at:n?.user_metadata?.password_updated_at||null,password_hash:"gerant"===s.role||"Gerant"===s.function?"*** MASQUÉ POUR SÉCURITÉ ***":n?.encrypted_password?"Mot de passe hashé (bcrypt)":"Non défini",is_password_hashed:Boolean(n?.encrypted_password)}});a(m)}catch(e){m({variant:"destructive",title:"Erreur",description:`Impossible de charger l'historique des comptes: ${e.message}`})}finally{c(!1)}},g=e=>e?new Date(e).toLocaleString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Non disponible",p=e=>{switch(e){case"admin":return"bg-red-500/20 text-red-300 border-red-500/30";case"gerant":return"bg-purple-500/20 text-purple-300 border-purple-500/30";case"avocat":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"secretaire":return"bg-green-500/20 text-green-300 border-green-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}};return b?l?s.jsxDEV("div",{className:"flex items-center justify-center py-8",children:[s.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:122,columnNumber:9},void 0),s.jsxDEV("span",{className:"ml-2 text-slate-300",children:"Chargement de l'historique..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:123,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:121,columnNumber:7},void 0):s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV(E,{className:"w-6 h-6 text-purple-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:133,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("h2",{className:"text-xl font-semibold text-white",children:"Historique des Comptes"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:135,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-slate-400 text-sm",children:"Liste complète de tous les utilisateurs et leurs informations de sécurité"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:136,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:134,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:132,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV(n,{onClick:()=>d(!u),variant:"outline",size:"sm",className:"border-slate-600",children:[u?s.jsxDEV(U,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:149,columnNumber:30},void 0):s.jsxDEV(h,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:149,columnNumber:68},void 0),u?"Masquer mots de passe":"Voir mots de passe"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:143,columnNumber:11},void 0),s.jsxDEV(n,{onClick:N,className:"bg-purple-600 hover:bg-purple-700",children:[s.jsxDEV(E,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:157,columnNumber:13},void 0),"Actualiser"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:153,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:142,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:131,columnNumber:7},void 0),s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxDEV("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV(D,{className:"w-8 h-8 text-blue-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:167,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-sm text-slate-400",children:"Total Utilisateurs"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:169,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-2xl font-bold text-white",children:t.length},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:170,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:168,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:166,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:165,columnNumber:9},void 0),s.jsxDEV("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV(v,{className:"w-8 h-8 text-red-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:177,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-sm text-slate-400",children:"Administrateurs"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:179,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-2xl font-bold text-white",children:t.filter(e=>"admin"===e.role).length},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:180,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:178,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:176,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:175,columnNumber:9},void 0),s.jsxDEV("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV(z,{className:"w-8 h-8 text-yellow-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:189,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-sm text-slate-400",children:"Première Connexion"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:191,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-2xl font-bold text-white",children:"0"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:192,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:190,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:188,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:187,columnNumber:9},void 0),s.jsxDEV("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV(G,{className:"w-8 h-8 text-green-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:201,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-sm text-slate-400",children:"Mots de passe hashés"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:203,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-2xl font-bold text-white",children:t.filter(e=>e.is_password_hashed).length},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:204,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:202,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:200,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:199,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:164,columnNumber:7},void 0),s.jsxDEV("div",{className:"space-y-4",children:0===t.length?s.jsxDEV("div",{className:"text-center py-12",children:[s.jsxDEV(D,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:216,columnNumber:13},void 0),s.jsxDEV("h3",{className:"text-xl font-medium text-white mb-2",children:"Aucun utilisateur trouvé"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:217,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-slate-400",children:"L'historique des comptes est vide."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:218,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:215,columnNumber:11},void 0):t.map(e=>s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:[s.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV("div",{className:"flex items-start justify-between",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV(V,{className:"w-8 h-8 text-purple-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:235,columnNumber:23},void 0),s.jsxDEV("div",{children:[s.jsxDEV("h3",{className:"text-lg font-semibold text-white",children:e.name},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:237,columnNumber:25},void 0),s.jsxDEV("p",{className:"text-slate-300 flex items-center gap-1",children:[s.jsxDEV(y,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:239,columnNumber:27},void 0),e.email]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:238,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:236,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:234,columnNumber:21},void 0),s.jsxDEV("div",{className:"flex flex-col gap-2",children:s.jsxDEV("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${p(e.role)}`,children:e.role},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:246,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:245,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:233,columnNumber:19},void 0),s.jsxDEV("div",{className:"space-y-2 text-sm",children:[s.jsxDEV("div",{className:"flex justify-between",children:[s.jsxDEV("span",{className:"text-slate-400",children:"Fonction:"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:254,columnNumber:23},void 0),s.jsxDEV("span",{className:"text-slate-300",children:e.function},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:255,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:253,columnNumber:21},void 0),s.jsxDEV("div",{className:"flex justify-between",children:[s.jsxDEV("span",{className:"text-slate-400",children:"Compte créé:"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:258,columnNumber:23},void 0),s.jsxDEV("span",{className:"text-slate-300",children:g(e.created_at)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:259,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:257,columnNumber:21},void 0),s.jsxDEV("div",{className:"flex justify-between",children:[s.jsxDEV("span",{className:"text-slate-400",children:"Dernière modification:"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:262,columnNumber:23},void 0),s.jsxDEV("span",{className:"text-slate-300",children:g(e.updated_at)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:263,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:261,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:252,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:232,columnNumber:17},void 0),s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxDEV(z,{className:"w-5 h-5 text-amber-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:271,columnNumber:21},void 0),s.jsxDEV("h4",{className:"font-medium text-white",children:"Informations de Sécurité"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:272,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:270,columnNumber:19},void 0),s.jsxDEV("div",{className:"space-y-2 text-sm",children:[s.jsxDEV("div",{className:"flex justify-between",children:[s.jsxDEV("span",{className:"text-slate-400",children:"Dernière connexion:"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:277,columnNumber:23},void 0),s.jsxDEV("span",{className:"text-slate-300",children:g(e.last_sign_in_at)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:278,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:276,columnNumber:21},void 0),s.jsxDEV("div",{className:"flex justify-between",children:[s.jsxDEV("span",{className:"text-slate-400",children:"Email confirmé:"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:281,columnNumber:23},void 0),s.jsxDEV("span",{className:e.email_confirmed_at?"text-green-300":"text-red-300",children:e.email_confirmed_at?g(e.email_confirmed_at):"Non confirmé"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:282,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:280,columnNumber:21},void 0),s.jsxDEV("div",{className:"flex justify-between",children:[s.jsxDEV("span",{className:"text-slate-400",children:"MDP mis à jour:"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:287,columnNumber:23},void 0),s.jsxDEV("span",{className:"text-slate-300",children:g(e.password_updated_at)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:288,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:286,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:275,columnNumber:19},void 0),s.jsxDEV("div",{className:"pt-3 border-t border-slate-600/50",children:[s.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxDEV(v,{className:"w-4 h-4 text-red-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:295,columnNumber:23},void 0),s.jsxDEV("span",{className:"text-slate-400 text-sm",children:"Mot de passe:"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:296,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:294,columnNumber:21},void 0),u?s.jsxDEV("div",{className:"bg-slate-900/50 rounded-lg p-3",children:[s.jsxDEV("p",{className:"text-slate-300 text-sm font-mono break-all",children:e.password_hash},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:301,columnNumber:25},void 0),e.is_password_hashed&&s.jsxDEV("p",{className:"text-amber-400 text-xs mt-1",children:"⚠️ Mot de passe crypté - Ne peut pas être déchiffré"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:305,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:300,columnNumber:23},void 0):s.jsxDEV("div",{className:"bg-slate-900/50 rounded-lg p-3",children:[s.jsxDEV("p",{className:"text-slate-500 text-sm",children:"••••••••••••••••"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:312,columnNumber:25},void 0),s.jsxDEV("p",{className:"text-slate-400 text-xs mt-1",children:'Cliquez sur "Voir mots de passe" pour afficher'},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:315,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:311,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:293,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:269,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:230,columnNumber:15},void 0),("gerant"===e.role||"Gerant"===e.function)&&s.jsxDEV("div",{className:"mt-4 p-3 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV(v,{className:"w-4 h-4 text-purple-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:328,columnNumber:21},void 0),s.jsxDEV("span",{className:"text-purple-300 text-sm font-medium",children:"Sécurité renforcée : Les informations sensibles du gérant sont masquées"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:329,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:327,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:326,columnNumber:17},void 0)]},e.id,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:224,columnNumber:13},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:213,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:129,columnNumber:5},void 0):s.jsxDEV("div",{className:"text-center py-20",children:[s.jsxDEV(v,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:109,columnNumber:9},void 0),s.jsxDEV("h1",{className:"text-2xl font-bold text-white",children:"Accès Restreint"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:110,columnNumber:9},void 0),s.jsxDEV("p",{className:"text-slate-400 mb-2",children:"Seuls les Administrateurs peuvent accéder à l'historique des comptes."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:111,columnNumber:9},void 0),s.jsxDEV("p",{className:"text-slate-500 text-sm",children:["Votre rôle actuel : ",r?.role||"Non défini"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:112,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AdminUserHistory.jsx",lineNumber:108,columnNumber:7},void 0)},W=()=>{const{companyInfo:o,loading:a}=r(),[l,c]=e.useState({name:"",logo_url:"",address:"",phone:"",email:"",slogan:"",description:""}),[u,d]=e.useState(!1),[b,N]=e.useState(!1),[g,p]=e.useState(null),v=e.useRef(null);e.useEffect(()=>{o&&(c(o),p(o.logo_url||null))},[o]);const j=(e,s)=>{c(n=>({...n,[e]:s}))};return a?s.jsxDEV("div",{className:"text-slate-400 text-center py-8",children:"Chargement..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:145,columnNumber:12},void 0):s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[s.jsxDEV(S,{className:"w-6 h-6 text-purple-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:155,columnNumber:9},void 0),s.jsxDEV("h2",{className:"text-xl font-semibold text-white",children:"Informations de l'entreprise"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:156,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:154,columnNumber:7},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Nom de l'entreprise"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:161,columnNumber:9},void 0),s.jsxDEV("input",{type:"text",value:l.name,onChange:e=>j("name",e.target.value),placeholder:"Cabinet d'Avocats...",className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:164,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:160,columnNumber:7},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Logo de l'entreprise"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:175,columnNumber:9},void 0),s.jsxDEV("p",{className:"text-xs text-slate-400 mb-3",children:"Le logo apparaîtra sur l'écran de connexion, dans la barre latérale et sur les documents exportés"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:178,columnNumber:9},void 0),g&&s.jsxDEV("div",{className:"mb-4 relative inline-block",children:[s.jsxDEV("div",{className:"bg-white/10 p-4 rounded-lg border border-slate-600",children:s.jsxDEV("img",{src:g,alt:"Logo de l'entreprise",className:"h-24 max-w-[200px] object-contain",onError:e=>{e.target.src="",e.target.alt="Erreur de chargement"}},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:186,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:185,columnNumber:13},void 0),s.jsxDEV(n,{onClick:()=>{c(e=>({...e,logo_url:""})),p(null),v.current&&(v.current.value="")},variant:"ghost",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-red-500 hover:bg-red-600 text-white",children:s.jsxDEV(w,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:202,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:196,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:184,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex gap-2",children:[s.jsxDEV("input",{ref:v,type:"file",accept:"image/png,image/jpeg,image/jpg,image/svg+xml",onChange:async e=>{const s=e.target.files?.[0];if(!s)return;if(["image/png","image/jpeg","image/jpg","image/svg+xml"].includes(s.type))if(s.size>2097152)m({variant:"destructive",title:"❌ Fichier trop volumineux",description:"La taille maximale est de 2 Mo."});else{N(!0);try{const e=s.name.trim().replace(/[\)\]\}]+\s*$/g,""),n=e.lastIndexOf(".");let o="png";if(n>0){o=e.substring(n+1).replace(/[^a-z0-9]/gi,"").toLowerCase()}const r=`company-logos/${`logo-${Date.now()}.${o}`}`,{data:t,error:a}=await i.storage.from("attachments").upload(r,s,{cacheControl:"3600",upsert:!1});if(a)throw a;const{data:l}=i.storage.from("attachments").getPublicUrl(r),u=l.publicUrl;c(e=>({...e,logo_url:u})),p(u),m({title:"✅ Logo téléchargé",description:"Le logo a été uploadé avec succès. N'oubliez pas de sauvegarder."})}catch(n){m({variant:"destructive",title:"❌ Erreur d'upload",description:"Impossible de télécharger le logo."})}finally{N(!1)}}else m({variant:"destructive",title:"❌ Format invalide",description:"Seuls les formats PNG, JPG, JPEG et SVG sont acceptés."})},className:"hidden"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:209,columnNumber:11},void 0),s.jsxDEV(n,{type:"button",onClick:()=>v.current?.click(),disabled:b,variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[s.jsxDEV(A,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:223,columnNumber:13},void 0),b?"Upload en cours...":"Télécharger un fichier"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:216,columnNumber:11},void 0),s.jsxDEV("span",{className:"flex items-center text-xs text-slate-500",children:[s.jsxDEV(M,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:227,columnNumber:13},void 0),"PNG, JPG, SVG (max 2 Mo)"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:226,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:208,columnNumber:9},void 0),s.jsxDEV("div",{className:"mt-3",children:[s.jsxDEV("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Ou entrez une URL"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:234,columnNumber:11},void 0),s.jsxDEV("input",{type:"text",value:l.logo_url,onChange:e=>{j("logo_url",e.target.value),p(e.target.value||null)},placeholder:"https://exemple.com/logo.png",className:"w-full px-3 py-2 text-sm bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:237,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:233,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:174,columnNumber:7},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Adresse"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:252,columnNumber:9},void 0),s.jsxDEV("textarea",{value:l.address,onChange:e=>j("address",e.target.value),placeholder:"123 Rue de la Justice, 75001 Paris",rows:3,className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:255,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:251,columnNumber:7},void 0),s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Téléphone"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:267,columnNumber:11},void 0),s.jsxDEV("input",{type:"tel",value:l.phone,onChange:e=>j("phone",e.target.value),placeholder:"+33 1 23 45 67 89",className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:270,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:266,columnNumber:9},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:279,columnNumber:11},void 0),s.jsxDEV("input",{type:"email",value:l.email,onChange:e=>j("email",e.target.value),placeholder:"contact@cabinet.fr",className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:282,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:278,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:265,columnNumber:7},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Slogan"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:294,columnNumber:9},void 0),s.jsxDEV("input",{type:"text",value:l.slogan,onChange:e=>j("slogan",e.target.value),placeholder:"Votre partenaire juridique de confiance",className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:297,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:293,columnNumber:7},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:308,columnNumber:9},void 0),s.jsxDEV("textarea",{value:l.description,onChange:e=>j("description",e.target.value),placeholder:"Description détaillée de votre cabinet...",rows:4,className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:311,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:307,columnNumber:7},void 0),s.jsxDEV("div",{className:"flex justify-end pt-4",children:s.jsxDEV(n,{onClick:async()=>{d(!0);(await t(l)).success?m({title:"✅ Informations sauvegardées",description:"Les informations de l'entreprise ont été mises à jour."}):m({variant:"destructive",title:"❌ Erreur",description:"Impossible de sauvegarder les informations."}),d(!1)},disabled:u,size:"lg",className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700",children:[s.jsxDEV(f,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:328,columnNumber:11},void 0),u?"Sauvegarde...":"Sauvegarder"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:322,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:321,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CompanyInfoSettings.jsx",lineNumber:149,columnNumber:5},void 0)},X=()=>{const{menuConfig:o,loading:i}=a(),[r,t]=e.useState([]),[c,u]=e.useState(!1);e.useEffect(()=>{o?.items&&t([...o.items].sort((e,s)=>e.order-s.order))},[o]);const d=(e,s)=>{const n=[...r],o="up"===s?e-1:e+1;o<0||o>=n.length||([n[e],n[o]]=[n[o],n[e]],n.forEach((e,s)=>{e.order=s+1}),t(n))};return i?s.jsxDEV("div",{className:"text-slate-400 text-center py-8",children:"Chargement..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:71,columnNumber:12},void 0):s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[s.jsxDEV(P,{className:"w-6 h-6 text-blue-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:81,columnNumber:9},void 0),s.jsxDEV("h2",{className:"text-xl font-semibold text-white",children:"Configuration du menu"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:82,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:80,columnNumber:7},void 0),s.jsxDEV("div",{className:"bg-slate-700/30 rounded-lg p-4 mb-6",children:s.jsxDEV("p",{className:"text-slate-300 text-sm",children:"✨ Activez/désactivez les sections du menu et réorganisez leur ordre d'affichage."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:86,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:85,columnNumber:7},void 0),s.jsxDEV("div",{className:"space-y-3",children:r.map((e,o)=>s.jsxDEV(x.div,{layout:!0,className:"flex items-center gap-3 p-4 rounded-lg border "+(e.enabled?"bg-slate-700/50 border-slate-600":"bg-slate-800/30 border-slate-700/50 opacity-60"),children:[s.jsxDEV("div",{className:"flex flex-col gap-1",children:[s.jsxDEV("button",{onClick:()=>d(o,"up"),disabled:0===o,className:"text-slate-500 hover:text-slate-300 disabled:opacity-30 disabled:cursor-not-allowed",children:s.jsxDEV("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsxDEV("path",{d:"M10 5l-7 7h14l-7-7z"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:110,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:109,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:104,columnNumber:15},void 0),s.jsxDEV(H,{className:"w-4 h-4 text-slate-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:113,columnNumber:15},void 0),s.jsxDEV("button",{onClick:()=>d(o,"down"),disabled:o===r.length-1,className:"text-slate-500 hover:text-slate-300 disabled:opacity-30 disabled:cursor-not-allowed",children:s.jsxDEV("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsxDEV("path",{d:"M10 15l7-7H3l7 7z"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:120,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:119,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:114,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:103,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-600 text-slate-300 text-sm font-semibold",children:e.order},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:126,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex-grow",children:[s.jsxDEV("span",{className:"font-medium "+(e.enabled?"text-white":"text-slate-500"),children:e.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:132,columnNumber:15},void 0),s.jsxDEV("span",{className:"ml-2 text-xs text-slate-500",children:["(",e.id,")"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:135,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:131,columnNumber:13},void 0),s.jsxDEV(n,{onClick:()=>{return s=e.id,void t(e=>e.map(e=>e.id===s?{...e,enabled:!e.enabled}:e));var s},variant:e.enabled?"outline":"ghost",size:"sm",className:e.enabled?"border-green-500 text-green-400":"text-slate-500",children:e.enabled?s.jsxDEV(s.Fragment,{children:[s.jsxDEV(h,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:147,columnNumber:19},void 0),"Activé"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:146,columnNumber:17},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV(U,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:152,columnNumber:19},void 0),"Désactivé"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:151,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:139,columnNumber:13},void 0)]},e.id,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:93,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:91,columnNumber:7},void 0),s.jsxDEV("div",{className:"bg-slate-700/30 rounded-lg p-4 border border-slate-600",children:s.jsxDEV("div",{className:"flex justify-between text-sm",children:[s.jsxDEV("span",{className:"text-slate-400",children:["Total : ",s.jsxDEV("span",{className:"text-white font-semibold",children:r.length},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:165,columnNumber:21},void 0)," sections"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:164,columnNumber:11},void 0),s.jsxDEV("span",{className:"text-slate-400",children:["Activées : ",s.jsxDEV("span",{className:"text-green-400 font-semibold",children:r.filter(e=>e.enabled).length},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:168,columnNumber:24},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:167,columnNumber:11},void 0),s.jsxDEV("span",{className:"text-slate-400",children:["Désactivées : ",s.jsxDEV("span",{className:"text-red-400 font-semibold",children:r.filter(e=>!e.enabled).length},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:173,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:172,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:163,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:162,columnNumber:7},void 0),s.jsxDEV("div",{className:"flex justify-end pt-4",children:s.jsxDEV(n,{onClick:async()=>{u(!0);(await l({items:r})).success?m({title:"✅ Configuration sauvegardée",description:"La configuration du menu a été mise à jour."}):m({variant:"destructive",title:"❌ Erreur",description:"Impossible de sauvegarder la configuration."}),u(!1)},disabled:c,size:"lg",className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700",children:[s.jsxDEV(f,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:188,columnNumber:11},void 0),c?"Sauvegarde...":"Sauvegarder"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:182,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:181,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuConfigSettings.jsx",lineNumber:75,columnNumber:5},void 0)},Y=()=>{const{categoriesConfig:o,loading:i}=c(),[r,t]=e.useState({task_categories:[],case_types:[],document_types:[],user_roles:[],task_statuses:[],case_statuses:[]}),[a,l]=e.useState("task_categories"),[d,b]=e.useState({value:"",label:"",color:""}),[N,g]=e.useState(!1);e.useEffect(()=>{o&&t(o)},[o]);if(i)return s.jsxDEV("div",{className:"text-slate-400 text-center py-8",children:"Chargement..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:84,columnNumber:12},void 0);const p=[{key:"task_categories",label:"Catégories de tâches",hasColor:!1},{key:"case_types",label:"Types de dossiers",hasColor:!1},{key:"document_types",label:"Types de document",hasColor:!1},{key:"user_roles",label:"Rôles utilisateurs",hasColor:!1},{key:"task_statuses",label:"Statuts de tâches",hasColor:!0},{key:"case_statuses",label:"Statuts de dossiers",hasColor:!0}],v=p.find(e=>e.key===a);return s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[s.jsxDEV(k,{className:"w-6 h-6 text-green-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:105,columnNumber:9},void 0),s.jsxDEV("h2",{className:"text-xl font-semibold text-white",children:"Gestion des catégories"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:106,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:104,columnNumber:7},void 0),s.jsxDEV("div",{className:"flex flex-wrap gap-2",children:p.map(e=>s.jsxDEV("button",{onClick:()=>l(e.key),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(a===e.key?"bg-green-500 text-white":"bg-slate-700/50 text-slate-300 hover:bg-slate-700"),children:e.label},e.key,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:112,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:110,columnNumber:7},void 0),s.jsxDEV("div",{className:"space-y-3",children:[s.jsxDEV("h3",{className:"text-lg font-medium text-white",children:v?.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:128,columnNumber:9},void 0),r[a]?.map(e=>s.jsxDEV("div",{className:"flex items-center justify-between bg-slate-700/50 p-3 rounded-lg border border-slate-600",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[e.color&&s.jsxDEV("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:137,columnNumber:17},void 0),s.jsxDEV("div",{children:[s.jsxDEV("span",{className:"text-white font-medium",children:e.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:143,columnNumber:17},void 0),s.jsxDEV("span",{className:"ml-2 text-xs text-slate-500",children:["(",e.value,")"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:144,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:142,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:135,columnNumber:13},void 0),s.jsxDEV(n,{onClick:()=>{return s=a,n=e.value,void t(e=>({...e,[s]:e[s].filter(e=>e.value!==n)}));var s,n},variant:"ghost",size:"icon",className:"text-red-400 hover:text-red-300",children:s.jsxDEV(_,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:153,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:147,columnNumber:13},void 0)]},e.value,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:131,columnNumber:11},void 0)),0===r[a]?.length&&s.jsxDEV("div",{className:"text-center py-8 text-slate-500",children:"Aucun élément. Ajoutez-en un ci-dessous."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:159,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:127,columnNumber:7},void 0),s.jsxDEV("div",{className:"bg-slate-700/30 rounded-lg p-4 border border-slate-600",children:[s.jsxDEV("h4",{className:"text-sm font-medium text-slate-300 mb-3",children:"Ajouter un nouvel élément"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:167,columnNumber:9},void 0),s.jsxDEV("div",{className:"space-y-3",children:[s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxDEV("input",{type:"text",value:d.label,onChange:e=>b(s=>({...s,label:e.target.value})),placeholder:"Label (ex: Avocat Senior)",className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:172,columnNumber:13},void 0),s.jsxDEV("input",{type:"text",value:d.value,onChange:e=>b(s=>({...s,value:e.target.value})),placeholder:"Valeur (ex: avocat_senior) - optionnel",className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:179,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:171,columnNumber:11},void 0),v?.hasColor&&s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV("label",{className:"text-sm text-slate-400",children:"Couleur :"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:190,columnNumber:15},void 0),s.jsxDEV("input",{type:"color",value:d.color||"#6366f1",onChange:e=>b(s=>({...s,color:e.target.value})),className:"h-10 w-20 rounded border border-slate-600 cursor-pointer"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:191,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-xs text-slate-500",children:d.color||"#6366f1"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:197,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:189,columnNumber:13},void 0),s.jsxDEV(n,{onClick:()=>{if(!d.label.trim())return void m({variant:"destructive",title:"Erreur",description:"Le label est requis."});const e={value:d.value||d.label.toLowerCase().replace(/\s+/g,"_"),label:d.label,...d.color&&{color:d.color}};t(s=>({...s,[a]:[...s[a],e]})),b({value:"",label:"",color:""})},className:"w-full bg-green-500 hover:bg-green-600",children:[s.jsxDEV(j,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:202,columnNumber:13},void 0),"Ajouter"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:201,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:170,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:166,columnNumber:7},void 0),s.jsxDEV("div",{className:"flex justify-end pt-4",children:s.jsxDEV(n,{onClick:async()=>{g(!0);(await u(r)).success?m({title:"✅ Catégories sauvegardées",description:"Les catégories ont été mises à jour."}):m({variant:"destructive",title:"❌ Erreur",description:"Impossible de sauvegarder les catégories."}),g(!1)},disabled:N,size:"lg",className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:[s.jsxDEV(f,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:216,columnNumber:11},void 0),N?"Sauvegarde...":"Sauvegarder toutes les catégories"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:210,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:209,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CategoriesConfigSettings.jsx",lineNumber:99,columnNumber:5},void 0)},Z=[{id:"dashboard",label:"Tableau de Bord"},{id:"tasks",label:"Tâches"},{id:"clients",label:"Clients"},{id:"cases",label:"Dossiers"},{id:"calendar",label:"Agenda"},{id:"documents",label:"Documents"},{id:"billing",label:"Facturation"},{id:"team",label:"Collaborateurs"},{id:"reports",label:"Statistiques"},{id:"settings",label:"Paramètres"}],ee=[{id:"admin",label:"Administrateur",color:"red"},{id:"gerant",label:"Gérant",color:"red"},{id:"avocat",label:"Avocat",color:"blue"},{id:"secretaire",label:"Secrétaire",color:"green"},{id:"user",label:"Utilisateur",color:"gray"}],se=()=>{const{users:o,fetchUsers:i,saveUserPermissions:r}=N(),[t,a]=e.useState("avocat"),[l,c]=e.useState({}),[u,p]=e.useState(!1);e.useEffect(()=>{i()},[]),e.useEffect(()=>{const e=g[t]||{};c(e),p(!1)},[t]);const v=ee.find(e=>e.id===t),j=Object.values(l).filter(e=>e.visible).length;return s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV("div",{className:"p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:s.jsxDEV("div",{className:"flex items-start gap-3",children:[s.jsxDEV(I,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:121,columnNumber:11},void 0),s.jsxDEV("div",{className:"text-sm text-slate-300",children:[s.jsxDEV("p",{className:"font-medium text-white mb-1",children:"Gestion des permissions par rôle"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:123,columnNumber:13},void 0),s.jsxDEV("p",{children:"Configurez les modules du menu visibles pour chaque rôle. Les modifications s'appliquent à tous les utilisateurs du rôle sélectionné."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:124,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:122,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:120,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:119,columnNumber:7},void 0),s.jsxDEV("div",{children:[s.jsxDEV(d,{className:"text-slate-300 mb-3 block",children:"Sélectionner un rôle"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:131,columnNumber:9},void 0),s.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:ee.map(e=>{const n=o.filter(s=>s.role===e.id).length,i=t===e.id;return s.jsxDEV(x.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(e.id),className:"p-4 rounded-lg border-2 transition-all "+(i?`border-${e.color}-500 bg-${e.color}-500/20`:"border-slate-600 bg-slate-700/30 hover:border-slate-500"),children:[s.jsxDEV("p",{className:"font-medium "+(i?"text-white":"text-slate-300"),children:e.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:149,columnNumber:17},void 0),s.jsxDEV("p",{className:"text-xs text-slate-400 mt-1",children:[n," utilisateur",1!==n?"s":""]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:152,columnNumber:17},void 0)]},e.id,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:138,columnNumber:15},void 0)})},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:132,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:130,columnNumber:7},void 0),s.jsxDEV("div",{className:"border-t border-slate-700 pt-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[s.jsxDEV("div",{children:[s.jsxDEV("h3",{className:"text-white font-semibold text-lg",children:['Modules du menu pour "',v?.label,'"']},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:165,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-sm text-slate-400 mt-1",children:[j,"/",Z.length," modules visibles"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:168,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:164,columnNumber:11},void 0),u&&s.jsxDEV(n,{onClick:async()=>{try{const e=o.filter(e=>e.role===t);if(0===e.length)return void m({title:"⚠️ Aucun utilisateur",description:`Aucun utilisateur n'a le rôle "${ee.find(e=>e.id===t)?.label}".`});let s=0;for(const n of e){(await r(n.id,l)).success&&s++}s===e.length?(m({title:"✅ Permissions appliquées",description:`${s} utilisateur(s) mis à jour avec succès.`}),p(!1)):m({variant:"destructive",title:"⚠️ Application partielle",description:`${s}/${e.length} utilisateurs mis à jour.`})}catch(e){m({variant:"destructive",title:"Erreur",description:"Impossible de sauvegarder les permissions."})}},className:"bg-green-600 hover:bg-green-700",children:[s.jsxDEV(f,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:178,columnNumber:15},void 0),"Sauvegarder"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:174,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:163,columnNumber:9},void 0),s.jsxDEV("div",{className:"grid gap-3",children:Z.map(e=>{const n=l[e.id]?.visible||!1;return s.jsxDEV(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-4 rounded-lg border transition-all "+(n?"bg-slate-700/50 border-slate-600":"bg-slate-800/30 border-slate-700/50 opacity-60"),children:s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[n?s.jsxDEV(h,{className:"w-5 h-5 text-green-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:202,columnNumber:23},void 0):s.jsxDEV(U,{className:"w-5 h-5 text-slate-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:204,columnNumber:23},void 0),s.jsxDEV(d,{className:"text-white font-medium cursor-pointer",children:e.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:206,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:200,columnNumber:19},void 0),s.jsxDEV(b,{checked:n,onCheckedChange:()=>{return s=e.id,c(e=>{const n=structuredClone(e);return n[s]||(n[s]={visible:!1,actions:{}}),n[s].visible=!n[s].visible,!n[s].visible&&n[s].actions&&Object.keys(n[s].actions).forEach(e=>{n[s].actions[e]=!1}),n}),void p(!0);var s}},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:211,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:199,columnNumber:17},void 0)},e.id,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:189,columnNumber:15},void 0)})},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:184,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:162,columnNumber:7},void 0),u&&s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV(I,{className:"w-5 h-5 text-yellow-400 flex-shrink-0"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:230,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-sm text-slate-300",children:["Vous avez des modifications non sauvegardées. Cliquez sur ",s.jsxDEV("strong",{children:"Sauvegarder"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:232,columnNumber:73},void 0)," pour les appliquer."]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:231,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:229,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:224,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/MenuPermissionsManager.jsx",lineNumber:117,columnNumber:5},void 0)},ne=()=>{const[o,i]=e.useState("dark"),[r,t]=e.useState("blue"),[a,l]=e.useState(15),[c,u]=e.useState(!1);e.useEffect(()=>{const e=localStorage.getItem("app_theme")||"dark",s=localStorage.getItem("app_accent_color")||"blue",n=localStorage.getItem("app_auto_logout_minutes")||"15";i(e),t(s),l(parseInt(n))},[]);const d=[{value:"light",label:"Clair",icon:L,description:"Fond clair avec texte sombre"},{value:"dark",label:"Sombre",icon:F,description:"Fond sombre avec texte clair"},{value:"auto",label:"Automatique",icon:$,description:"Suit les préférences système"}],b=[{value:"blue",label:"Bleu",color:"#3b82f6",bgClass:"bg-blue-500"},{value:"green",label:"Vert",color:"#10b981",bgClass:"bg-green-500"},{value:"purple",label:"Violet",color:"#8b5cf6",bgClass:"bg-purple-500"},{value:"red",label:"Rouge",color:"#ef4444",bgClass:"bg-red-500"},{value:"yellow",label:"Jaune",color:"#f59e0b",bgClass:"bg-yellow-500"}];return s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[s.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[s.jsxDEV(q,{className:"w-6 h-6 text-purple-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:71,columnNumber:9},void 0),s.jsxDEV("h2",{className:"text-xl font-semibold text-white",children:"Apparence"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:72,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:70,columnNumber:7},void 0),s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV("div",{children:[s.jsxDEV("h3",{className:"text-lg font-medium text-white mb-2",children:"Thème"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:78,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-sm text-slate-400 mb-4",children:"Choisissez le thème d'affichage de l'application"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:79,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:77,columnNumber:9},void 0),s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:d.map(e=>{const n=e.icon,m=o===e.value;return s.jsxDEV(x.button,{onClick:()=>i(e.value),whileHover:{scale:1.02},whileTap:{scale:.98},className:"relative p-4 rounded-xl border-2 transition-all "+(m?"border-purple-500 bg-purple-500/10":"border-slate-700 bg-slate-800/50 hover:border-slate-600"),children:[m&&s.jsxDEV("div",{className:"absolute top-3 right-3",children:s.jsxDEV("div",{className:"w-6 h-6 rounded-full bg-purple-500 flex items-center justify-center",children:s.jsxDEV(T,{className:"w-4 h-4 text-white"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:104,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:103,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:102,columnNumber:19},void 0),s.jsxDEV("div",{className:"flex flex-col items-center text-center space-y-3",children:[s.jsxDEV("div",{className:"p-3 rounded-lg "+(m?"bg-purple-500/20":"bg-slate-700/50"),children:s.jsxDEV(n,{className:"w-8 h-8 "+(m?"text-purple-400":"text-slate-400")},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:113,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:110,columnNumber:19},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"font-medium "+(m?"text-purple-300":"text-white"),children:e.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:118,columnNumber:21},void 0),s.jsxDEV("p",{className:"text-xs text-slate-500 mt-1",children:e.description},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:123,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:117,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:109,columnNumber:17},void 0)]},e.value,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:90,columnNumber:15},void 0)})},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:84,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:76,columnNumber:7},void 0),s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV("div",{children:[s.jsxDEV("h3",{className:"text-lg font-medium text-white mb-2",children:"Couleur d'accentuation"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:137,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-sm text-slate-400 mb-4",children:"Personnalisez la couleur principale de l'interface"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:138,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:136,columnNumber:9},void 0),s.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:b.map(e=>{const n=r===e.value;return s.jsxDEV(x.button,{onClick:()=>t(e.value),whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative p-4 rounded-xl border-2 transition-all "+(n?"border-slate-400 bg-slate-700/50":"border-slate-700 bg-slate-800/50 hover:border-slate-600"),children:[n&&s.jsxDEV("div",{className:"absolute top-2 right-2",children:s.jsxDEV("div",{className:"w-5 h-5 rounded-full bg-white flex items-center justify-center",children:s.jsxDEV(T,{className:"w-3 h-3 text-slate-900"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:162,columnNumber:23},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:161,columnNumber:21},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:160,columnNumber:19},void 0),s.jsxDEV("div",{className:"flex flex-col items-center space-y-3",children:[s.jsxDEV("div",{className:`w-12 h-12 rounded-full ${e.bgClass} shadow-lg`,style:{backgroundColor:e.color}},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:168,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-sm font-medium "+(n?"text-white":"text-slate-300"),children:e.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:172,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:167,columnNumber:17},void 0)]},e.value,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:148,columnNumber:15},void 0)})},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:143,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:135,columnNumber:7},void 0),s.jsxDEV("div",{className:"space-y-4",children:[s.jsxDEV("div",{children:[s.jsxDEV("h3",{className:"text-lg font-medium text-white mb-2",children:"Déconnexion automatique"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:187,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-sm text-slate-400 mb-4",children:"Configurez le délai d'inactivité avant déconnexion automatique pour plus de sécurité"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:188,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:186,columnNumber:9},void 0),s.jsxDEV("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-4",children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:"Délai d'inactivité"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:194,columnNumber:11},void 0),s.jsxDEV("select",{value:a,onChange:e=>l(parseInt(e.target.value)),className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer",children:[s.jsxDEV("option",{value:5,children:"5 minutes"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:202,columnNumber:13},void 0),s.jsxDEV("option",{value:10,children:"10 minutes"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:203,columnNumber:13},void 0),s.jsxDEV("option",{value:15,children:"15 minutes (recommandé)"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:204,columnNumber:13},void 0),s.jsxDEV("option",{value:30,children:"30 minutes"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:205,columnNumber:13},void 0),s.jsxDEV("option",{value:60,children:"60 minutes"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:206,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:197,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-xs text-slate-500 mt-2",children:"⚠️ Un avertissement apparaîtra 1 minute avant la déconnexion"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:193,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:185,columnNumber:7},void 0),s.jsxDEV("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:[s.jsxDEV("h4",{className:"text-sm font-medium text-slate-300 mb-4",children:"Aperçu des préférences"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:216,columnNumber:9},void 0),s.jsxDEV("div",{className:"space-y-3",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV("div",{className:`w-4 h-4 rounded-full ${b.find(e=>e.value===r)?.bgClass}`},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:219,columnNumber:13},void 0),s.jsxDEV("span",{className:"text-sm text-slate-400",children:["Couleur d'accentuation : ",s.jsxDEV("span",{className:"text-white font-medium",children:b.find(e=>e.value===r)?.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:225,columnNumber:40},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:224,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:218,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex items-center gap-3",children:["light"===o&&s.jsxDEV(L,{className:"w-4 h-4 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:231,columnNumber:35},void 0),"dark"===o&&s.jsxDEV(F,{className:"w-4 h-4 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:232,columnNumber:34},void 0),"auto"===o&&s.jsxDEV($,{className:"w-4 h-4 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:233,columnNumber:34},void 0),s.jsxDEV("span",{className:"text-sm text-slate-400",children:["Thème : ",s.jsxDEV("span",{className:"text-white font-medium",children:d.find(e=>e.value===o)?.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:235,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:234,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:230,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV(G,{className:"w-4 h-4 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:241,columnNumber:13},void 0),s.jsxDEV("span",{className:"text-sm text-slate-400",children:["Déconnexion auto : ",s.jsxDEV("span",{className:"text-white font-medium",children:[a," minutes"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:243,columnNumber:34},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:242,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:240,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:217,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:215,columnNumber:7},void 0),s.jsxDEV("div",{className:"flex justify-end pt-4",children:s.jsxDEV(n,{onClick:async()=>{u(!0),localStorage.setItem("app_theme",o),localStorage.setItem("app_accent_color",r),localStorage.setItem("app_auto_logout_minutes",a.toString()),await new Promise(e=>setTimeout(e,500)),m({title:"✅ Apparence sauvegardée",description:"Vos préférences ont été enregistrées. Rechargez la page pour appliquer le délai de déconnexion."}),u(!1)},disabled:c,size:"lg",className:"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700",children:[s.jsxDEV(f,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:259,columnNumber:11},void 0),c?"Sauvegarde...":"Enregistrer les préférences"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:253,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:252,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/AppearanceSettings.jsx",lineNumber:65,columnNumber:5},void 0)},oe=()=>{const{user:r}=o(),[t,a]=e.useState([]),[l,c]=e.useState(""),[u,d]=e.useState("permissions"),b=r&&("Gerant"===r.function||"Associe Emerite"===r.function||"admin"===r.role||"gerant"===r.role),N="admin"===r?.role;e.useEffect(()=>{b&&g()},[b]);const g=async()=>{const{data:e,error:s}=await i.from("app_settings").select("categories_config").single();s||e?.categories_config?.task_categories&&a(e.categories_config.task_categories)};return b?s.jsxDEV("div",{className:"space-y-8",children:[s.jsxDEV("div",{children:[s.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Paramètres"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:110,columnNumber:9},void 0),s.jsxDEV("p",{className:"text-slate-400",children:"Gérez les configurations de l'application."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:111,columnNumber:9},void 0),s.jsxDEV("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1.5 bg-purple-500/10 border border-purple-500/30 rounded-lg",children:s.jsxDEV("span",{className:"text-xs text-purple-300",children:["💡 ",s.jsxDEV("strong",{children:"Info :"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:114,columnNumber:16},void 0)," Cette section gère les ",s.jsxDEV("strong",{children:"paramètres système"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:114,columnNumber:63},void 0)," de l'application (entreprise, apparence, permissions)"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:113,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:112,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:109,columnNumber:7},void 0),s.jsxDEV("div",{className:"border-b border-slate-700",children:s.jsxDEV("nav",{className:"flex flex-wrap space-x-4 md:space-x-8",children:[s.jsxDEV("button",{onClick:()=>d("company"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("company"===u?"border-purple-500 text-purple-400":"border-transparent text-slate-400 hover:text-slate-300"),children:[s.jsxDEV(S,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:130,columnNumber:13},void 0),"Entreprise"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:122,columnNumber:11},void 0),s.jsxDEV("button",{onClick:()=>d("menu"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("menu"===u?"border-blue-500 text-blue-400":"border-transparent text-slate-400 hover:text-slate-300"),children:[s.jsxDEV(P,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:142,columnNumber:13},void 0),"Menu"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:134,columnNumber:11},void 0),s.jsxDEV("button",{onClick:()=>d("advanced-categories"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("advanced-categories"===u?"border-green-500 text-green-400":"border-transparent text-slate-400 hover:text-slate-300"),children:[s.jsxDEV(k,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:154,columnNumber:13},void 0),"Catégories avancées"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:146,columnNumber:11},void 0),s.jsxDEV("button",{onClick:()=>d("appearance"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("appearance"===u?"border-purple-500 text-purple-400":"border-transparent text-slate-400 hover:text-slate-300"),children:[s.jsxDEV(q,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:166,columnNumber:13},void 0),"Apparence"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:158,columnNumber:11},void 0),s.jsxDEV("button",{onClick:()=>d("permissions"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("permissions"===u?"border-orange-500 text-orange-400":"border-transparent text-slate-400 hover:text-slate-300"),children:[s.jsxDEV(v,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:178,columnNumber:13},void 0),"Permissions"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:170,columnNumber:11},void 0),s.jsxDEV("button",{onClick:()=>d("menu-permissions"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("menu-permissions"===u?"border-indigo-500 text-indigo-400":"border-transparent text-slate-400 hover:text-slate-300"),children:[s.jsxDEV(P,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:190,columnNumber:13},void 0),"Permissions Menu"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:182,columnNumber:11},void 0),N&&s.jsxDEV("button",{onClick:()=>d("admin"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("admin"===u?"border-red-500 text-red-400":"border-transparent text-slate-400 hover:text-slate-300"),children:[s.jsxDEV(E,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:203,columnNumber:15},void 0),"Admin"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:195,columnNumber:13},void 0),s.jsxDEV("button",{onClick:()=>d("categories"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("categories"===u?"border-cyan-500 text-cyan-400":"border-transparent text-slate-400 hover:text-slate-300"),children:[s.jsxDEV(R,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:216,columnNumber:13},void 0),"Catégories (legacy)"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:208,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:121,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:120,columnNumber:7},void 0),"company"===u&&s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:s.jsxDEV(W,{},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:225,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:224,columnNumber:9},void 0),"menu"===u&&s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:s.jsxDEV(X,{},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:231,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:230,columnNumber:9},void 0),"advanced-categories"===u&&s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:s.jsxDEV(Y,{},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:237,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:236,columnNumber:9},void 0),"appearance"===u&&s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:s.jsxDEV(ne,{},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:243,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:242,columnNumber:9},void 0),"permissions"===u&&s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:s.jsxDEV(K,{},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:249,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:248,columnNumber:9},void 0),"menu-permissions"===u&&s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:s.jsxDEV(se,{},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:255,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:254,columnNumber:9},void 0),"admin"===u&&N&&s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:s.jsxDEV(Q,{},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:261,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:260,columnNumber:9},void 0),"categories"===u&&s.jsxDEV(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:[s.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[s.jsxDEV(R,{className:"w-6 h-6 text-blue-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:267,columnNumber:57},void 0),s.jsxDEV("h2",{className:"text-xl font-semibold text-white",children:"Catégories de Tâches"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:267,columnNumber:98},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:267,columnNumber:11},void 0),s.jsxDEV("div",{className:"space-y-3 mb-4",children:t.map(e=>s.jsxDEV("div",{className:"flex items-center justify-between bg-slate-700/50 p-3 rounded-lg",children:[s.jsxDEV("span",{className:"text-slate-300",children:e.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:271,columnNumber:17},void 0),s.jsxDEV(n,{variant:"ghost",size:"icon",onClick:()=>{var s;window.confirm(`Voulez-vous vraiment supprimer la catégorie "${e.label}" ?\n\nCette action est irréversible.`)&&(s=e.value,a(t.filter(e=>e.value!==s)))},children:s.jsxDEV(_,{className:"w-4 h-4 text-red-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:276,columnNumber:20},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:272,columnNumber:17},void 0)]},e.value,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:270,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:268,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex gap-2",children:[s.jsxDEV("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"Nouvelle catégorie...",className:"flex-grow px-3 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:281,columnNumber:13},void 0),s.jsxDEV(n,{onClick:()=>{if(""===l.trim())return;const e={value:l.toLowerCase().replaceAll(/\s+/g,"-"),label:l};t.some(s=>s.value===e.value)?m({variant:"destructive",title:"Catégorie existante"}):(a([...t,e]),c(""))},className:"bg-blue-500 hover:bg-blue-600",children:[s.jsxDEV(j,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:282,columnNumber:91},void 0)," Ajouter"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:282,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:280,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:266,columnNumber:9},void 0),"categories"===u&&s.jsxDEV("div",{className:"flex justify-end",children:s.jsxDEV(n,{onClick:async()=>{const{error:e}=await i.from("app_settings").upsert({id:1,categories_config:{task_categories:t}});if(e){if("PGRST205"===e.code||"42P01"===e.code)return void m({title:"⚠️ Fonctionnalité non disponible",description:"La table app_settings n'existe pas encore."});m({variant:"destructive",title:"Erreur",description:"Impossible de sauvegarder les paramètres."})}else m({title:"✅ Paramètres sauvegardés",description:"Vos modifications ont été enregistrées."})},size:"lg",className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:[s.jsxDEV(f,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:289,columnNumber:159},void 0)," Sauvegarder les Paramètres Généraux"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:289,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:288,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:108,columnNumber:5},void 0):s.jsxDEV("div",{className:"text-center py-20",children:[s.jsxDEV(v,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:96,columnNumber:9},void 0),s.jsxDEV("h1",{className:"text-2xl font-bold text-white",children:"Accès non autorisé"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:97,columnNumber:9},void 0),s.jsxDEV("p",{className:"text-slate-400 mb-2",children:"Seuls les Gérants peuvent accéder à cette page."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:98,columnNumber:9},void 0),s.jsxDEV("p",{className:"text-slate-500 text-sm",children:["Votre rôle actuel : ",r?.role||"Non défini"," | Fonction : ",r?.function||"Non définie"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:99,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/Settings.jsx",lineNumber:95,columnNumber:7},void 0)};export{oe as default};
