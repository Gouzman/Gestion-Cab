const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BzUzpWLW.js","assets/vendor-react-CWhE6-Gf.js","assets/sentry-CxmcrLP_.js","assets/vendor-supabase-CR9Q8AJ3.js","assets/vendor-charts-BY8kkf7J.js","assets/vendor-ui-BBpB3Q8s.js","assets/index-3nJZp8WO.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./vendor-supabase-CR9Q8AJ3.js";import"./index-BzUzpWLW.js";function t(e){if(!e)return"file";let t=e.trim();t.endsWith(")")&&(t=t.slice(0,-1).trim());const i=t.lastIndexOf(".");if(-1===i||0===i)return t;const a=t.substring(i+1).toLowerCase();let r=t.substring(0,i);const n=["pdf","docx","doc","xlsx","xls","pptx","ppt","txt","png","jpg","jpeg","gif","svg","zip","rar","csv","json","xml","html","htm"];let l="";for(;r!==l;){l=r;for(const e of n){if(new RegExp(`\\.${e}$`,"i").test(r)){r=r.substring(0,r.lastIndexOf("."));break}}}return r&&""!==r.trim()?`${r}.${a}`:`file.${a}`}function i(e,i){if(!e||0===e.size)return void alert(`Impossible de télécharger "${i}": le fichier est vide ou corrompu.`);const a=t(i),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=a,n.style.display="none",document.body.appendChild(n),n.click(),n.remove()}async function a(t){try{if(t&&t.file_url&&"string"==typeof t.file_url&&t.file_url.startsWith("http")){const{downloadFileWithCors:a}=await e(async()=>{const{downloadFileWithCors:e}=await import("./index-BzUzpWLW.js").then(e=>e.m);return{downloadFileWithCors:e}},__vite__mapDeps([0,1,2,3,4,5,6])),r=await a(t.file_url);return 0===r.size?void alert(`Le fichier "${t.file_name}" est vide ou corrompu.`):void i(r,t&&t.file_name||"file")}if(t&&t.file_data){if("string"==typeof t.file_data){const e=t.file_type||"application/octet-stream",a=t.file_data.startsWith("data:")?t.file_data:`data:${e};base64,${t.file_data}`,r=await fetch(a);return void i(await r.blob(),t&&t.file_name||"file")}if(t.file_data instanceof Uint8Array||t.file_data instanceof ArrayBuffer){const e=t.file_data instanceof Uint8Array?t.file_data:new Uint8Array(t.file_data);return void i(new Blob([e],{type:t.file_type||"application/octet-stream"}),t&&t.file_name||"file")}}alert(`Le fichier "${t&&t.file_name||"inconnu"}" n'est pas téléchargeable.`)}catch(a){alert(`Impossible de télécharger le fichier "${t&&t.file_name||"inconnu"}". Erreur: ${a.message}`)}}function r(e){return!!(e&&e.file_data&&("string"==typeof e.file_data&&e.file_data.length>0||Array.isArray(e.file_data)&&e.file_data.length>0||e.file_data instanceof Uint8Array&&e.file_data.length>0))}export{t as c,a as d,r as h};
