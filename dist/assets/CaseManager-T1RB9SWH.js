import{r as e,f as s,P as o}from"./vendor-react-CWhE6-Gf.js";import{B as n,s as i,t as m}from"./index-BzUzpWLW.js";import{m as r,X as t,F as a,u as l,a0 as c,U as u,b as d,M as b,z as N,l as x,q as v,f as p,$ as g,a6 as C,_ as f}from"./vendor-ui-BBpB3Q8s.js";import{g as j}from"./clientUtils-CA0eKa9v.js";import{C as D}from"./ConfirmationModal-By6tTfcV.js";import"./sentry-CxmcrLP_.js";import"./vendor-supabase-CR9Q8AJ3.js";import"./vendor-charts-BY8kkf7J.js";const h=e=>{if(!e)return"";const s=Number(String(e).replace(/[^0-9]/g,""));return new Intl.NumberFormat("fr-FR").format(s)},E=({case:o,onSubmit:x,onCancel:v,currentUser:p})=>{const[g,C]=e.useState({title:"",code_dossier:"",case_type:"",client_id:"",objet_du_dossier:"",type_de_diligence:"",qualite_du_client:"personne_physique",opposing_party:"",assigned_to:"",next_hearing:"",description:"",status:"en-cours",priority:"medium",honoraire:"",notes:"",attachments:[],visible_to:[]}),[f,j]=e.useState([]),[D,E]=e.useState([]);e.useEffect(()=>{(async()=>{const{data:e,error:s}=await i.from("profiles").select("id, name, role");if(s)m({variant:"destructive",title:"Erreur",description:"Impossible de charger les membres de l'√©quipe."});else{const s=(e||[]).filter(e=>"admin"!==e.role);j(s.filter(e=>e.id!==p.id))}const{data:o,error:n}=await i.from("clients").select("id, client_code, name, type, first_name, last_name, company").order("client_code",{ascending:!0});n?m({variant:"destructive",title:"Erreur",description:"Impossible de charger les clients."}):E(o||[])})()},[p.id]),e.useEffect(()=>{o&&C({title:o.title||"",code_dossier:o.code_dossier||"",case_type:o.case_type||"",client_id:o.client_id||"",objet_du_dossier:o.objet_du_dossier||"",type_de_diligence:o.type_de_diligence||"",qualite_du_client:o.qualite_du_client||"personne_physique",opposing_party:o.opposing_party||"",assigned_to:o.assigned_to||"",next_hearing:o.next_hearing||"",description:o.description||"",status:o.status||"en-cours",priority:o.priority||"medium",honoraire:o.honoraire?h(o.honoraire):"",notes:o.notes||"",attachments:o.attachments||[],visible_to:o.visible_to||[]})},[o]);const z=e=>{const{name:s,value:o,type:n}=e.target;C("honoraire"===s?e=>({...e,honoraire:h(o)}):e=>({...e,[s]:"number"===n?parseFloat(o)||0:o}))},U=e=>{if(e.target.files&&e.target.files[0]){const s=e.target.files[0];C(e=>({...e,attachments:[...e.attachments,s.name]})),m({title:"üìé Fichier ajout√©",description:`${s.name} a √©t√© ajout√©.`}),e.target.value=""}};return s.jsxDEV(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxDEV(r.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-slate-800 border border-slate-700 rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[s.jsxDEV("h2",{className:"text-2xl font-bold text-white",children:o?"Modifier le Dossier":"Nouveau Dossier"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:163,columnNumber:11},void 0),s.jsxDEV(n,{variant:"ghost",size:"icon",onClick:v,className:"text-slate-400 hover:text-white",children:s.jsxDEV(t,{className:"w-5 h-5"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:172,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:166,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:162,columnNumber:9},void 0),s.jsxDEV("form",{onSubmit:e=>{var s;e.preventDefault(),x({...g,honoraire:(s=g.honoraire,s?Number(String(s).replace(/[^0-9]/g,"")):0)})},className:"space-y-6",children:[o&&o.id_dossier&&s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(a,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:181,columnNumber:17},void 0),"Id dossier"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:180,columnNumber:15},void 0),s.jsxDEV("input",{type:"text",value:o.id_dossier,disabled:!0,className:"w-full px-4 py-3 bg-slate-700/30 border border-slate-600 rounded-lg text-slate-400 cursor-not-allowed"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:184,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-xs text-slate-500 mt-1",children:"Identifiant num√©rique g√©n√©r√© automatiquement (lecture seule)"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:190,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:179,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(a,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:197,columnNumber:15},void 0),"R√©f dossier *"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:196,columnNumber:13},void 0),s.jsxDEV("input",{type:"text",name:"code_dossier",value:g.code_dossier,onChange:z,required:!0,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ex: REF-2025-001"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:200,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-xs text-slate-500 mt-1",children:"R√©f√©rence du dossier (saisie manuelle)"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:209,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:195,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(a,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:215,columnNumber:15},void 0),"Type de dossier *"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:214,columnNumber:13},void 0),s.jsxDEV("select",{name:"case_type",value:g.case_type,onChange:z,required:!0,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsxDEV("option",{value:"",children:"S√©lectionner un type..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:225,columnNumber:15},void 0),s.jsxDEV("option",{value:"Litige contractuel",children:"Litige contractuel"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:226,columnNumber:15},void 0),s.jsxDEV("option",{value:"Planification successorale",children:"Planification successorale"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:227,columnNumber:15},void 0),s.jsxDEV("option",{value:"Droit des soci√©t√©s",children:"Droit des soci√©t√©s"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:228,columnNumber:15},void 0),s.jsxDEV("option",{value:"Droit Civil",children:"Droit Civil"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:229,columnNumber:15},void 0),s.jsxDEV("option",{value:"Droit Commercial",children:"Droit Commercial"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:230,columnNumber:15},void 0),s.jsxDEV("option",{value:"Droit P√©nal",children:"Droit P√©nal"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:231,columnNumber:15},void 0),s.jsxDEV("option",{value:"Droit de la Famille",children:"Droit de la Famille"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:232,columnNumber:15},void 0),s.jsxDEV("option",{value:"Droit du Travail",children:"Droit du Travail"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:233,columnNumber:15},void 0),s.jsxDEV("option",{value:"Droit Immobilier",children:"Droit Immobilier"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:234,columnNumber:15},void 0),s.jsxDEV("option",{value:"Propri√©t√© Intellectuelle",children:"Propri√©t√© Intellectuelle"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:235,columnNumber:15},void 0),s.jsxDEV("option",{value:"Droit Administratif",children:"Droit Administratif"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:236,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:218,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:213,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{htmlFor:"client-id",className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(l,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:243,columnNumber:15},void 0),"Client *"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:242,columnNumber:13},void 0),s.jsxDEV("select",{id:"client-id",name:"client_id",value:g.client_id,onChange:z,required:!0,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsxDEV("option",{value:"",children:"S√©lectionner un client..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:254,columnNumber:15},void 0),D.map(e=>s.jsxDEV("option",{value:e.id,children:[e.client_code?`${e.client_code} - `:"",e.name]},e.id,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:256,columnNumber:17},void 0))]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:246,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-xs text-slate-500 mt-1",children:"S√©lectionnez le client associ√© √† ce dossier"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:261,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:241,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(c,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:267,columnNumber:15},void 0),"Qualit√© du client *"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:266,columnNumber:13},void 0),s.jsxDEV("div",{className:"flex gap-4",children:[s.jsxDEV("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsxDEV("input",{type:"radio",name:"qualite_du_client",value:"personne_physique",checked:"personne_physique"===g.qualite_du_client,onChange:z,className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:272,columnNumber:17},void 0),s.jsxDEV("span",{className:"text-slate-300",children:"Personne physique"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:280,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:271,columnNumber:15},void 0),s.jsxDEV("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsxDEV("input",{type:"radio",name:"qualite_du_client",value:"personne_morale",checked:"personne_morale"===g.qualite_du_client,onChange:z,className:"w-4 h-4 text-indigo-600 focus:ring-indigo-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:283,columnNumber:17},void 0),s.jsxDEV("span",{className:"text-slate-300",children:"Personne morale"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:291,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:282,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:270,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:265,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Type de diligence"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:298,columnNumber:13},void 0),s.jsxDEV("select",{name:"type_de_diligence",value:g.type_de_diligence,onChange:z,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsxDEV("option",{value:"",children:"S√©lectionner un type..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:307,columnNumber:15},void 0),s.jsxDEV("option",{value:"Consultation",children:"Consultation"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:308,columnNumber:15},void 0),s.jsxDEV("option",{value:"Contentieux",children:"Contentieux"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:309,columnNumber:15},void 0),s.jsxDEV("option",{value:"Conseil",children:"Conseil"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:310,columnNumber:15},void 0),s.jsxDEV("option",{value:"R√©daction",children:"R√©daction d'actes"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:311,columnNumber:15},void 0),s.jsxDEV("option",{value:"Repr√©sentation",children:"Repr√©sentation"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:312,columnNumber:15},void 0),s.jsxDEV("option",{value:"M√©diation",children:"M√©diation"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:313,columnNumber:15},void 0),s.jsxDEV("option",{value:"Arbitrage",children:"Arbitrage"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:314,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:301,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:297,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Objet du dossier"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:320,columnNumber:13},void 0),s.jsxDEV("input",{type:"text",name:"objet_du_dossier",value:g.objet_du_dossier,onChange:z,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ex: Litige commercial relatif √† un contrat de prestation"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:323,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-xs text-slate-500 mt-1",children:"Objet juridique du dossier (diff√©rent de la description)"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:331,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:319,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(a,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:337,columnNumber:15},void 0),"Titre du dossier *"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:336,columnNumber:13},void 0),s.jsxDEV("input",{type:"text",name:"title",value:g.title,onChange:z,required:!0,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ex: Affaire Martin vs. Soci√©t√© ABC"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:340,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:335,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:353,columnNumber:13},void 0),s.jsxDEV("textarea",{name:"description",value:g.description,onChange:z,rows:3,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Description d√©taill√©e de l'affaire..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:356,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:352,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(l,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:369,columnNumber:15},void 0),"Assign√© √†"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:368,columnNumber:13},void 0),s.jsxDEV("select",{name:"assigned_to",value:g.assigned_to,onChange:z,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsxDEV("option",{value:"",children:"S√©lectionner un collaborateur..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:378,columnNumber:15},void 0),f.map(e=>s.jsxDEV("option",{value:e.name,children:e.name},e.id,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:380,columnNumber:17},void 0))]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:372,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:367,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(u,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:390,columnNumber:15},void 0),"Partie adverse"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:389,columnNumber:13},void 0),s.jsxDEV("input",{type:"text",name:"opposing_party",value:g.opposing_party,onChange:z,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Nom de la partie adverse"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:393,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:388,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(d,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:406,columnNumber:15},void 0),"Prochaine audience"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:405,columnNumber:13},void 0),s.jsxDEV("input",{type:"date",name:"next_hearing",value:g.next_hearing,onChange:z,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:409,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:404,columnNumber:11},void 0),s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Statut"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:421,columnNumber:15},void 0),s.jsxDEV("select",{name:"status",value:g.status,onChange:z,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsxDEV("option",{value:"en-cours",children:"En cours"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:430,columnNumber:17},void 0),s.jsxDEV("option",{value:"juge-acheve",children:"Jug√©/achev√©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:431,columnNumber:17},void 0),s.jsxDEV("option",{value:"cloture",children:"Cl√¥tur√©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:432,columnNumber:17},void 0),s.jsxDEV("option",{value:"archive",children:"Archiv√© - En attente"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:433,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:424,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:420,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Priorit√©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:437,columnNumber:15},void 0),s.jsxDEV("select",{name:"priority",value:g.priority,onChange:z,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsxDEV("option",{value:"low",children:"üü¢ Faible"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:446,columnNumber:17},void 0),s.jsxDEV("option",{value:"medium",children:"üü° Moyenne"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:447,columnNumber:17},void 0),s.jsxDEV("option",{value:"high",children:"üü† √âlev√©e"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:448,columnNumber:17},void 0),s.jsxDEV("option",{value:"urgent",children:"üî¥ Urgente"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:449,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:440,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:436,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:419,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Honoraire"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:456,columnNumber:13},void 0),s.jsxDEV("div",{className:"relative",children:[s.jsxDEV("input",{type:"text",name:"honoraire",value:g.honoraire,onChange:z,className:"w-full pl-4 pr-16 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ex: 5 000 000"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:460,columnNumber:15},void 0),s.jsxDEV("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400",children:"FCFA"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:468,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:459,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:455,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(b,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:477,columnNumber:15},void 0),"Autoris√© √†"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:476,columnNumber:13},void 0),s.jsxDEV("div",{className:"max-h-40 overflow-y-auto space-y-2 p-3 bg-slate-700/30 rounded-lg border border-slate-600",children:f.map(e=>s.jsxDEV("div",{className:"flex items-center",children:[s.jsxDEV("input",{type:"checkbox",id:`authorized-${e.id}`,checked:g.visible_to.includes(e.id),onChange:()=>{return s=e.id,void C(e=>{const o=e.visible_to.includes(s)?e.visible_to.filter(e=>e!==s):[...e.visible_to,s];return{...e,visible_to:o}});var s},className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:483,columnNumber:19},void 0),s.jsxDEV("label",{htmlFor:`authorized-${e.id}`,className:"ml-3 block text-sm text-slate-300",children:e.name},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:490,columnNumber:19},void 0)]},e.id,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:482,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:480,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-xs text-slate-500 mt-2",children:"üîí Seuls les utilisateurs s√©lectionn√©s et les administrateurs peuvent consulter le contenu complet."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:496,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:475,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[s.jsxDEV(N,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:504,columnNumber:15},void 0),"Pi√®ces jointes"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:503,columnNumber:13},void 0),s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxDEV("label",{htmlFor:"file-internal-case",className:"cursor-pointer bg-blue-600 hover:bg-blue-700 border border-blue-500 rounded-lg px-4 py-3 text-white font-medium flex items-center justify-center gap-2 transition-colors",children:[s.jsxDEV(a,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:513,columnNumber:17},void 0),"Choisir des fichiers"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:509,columnNumber:15},void 0),s.jsxDEV("input",{id:"file-internal-case",type:"file",className:"sr-only",onChange:U,multiple:!0},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:516,columnNumber:15},void 0),s.jsxDEV("label",{htmlFor:"file-external-case",className:"cursor-pointer bg-green-600 hover:bg-green-700 border border-green-500 rounded-lg px-4 py-3 text-white font-medium flex items-center justify-center gap-2 transition-colors",children:[s.jsxDEV(N,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:529,columnNumber:17},void 0),"Importer fichier"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:525,columnNumber:15},void 0),s.jsxDEV("input",{id:"file-external-case",type:"file",className:"sr-only",onChange:U,multiple:!0},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:532,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:507,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-xs text-slate-500 mt-2",children:["üìÅ ",s.jsxDEV("strong",{children:"Choisir"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:541,columnNumber:18},void 0)," : s√©lection depuis l'application | üìé ",s.jsxDEV("strong",{children:"Importer"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:541,columnNumber:81},void 0)," : depuis l'ordinateur"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:540,columnNumber:13},void 0),s.jsxDEV("div",{className:"mt-3 space-y-2",children:g.attachments.map((e,o)=>s.jsxDEV("div",{className:"text-sm text-slate-300 bg-slate-700/30 p-2 rounded-md flex items-center gap-2",children:[s.jsxDEV(a,{className:"w-4 h-4 text-blue-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:546,columnNumber:19},void 0),e]},o,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:545,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:543,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:502,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Notes"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:555,columnNumber:13},void 0),s.jsxDEV("textarea",{name:"notes",value:g.notes,onChange:z,rows:3,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Notes additionnelles..."},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:558,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:554,columnNumber:11},void 0),s.jsxDEV("div",{className:"flex gap-4 pt-6",children:[s.jsxDEV(n,{type:"submit",className:"flex-1 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700",children:o?"Mettre √† jour":"Cr√©er le dossier"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:569,columnNumber:13},void 0),s.jsxDEV(n,{type:"button",variant:"outline",onClick:v,className:"flex-1 border-slate-600 text-slate-300 hover:bg-slate-700",children:"Annuler"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:575,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:568,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:176,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:156,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseForm.jsx",lineNumber:150,columnNumber:5},void 0)},z=({case:e,clients:o=[],index:i,onEdit:m,onDelete:t})=>{const l=o.find(s=>s.id===e.client_id),c=l?j(l):"Non assign√©",u=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",d=(e=>{switch(e){case"en-cours":default:return{label:"Actif",color:"bg-blue-500 text-white"};case"juge-acheve":case"cloture":return{label:"Cl√¥tur√©",color:"bg-green-500 text-white"};case"archive":return{label:"En attente",color:"bg-yellow-500 text-white"}}})(e.status),b=(e=>{switch(e){case"urgent":case"high":return{label:"PRIORIT√â HAUTE",color:"text-red-500"};case"medium":default:return{label:"PRIORIT√â MOYENNE",color:"text-yellow-500"};case"low":return{label:"PRIORIT√â BASSE",color:"text-green-500"}}})(e.priority);return s.jsxDEV(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*i},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-lg p-6 hover:border-slate-600/50 transition-all duration-200",children:[s.jsxDEV("div",{className:"flex items-start justify-between mb-4",children:[s.jsxDEV("div",{className:"flex items-center gap-3",children:[s.jsxDEV("h3",{className:"text-lg font-semibold text-white",children:e.title||"N/A"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:69,columnNumber:11},void 0),s.jsxDEV("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-md text-xs font-medium ${d.color}`,children:[s.jsxDEV(a,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:71,columnNumber:13},void 0),d.label]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:70,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:68,columnNumber:9},void 0),s.jsxDEV("span",{className:`text-xs font-bold ${b.color}`,children:b.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:75,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:67,columnNumber:7},void 0),s.jsxDEV("div",{className:"mb-4",children:s.jsxDEV("p",{className:"text-sm text-slate-300",children:[s.jsxDEV("span",{className:"font-medium text-slate-400",children:"ID du dossier:"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:83,columnNumber:11},void 0)," ",e.code_dossier||"Non d√©fini",s.jsxDEV("span",{className:"mx-3",children:"‚Ä¢"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:84,columnNumber:11},void 0),s.jsxDEV("span",{className:"font-medium text-slate-400",children:"R√©f dossier:"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:85,columnNumber:11},void 0)," ",e.ref_dossier||"Non d√©fini"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:82,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:81,columnNumber:7},void 0),s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-xs text-slate-400 mb-1",children:"Type de dossier"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:93,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-sm text-slate-200 font-medium",children:e.case_type||"Non d√©fini"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:94,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:92,columnNumber:9},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-xs text-slate-400 mb-1",children:"Client"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:99,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-sm text-slate-200 font-medium",children:c},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:100,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:98,columnNumber:9},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-xs text-slate-400 mb-1",children:"Assign√© √†"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:105,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-sm text-slate-200 font-medium",children:e.assigned_to||"Non assign√©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:106,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:104,columnNumber:9},void 0),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-xs text-slate-400 mb-1",children:"Date de d√©but"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:111,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-sm text-slate-200 font-medium",children:u(e.created_at)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:112,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:110,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:90,columnNumber:7},void 0),s.jsxDEV("div",{className:"flex items-center justify-between pt-4 border-t border-slate-700/50",children:[s.jsxDEV("div",{className:"flex items-center gap-4 text-sm text-slate-300",children:[s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV(a,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:120,columnNumber:13},void 0),s.jsxDEV("span",{children:[e.attachments?.length||0," documents"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:121,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:119,columnNumber:11},void 0),e.next_hearing&&s.jsxDEV("div",{className:"flex items-center gap-1",children:[s.jsxDEV(x,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:125,columnNumber:15},void 0),s.jsxDEV("span",{children:["Prochaine audience: ",u(e.next_hearing)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:126,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:124,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:118,columnNumber:9},void 0),s.jsxDEV(n,{onClick:()=>m(e),className:"bg-slate-700 border border-slate-600 text-slate-200 hover:bg-slate-600 px-4 py-2 rounded-md text-sm font-medium",children:"Voir d√©tails"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:130,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:117,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseListItem.jsx",lineNumber:60,columnNumber:5},void 0)},U=({currentUser:o})=>{const[t,l]=e.useState([]),[c,u]=e.useState([]),[d,b]=e.useState(!1),[N,j]=e.useState(null),[h,U]=e.useState(""),[V,G]=e.useState("all"),[F,y]=e.useState({open:!1,title:"",message:"",onConfirm:null}),_=o&&("Gerant"===o.function||"Associe Emerite"===o.function)||o.role&&"admin"===o.role.toLowerCase();e.useEffect(()=>{I(),w()},[]);const w=async()=>{const{data:e,error:s}=await i.from("clients").select("id, name, type, first_name, last_name, company");s||u(e||[])},I=async()=>{const{data:e,error:s}=await i.from("cases").select("*").order("created_at",{ascending:!1});if(s)m({variant:"destructive",title:"Erreur",description:"Impossible de charger les dossiers."});else if(_)l(e);else{const s=e.filter(e=>e.created_by&&e.created_by===o.id||e.visible_to&&e.visible_to.includes(o.id));l(s)}},L=t.filter(e=>{const s=e.title?.toLowerCase().includes(h.toLowerCase())||e.description?.toLowerCase().includes(h.toLowerCase())||e.id?.toLowerCase().includes(h.toLowerCase()),o="all"===V||e.status===V;return s&&o}),M={all:t.length,"en-cours":t.filter(e=>"en-cours"===e.status).length,"juge-acheve":t.filter(e=>"juge-acheve"===e.status).length,cloture:t.filter(e=>"cloture"===e.status).length,archive:t.filter(e=>"archive"===e.status).length};return s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{children:[s.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gestion des Dossiers"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:166,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-slate-400",children:"Suivez et g√©rez vos affaires juridiques"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:167,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:165,columnNumber:9},void 0),s.jsxDEV(n,{onClick:()=>{j(null),b(!0)},className:"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700",children:[s.jsxDEV(v,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:176,columnNumber:11},void 0),"Nouveau Dossier"]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:169,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:164,columnNumber:7},void 0),s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[{key:"all",label:"Total",icon:a},{key:"en-cours",label:"En cours",icon:p},{key:"juge-acheve",label:"Jug√©/Achev√©",icon:g},{key:"cloture",label:"Cl√¥tur√©",icon:x},{key:"archive",label:"Archiv√©",icon:C}].map(e=>{const o=e.icon;return s.jsxDEV(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-lg p-4",children:s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-slate-400 text-sm",children:e.label},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:199,columnNumber:19},void 0),s.jsxDEV("p",{className:"text-2xl font-bold text-white",children:M[e.key]||0},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:200,columnNumber:19},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:198,columnNumber:17},void 0),s.jsxDEV(o,{className:"w-6 h-6 text-slate-400"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:202,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:197,columnNumber:15},void 0)},e.key,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:191,columnNumber:13},void 0)})},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:181,columnNumber:7},void 0),s.jsxDEV("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:s.jsxDEV("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxDEV("div",{className:"flex-1",children:s.jsxDEV("div",{className:"relative",children:[s.jsxDEV(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:213,columnNumber:15},void 0),s.jsxDEV("input",{type:"text",placeholder:"Rechercher un dossier par ID, titre...",value:h,onChange:e=>U(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:214,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:212,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:211,columnNumber:11},void 0),s.jsxDEV("div",{children:s.jsxDEV("select",{value:V,onChange:e=>G(e.target.value),className:"px-4 py-2 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsxDEV("option",{value:"all",children:"Tous les statuts"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:230,columnNumber:15},void 0),s.jsxDEV("option",{value:"en-cours",children:"En cours"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:231,columnNumber:15},void 0),s.jsxDEV("option",{value:"juge-acheve",children:"Jug√©/achev√©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:232,columnNumber:15},void 0),s.jsxDEV("option",{value:"cloture",children:"Cl√¥tur√©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:233,columnNumber:15},void 0),s.jsxDEV("option",{value:"archive",children:"Archiv√© - En attente"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:234,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:225,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:224,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:210,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:209,columnNumber:7},void 0),s.jsxDEV("div",{className:"space-y-4",children:L.map((e,o)=>s.jsxDEV(z,{case:e,clients:c,index:o,onEdit:e=>{j(e),b(!0)},onDelete:e=>{const s=t.find(s=>s.id===e);y({open:!0,title:"Supprimer le dossier",message:`Voulez-vous vraiment supprimer le dossier "${s?.title}" ?\n\nCette action est irr√©versible.`,onConfirm:()=>{(async e=>{const{error:s}=await i.from("cases").delete().eq("id",e);s?m({variant:"destructive",title:"Erreur de suppression",description:s.message}):(l(t.filter(s=>s.id!==e)),m({title:"üóëÔ∏è Dossier supprim√©",description:"Le dossier a √©t√© supprim√© avec succ√®s."}))})(e),y({...F,open:!1})}})}},e.id,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:243,columnNumber:11},void 0))},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:241,columnNumber:7},void 0),0===L.length&&s.jsxDEV(r.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[s.jsxDEV(a,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:274,columnNumber:11},void 0),s.jsxDEV("h3",{className:"text-xl font-semibold text-slate-400 mb-2",children:"Aucun dossier trouv√©"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:275,columnNumber:11},void 0),s.jsxDEV("p",{className:"text-slate-500",children:h||"all"!==V?"Essayez de modifier vos filtres de recherche":"Commencez par cr√©er votre premier dossier"},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:276,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:269,columnNumber:9},void 0),d&&s.jsxDEV(E,{case:N,onSubmit:N?async e=>{const s={};["title","case_type","client_id","opposing_party","assigned_to","next_hearing","description","status","priority","honoraire","notes","attachments","visible_to"].forEach(o=>{void 0!==e[o]&&(s[o]=e[o])});for(const i in s)"number"==typeof s[i]&&Number.isNaN(s[i])&&(s[i]=0),"next_hearing"!==i||""!==s[i]&&null!==s[i]&&void 0!==s[i]||delete s[i];const{data:o,error:n}=await i.from("cases").update(s).eq("id",N.id).select();n?m({variant:"destructive",title:"Erreur",description:"Impossible de modifier le dossier. V√©rifiez les champs et r√©essayez."}):(l(t.map(e=>e.id===N.id?o[0]:e)),j(null),b(!1),m({title:"‚úÖ Dossier modifi√©",description:"Le dossier a √©t√© mis √† jour avec succ√®s."}))}:async e=>{const s={};["title","case_type","client_id","opposing_party","assigned_to","next_hearing","description","status","priority","honoraire","notes","attachments","visible_to","created_by"].forEach(o=>{void 0!==e[o]&&(s[o]=e[o])}),s.created_by=o?.id;for(const o in s)"number"==typeof s[o]&&Number.isNaN(s[o])&&(s[o]=0),"next_hearing"!==o||""!==s[o]&&null!==s[o]&&void 0!==s[o]||delete s[o];const{data:n,error:r}=await i.from("cases").insert([s]).select();r?m({variant:"destructive",title:"Erreur",description:"Impossible d'ajouter le dossier. V√©rifiez les champs et r√©essayez."}):(l([n[0],...t]),b(!1),m({title:"‚úÖ Dossier cr√©√©",description:`Le dossier ${n[0].id} a √©t√© cr√©√© avec succ√®s.`}))},onCancel:()=>{b(!1),j(null)},currentUser:o},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:286,columnNumber:9},void 0),s.jsxDEV(D,{open:F.open,onOpenChange:e=>y({...F,open:e}),title:F.title,message:F.message,onConfirm:F.onConfirm},void 0,!1,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:298,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/gouzman/Documents/Gestion-Cab/src/components/CaseManager.jsx",lineNumber:163,columnNumber:5},void 0)};U.propTypes={currentUser:o.shape({id:o.string,name:o.string,email:o.string,role:o.string,function:o.string})};export{U as default};
