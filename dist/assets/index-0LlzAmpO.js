const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TaskManager-CeovSrtl.js","assets/vendor-react-DYPeng9G.js","assets/label-BZj4Sq3D.js","assets/vendor-ui-DYDeDtSQ.js","assets/filePreviewUtils-Bb8NGExJ.js","assets/ConfirmationModal-CduQsMHX.js","assets/vendor-supabase-DEEIiAjM.js","assets/ClientManager-CNibaAaS.js","assets/clientUtils-CA0eKa9v.js","assets/CaseManager-DuS_RHTx.js","assets/Calendar-CGfHpmF9.js","assets/index-DpPMW0AV.js","assets/Reports-nWWeTQ5u.js","assets/TeamManager-CK1lznWe.js","assets/DocumentManager-DknWUk5i.js","assets/Settings-C1rBDFAd.js","assets/permissionsUtils-VRGcIqVs.js","assets/BillingManager-CuZDoZ7P.js"])))=>i.map(i=>d[i]);
import{R as e,j as t,r as s,P as r,H as a,h as n,i}from"./vendor-react-DYPeng9G.js";import{V as o,R as l,A as c,C as d,X as u,T as m,D as p,P as f,S as x,L as h,a as b,U as g,F as v,b as w,c as y,d as j,B as N,e as _,m as k,f as C,g as S,h as I,i as z,j as E,k as P,l as D,n as T,o as A,p as F,q as $,r as L,s as M,t as R,K as q,H as V,u as O,v as U,w as B,E as G,x as W}from"./vendor-ui-DYDeDtSQ.js";import{c as J}from"./vendor-supabase-DEEIiAjM.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const H={},X=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in H)return;H[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,s)=>{r.addEventListener("load",t),r.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};function K(e){var t,s,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=K(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function Y(){for(var e,t,s=0,r="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=K(e))&&(r&&(r+=" "),r+=t);return r}function Z(){for(var e,t,s=0,r="";s<arguments.length;)(e=arguments[s++])&&(t=Q(e))&&(r&&(r+=" "),r+=t);return r}function Q(e){if("string"==typeof e)return e;for(var t,s="",r=0;r<e.length;r++)e[r]&&(t=Q(e[r]))&&(s&&(s+=" "),s+=t);return s}function ee(e){var t=function(e){var t=e.theme,s=e.prefix,r={nextPart:new Map,validators:[]},a=function(e,t){if(!t)return e;return e.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){var s=e[0],r=e[1];return[t+s,r]})):e})]})}(Object.entries(e.classGroups),s);return a.forEach(function(e){var s=e[0];re(e[1],r,s,t)}),r}(e),s=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,a=void 0===r?{}:r;return{getClassGroupId:function(e){var s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),te(s,t)||function(e){if(se.test(e)){var t=se.exec(e)[1],s=t?.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}}(e)},getConflictingClassGroupIds:function(e,t){var r=s[e]||[];return t&&a[e]?[].concat(r,a[e]):r}}}function te(e,t){if(0===e.length)return t.classGroupId;var s=e[0],r=t.nextPart.get(s),a=r?te(e.slice(1),r):void 0;if(a)return a;if(0!==t.validators.length){var n=e.join("-");return t.validators.find(function(e){return(0,e.validator)(n)})?.classGroupId}}var se=/^\[(.+)\]$/;function re(e,t,s,r){e.forEach(function(e){if("string"!=typeof e){if("function"==typeof e)return e.isThemeGetter?void re(e(r),t,s,r):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(function(e){var a=e[0];re(e[1],ae(t,a),s,r)})}else{(""===e?t:ae(t,e)).classGroupId=s}})}function ae(e,t){var s=e;return t.split("-").forEach(function(e){s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s}function ne(e){if(e<1)return{get:function(){},set:function(){}};var t=0,s=new Map,r=new Map;function a(a,n){s.set(a,n),++t>e&&(t=0,r=s,s=new Map)}return{get:function(e){var t=s.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(a(e,t),t):void 0},set:function(e,t){s.has(e)?s.set(e,t):a(e,t)}}}function ie(e){var t=e.separator||":",s=1===t.length,r=t[0],a=t.length;return function(e){for(var n,i=[],o=0,l=0,c=0;c<e.length;c++){var d=e[c];if(0===o){if(d===r&&(s||e.slice(c,c+a)===t)){i.push(e.slice(l,c)),l=c+a;continue}if("/"===d){n=c;continue}}"["===d?o++:"]"===d&&o--}var u=0===i.length?e:e.substring(l),m=u.startsWith("!");return{modifiers:i,hasImportantModifier:m,baseClassName:m?u.substring(1):u,maybePostfixModifierPosition:n&&n>l?n-l:void 0}}}var oe=/\s+/;function le(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var r,a,n,i=function(e){var s=t[0],l=t.slice(1).reduce(function(e,t){return t(e)},s());return r=function(e){return{cache:ne(e.cacheSize),splitModifiers:ie(e),...ee(e)}}(l),a=r.cache.get,n=r.cache.set,i=o,o(e)};function o(e){var t=a(e);if(t)return t;var s=function(e,t){var s=t.splitModifiers,r=t.getClassGroupId,a=t.getConflictingClassGroupIds,n=new Set;return e.trim().split(oe).map(function(e){var t=s(e),a=t.modifiers,n=t.hasImportantModifier,i=t.baseClassName,o=t.maybePostfixModifierPosition,l=r(o?i.substring(0,o):i),c=Boolean(o);if(!l){if(!o)return{isTailwindClass:!1,originalClassName:e};if(!(l=r(i)))return{isTailwindClass:!1,originalClassName:e};c=!1}var d=function(e){if(e.length<=1)return e;var t=[],s=[];return e.forEach(function(e){"["===e[0]?(t.push.apply(t,s.sort().concat([e])),s=[]):s.push(e)}),t.push.apply(t,s.sort()),t}(a).join(":");return{isTailwindClass:!0,modifierId:n?d+"!":d,classGroupId:l,originalClassName:e,hasPostfixModifier:c}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,s=e.classGroupId,r=e.hasPostfixModifier,i=t+s;return!n.has(i)&&(n.add(i),a(s,r).forEach(function(e){return n.add(t+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" ")}(e,r);return n(e,s),s}return function(){return i(Z.apply(null,arguments))}}function ce(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var de=/^\[(?:([a-z-]+):)?(.+)\]$/i,ue=/^\d+\/\d+$/,me=new Set(["px","full","screen"]),pe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xe=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function he(e){return je(e)||me.has(e)||ue.test(e)||be(e)}function be(e){return ze(e,"length",Ee)}function ge(e){return ze(e,"size",Pe)}function ve(e){return ze(e,"position",Pe)}function we(e){return ze(e,"url",De)}function ye(e){return ze(e,"number",je)}function je(e){return!Number.isNaN(Number(e))}function Ne(e){return e.endsWith("%")&&je(e.slice(0,-1))}function _e(e){return Te(e)||ze(e,"number",Te)}function ke(e){return de.test(e)}function Ce(){return!0}function Se(e){return pe.test(e)}function Ie(e){return ze(e,"",Ae)}function ze(e,t,s){var r=de.exec(e);return!!r&&(r[1]?r[1]===t:s(r[2]))}function Ee(e){return fe.test(e)}function Pe(){return!1}function De(e){return e.startsWith("url(")}function Te(e){return Number.isInteger(Number(e))}function Ae(e){return xe.test(e)}function Fe(){var e=ce("colors"),t=ce("spacing"),s=ce("blur"),r=ce("brightness"),a=ce("borderColor"),n=ce("borderRadius"),i=ce("borderSpacing"),o=ce("borderWidth"),l=ce("contrast"),c=ce("grayscale"),d=ce("hueRotate"),u=ce("invert"),m=ce("gap"),p=ce("gradientColorStops"),f=ce("gradientColorStopPositions"),x=ce("inset"),h=ce("margin"),b=ce("opacity"),g=ce("padding"),v=ce("saturate"),w=ce("scale"),y=ce("sepia"),j=ce("skew"),N=ce("space"),_=ce("translate"),k=function(){return["auto",ke,t]},C=function(){return[ke,t]},S=function(){return["",he]},I=function(){return["auto",je,ke]},z=function(){return["","0",ke]},E=function(){return[je,ye]},P=function(){return[je,ke]};return{cacheSize:500,theme:{colors:[Ce],spacing:[he],blur:["none","",Se,ke],brightness:E(),borderColor:[e],borderRadius:["none","","full",Se,ke],borderSpacing:C(),borderWidth:S(),contrast:E(),grayscale:z(),hueRotate:P(),invert:z(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[Ne,be],inset:k(),margin:k(),opacity:E(),padding:C(),saturate:E(),scale:E(),sepia:z(),skew:P(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",ke]}],container:["container"],columns:[{columns:[Se]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[ke])}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_e]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ke]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",_e]}],"grid-cols":[{"grid-cols":[Ce]}],"col-start-end":[{col:["auto",{span:["full",_e]},ke]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Ce]}],"row-start-end":[{row:["auto",{span:[_e]},ke]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ke]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(["start","end","center","between","around","evenly","stretch"])}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(["start","end","center","between","around","evenly","stretch"],["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[h]}],mx:[{mx:[h]}],my:[{my:[h]}],ms:[{ms:[h]}],me:[{me:[h]}],mt:[{mt:[h]}],mr:[{mr:[h]}],mb:[{mb:[h]}],ml:[{ml:[h]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ke,t]}],"min-w":[{"min-w":["min","max","fit",ke,he]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Se]},Se,ke]}],h:[{h:[ke,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ke,he]}],"max-h":[{"max-h":[ke,t,"min","max","fit"]}],"font-size":[{text:["base",Se,be]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ye]}],"font-family":[{font:[Ce]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ke]}],"line-clamp":[{"line-clamp":["none",je,ye]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ke,he]}],"list-image":[{"list-image":["none",ke]}],"list-style-type":[{list:["none","disc","decimal",ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(["solid","dashed","dotted","double","none"],["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",he]}],"underline-offset":[{"underline-offset":["auto",ke,he]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],[ve])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ge]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},we]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[n]}],"rounded-s":[{"rounded-s":[n]}],"rounded-e":[{"rounded-e":[n]}],"rounded-t":[{"rounded-t":[n]}],"rounded-r":[{"rounded-r":[n]}],"rounded-b":[{"rounded-b":[n]}],"rounded-l":[{"rounded-l":[n]}],"rounded-ss":[{"rounded-ss":[n]}],"rounded-se":[{"rounded-se":[n]}],"rounded-ee":[{"rounded-ee":[n]}],"rounded-es":[{"rounded-es":[n]}],"rounded-tl":[{"rounded-tl":[n]}],"rounded-tr":[{"rounded-tr":[n]}],"rounded-br":[{"rounded-br":[n]}],"rounded-bl":[{"rounded-bl":[n]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[].concat(["solid","dashed","dotted","double","none"],["hidden"])}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(["solid","dashed","dotted","double","none"])}],"outline-offset":[{"outline-offset":[ke,he]}],"outline-w":[{outline:[he]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:S()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[he]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Se,Ie]}],"shadow-color":[{shadow:[Ce]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Se,ke]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[v]}],sepia:[{sepia:[y]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[y]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ke]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",ke]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[_e,ke]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ke]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[he,ye]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var $e=le(Fe);function Le(...e){return $e(Y(e))}const Me=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Re=Y,qe=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return Re(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:a,defaultVariants:n}=t,i=Object.keys(a).map(e=>{const t=null==s?void 0:s[e],r=null==n?void 0:n[e];if(null===t)return null;const i=Me(t)||Me(r);return a[e][i]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...o}[t]):{...n,...o}[t]===s})?[...e,s,r]:e},[]);return Re(e,i,l,null==s?void 0:s.class,null==s?void 0:s.className)},Ve=f,Oe=e.forwardRef(({className:e,...s},r)=>t.jsx(o,{ref:r,className:Le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...s}));Oe.displayName=o.displayName;const Ue=qe("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Be=e.forwardRef(({className:e,variant:s,...r},a)=>t.jsx(l,{ref:a,className:Le(Ue({variant:s}),e),...r}));Be.displayName=l.displayName;e.forwardRef(({className:e,...s},r)=>t.jsx(c,{ref:r,className:Le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...s})).displayName=c.displayName;const Ge=e.forwardRef(({className:e,...s},r)=>t.jsx(d,{ref:r,className:Le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"data-toast-close":"",...s,children:t.jsx(u,{className:"h-4 w-4"})}));Ge.displayName=d.displayName;const We=e.forwardRef(({className:e,...s},r)=>t.jsx(m,{ref:r,className:Le("text-sm font-semibold",e),...s}));We.displayName=m.displayName;const Je=e.forwardRef(({className:e,...s},r)=>t.jsx(p,{ref:r,className:Le("text-sm opacity-90",e),...s}));Je.displayName=p.displayName;let He=0;const Xe={state:{toasts:[]},listeners:[],getState:()=>Xe.state,setState:e=>{Xe.state="function"==typeof e?e(Xe.state):{...Xe.state,...e},Xe.listeners.forEach(e=>e(Xe.state))},subscribe:e=>(Xe.listeners.push(e),()=>{Xe.listeners=Xe.listeners.filter(t=>t!==e)})},Ke=({...e})=>{const t=(He=(He+1)%Number.MAX_VALUE,He.toString()),s=()=>Xe.setState(e=>({...e,toasts:e.toasts.filter(e=>e.id!==t)}));return Xe.setState(r=>({...r,toasts:[{...e,id:t,dismiss:s},...r.toasts].slice(0,1)})),{id:t,dismiss:s,update:e=>Xe.setState(s=>({...s,toasts:s.toasts.map(s=>s.id===t?{...s,...e}:s)}))}};function Ye(){const[e,t]=s.useState(Xe.getState());return s.useEffect(()=>Xe.subscribe(e=>{t(e)}),[]),s.useEffect(()=>{const t=[];return e.toasts.forEach(e=>{if(e.duration===1/0)return;const s=setTimeout(()=>{e.dismiss()},e.duration||5e3);t.push(s)}),()=>{t.forEach(e=>clearTimeout(e))}},[e.toasts]),{toast:Ke,toasts:e.toasts}}function Ze(){const{toasts:e}=Ye();return t.jsxs(Ve,{children:[e.map(({id:e,title:s,description:r,action:a,dismiss:n,...i})=>t.jsxs(Be,{...i,children:[t.jsxs("div",{className:"grid gap-1",children:[s&&t.jsx(We,{children:s}),r&&t.jsx(Je,{children:r})]}),a,t.jsx(Ge,{})]},e)),t.jsx(Oe,{})]})}const Qe=qe("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),et=e.forwardRef(({className:e,variant:s,size:r,asChild:a=!1,...n},i)=>{const o=a?x:"button";return t.jsx(o,{className:Le(Qe({variant:s,size:r,className:e})),ref:i,...n})});et.displayName="Button";const tt=J("https://fhuzkubnxuetakpxkwlr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZodXprdWJueHVldGFrcHhrd2xyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxMTE4MTEsImV4cCI6MjA3NDY4NzgxMX0.6_fLQrCtBdYAKNXgT2fAo6vHVfhe3DmISq7F-egfyUY",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:"undefined"!=typeof window?window.localStorage:void 0,storageKey:"gestion-cab-auth",flowType:"pkce"},global:{headers:{Prefer:"return=representation"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}});tt.auth.onAuthStateChange((e,t)=>{"TOKEN_REFRESHED"===e||"SIGNED_OUT"===e&&"undefined"!=typeof window&&localStorage.removeItem("gestion-cab-auth")});const st={company_info:{name:"Cabinet d'Avocats",logo_url:"",address:"",phone:"",email:"",slogan:"",description:""},menu_config:{items:[{id:"dashboard",label:"Tableau de bord",enabled:!0,order:1},{id:"clients",label:"Clients",enabled:!0,order:2},{id:"cases",label:"Dossiers",enabled:!0,order:3},{id:"tasks",label:"Tâches",enabled:!0,order:4},{id:"documents",label:"Documents",enabled:!0,order:5},{id:"calendar",label:"Calendrier",enabled:!0,order:6},{id:"team",label:"Collaborateurs",enabled:!0,order:7},{id:"billing",label:"Facturation",enabled:!0,order:8},{id:"settings",label:"Paramètres",enabled:!0,order:9}]},categories_config:{task_categories:[],case_types:[],user_roles:[{value:"admin",label:"Administrateur"},{value:"gerant",label:"Gérant"},{value:"avocat",label:"Avocat"},{value:"secretaire",label:"Secrétaire"}],task_statuses:[{value:"todo",label:"À faire",color:"gray"},{value:"in_progress",label:"En cours",color:"blue"},{value:"done",label:"Terminé",color:"green"}],case_statuses:[{value:"open",label:"Ouvert",color:"green"},{value:"in_progress",label:"En cours",color:"blue"},{value:"closed",label:"Fermé",color:"gray"}]}},rt=async e=>{try{const{data:t,error:s}=await tt.from("app_settings").select("id").eq("id",1).maybeSingle();if(s)return{success:!1,error:s};if(!t){const{data:t,error:s}=await tt.from("app_settings").insert({id:1,...st,...e}).select().single();return s?{success:!1,error:s}:{success:!0,data:t}}const{data:r,error:a}=await tt.from("app_settings").update(e).eq("id",1).select().single();return a?{success:!1,error:a}:{success:!0,data:r}}catch(t){return{success:!1,error:t}}},at=async e=>rt({company_info:e}),nt=async e=>rt({menu_config:e}),it=async e=>rt({categories_config:e}),ot=()=>{const[e,t]=s.useState(st),[r,a]=s.useState(!0),[n,i]=s.useState(null),o=async()=>{a(!0);try{const e=await(async()=>{try{const{data:e,error:t}=await tt.from("app_settings").select("*").eq("id",1).single();return t?st:e||st}catch(n){return st}})();t(e),i(null)}catch(e){i(e),t(st)}finally{a(!1)}};return s.useEffect(()=>{o()},[]),{settings:e,loading:r,error:n,refetch:o}},lt=()=>{const{settings:e,loading:t,error:s}=ot();return{companyInfo:e.company_info||st.company_info,loading:t,error:s}},ct=()=>{const{settings:e,loading:t,error:s}=ot();return{menuConfig:e.menu_config||st.menu_config,loading:t,error:s}},dt=()=>{const{settings:e,loading:t,error:s}=ot();return{categoriesConfig:e.categories_config||st.categories_config,loading:t,error:s}},ut=({activeView:e,setActiveView:s,currentUser:r,onLogout:a})=>{const{companyInfo:n}=lt(),i=r&&("Associe Emerite"===r.function||r.role&&"admin"===r.role.toLowerCase()),o=r&&"Gerant"===r.function,l=i||o,c=[{id:"dashboard",label:"Tableau de Bord",icon:h},{id:"tasks",label:"Tâches",icon:b},{id:"clients",label:"Clients",icon:g},{id:"cases",label:"Dossiers",icon:v},{id:"calendar",label:"Agenda",icon:w},{id:"documents",label:"Documents",icon:y},{id:"billing",label:"Facturation",icon:j},{id:"team",label:"Collaborateurs",icon:N},{id:"reports",label:"Statistiques",icon:_}].filter(e=>{return t=e.id,!!l||(r?.permissions?r.permissions[t]?.visible:["dashboard","tasks","calendar","documents"].includes(t));var t}),d={id:"settings",label:"Paramètres",icon:S};return t.jsxs(k.aside,{initial:{x:-250},animate:{x:0},className:"fixed left-0 top-0 h-screen w-64 bg-slate-800/90 backdrop-blur-sm border-r border-slate-700/50 z-50 flex flex-col print:hidden",children:[t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[n?.logo_url?t.jsx("div",{className:"bg-white/10 p-2 rounded-lg flex-shrink-0",children:t.jsx("img",{src:n.logo_url,alt:"Logo",className:"h-10 w-10 object-contain rounded-lg"})}):t.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex-shrink-0",children:t.jsx(C,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h1",{className:"text-base font-bold text-white truncate",children:n?.name||"Cabinet Juridique"}),t.jsx("p",{className:"text-xs text-slate-400 truncate",children:"LEGALSUITE"})]})]})}),t.jsx("nav",{className:"flex-grow overflow-y-auto px-6 space-y-2",children:c.map(r=>{const a=r.icon,n=e===r.id;return t.jsxs(et,{variant:n?"default":"ghost",className:"w-full justify-start gap-3 h-12 "+(n?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg":"text-slate-300 hover:text-white hover:bg-slate-700/50"),onClick:()=>s(r.id),children:[t.jsx(a,{className:"w-5 h-5"}),r.label]},r.id)})}),t.jsxs("div",{className:"mt-auto p-6",children:[t.jsxs("div",{className:"mb-4 p-3 bg-slate-700/50 rounded-lg",children:[t.jsx("p",{className:"text-white font-semibold truncate",children:r.name||r.email||"Utilisateur"}),t.jsx("p",{className:"text-sm text-slate-400 capitalize",children:r.function||r.role||"Collaborateur"})]}),i&&t.jsxs(et,{variant:e===d.id?"default":"ghost",className:"w-full justify-start gap-3 h-12 mb-2 "+(e===d.id?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg":"text-slate-300 hover:text-white hover:bg-slate-700/50"),onClick:()=>s(d.id),children:[t.jsx(d.icon,{className:"w-5 h-5"}),d.label]}),t.jsxs(et,{variant:"ghost",className:"w-full justify-start gap-3 h-12 text-red-400 hover:text-red-400 hover:bg-red-500/20",onClick:a,children:[t.jsx(I,{className:"w-5 h-5"}),"Déconnexion"]})]})]})},mt=({currentUser:e,setActiveView:r})=>{const[a,n]=s.useState({totalTasks:0,completedTasks:0,totalClients:0,activeCases:0,urgentTasks:0,todayDeadlines:0,revenue:0,previousClients:0,previousCases:0,previousRevenue:0,previousTasks:0}),[i,o]=s.useState({active:0,pending:0,closed:0,suspended:0}),[l,c]=s.useState([]),[d,u]=s.useState([]),[m,p]=s.useState([]),[f,x]=s.useState([]),[h,y]=s.useState([]),[j,_]=s.useState(""),C=e&&("Gerant"===e.function||"Associe Emerite"===e.function)||e.role&&"admin"===e.role.toLowerCase();s.useEffect(()=>{e&&(async()=>{let t=tt.from("tasks").select("*"),s=tt.from("clients").select("id",{count:"exact"}),r=tt.from("cases").select("*");C||(t=t.or(`assigned_to_id.eq.${e.id},assigned_to_ids.cs.{${e.id}},visible_by_ids.cs.{${e.id}}`),r=r.eq("assigned_to",e.id));const[{data:a,error:i},{count:l,error:d},{data:m,error:f},{data:h,error:b}]=await Promise.all([t,C?s:Promise.resolve({count:0,error:null}),r,tt.from("alerts").select("*").order("created_at",{ascending:!1}).limit(5)]);(i||d||f||b)&&Ke({variant:"destructive",title:"Erreur",description:"Impossible de charger les données du tableau de bord."}),y(h||[]);const g=a||[],v=m||[],w=new Date;w.setHours(0,0,0,0);const j=new Date,N=g.filter(e=>"urgent"===e.priority&&"completed"!==e.status),_=g.filter(e=>{if(!e.deadline)return!1;const t=new Date(e.deadline);return t.setHours(0,0,0,0),t.getTime()===w.getTime()}),k=g.filter(e=>e.deadline&&new Date(e.deadline)<j&&"completed"!==e.status);p(k);const S=v.filter(e=>"active"===e.status||"actif"===e.status).length,I=v.filter(e=>"pending"===e.status||"en-attente"===e.status).length,z=v.filter(e=>"closed"===e.status||"cloture"===e.status).length,E=v.filter(e=>"suspended"===e.status||"suspendu"===e.status).length;o({active:S,pending:I,closed:z,suspended:E}),n({totalTasks:g.length,completedTasks:g.filter(e=>"completed"===e.status).length,totalClients:l||0,activeCases:S,urgentTasks:N.length,todayDeadlines:_.length,revenue:0,previousClients:Math.floor(.89*(l||0)),previousCases:Math.floor(.95*S),previousRevenue:0,previousTasks:Math.floor(1.08*g.length)});const P=new Date;P.setDate(P.getDate()+7);const D=g.filter(e=>{if(!e.deadline||"completed"===e.status)return!1;const t=new Date(e.deadline);return t>=j&&t<=P}).sort((e,t)=>new Date(e.deadline)-new Date(t.deadline)).slice(0,3);c(D);const T=[...g].sort((e,t)=>new Date(t.created_at||t.updated_at)-new Date(e.created_at||e.updated_at)).slice(0,2).map(e=>({id:e.id,type:"task",title:e.title,subtitle:e.assigned_to_name||"Non assigné",time:e.created_at||e.updated_at,description:"completed"===e.status?"Tâche terminée":"Nouvelle tâche créée"}));if(C&&l>0){const{data:e}=await tt.from("clients").select("name, created_at").order("created_at",{ascending:!1}).limit(1);e&&e.length>0&&T.unshift({id:`client-${Date.now()}`,type:"client",title:"Nouveau client ajouté",subtitle:e[0].name,time:e[0].created_at,description:"Client ajouté au système"})}if(u(T.slice(0,3)),C){const{data:e}=await tt.from("profiles").select("*, role"),t=(e||[]).filter(e=>"admin"!==e.role),{data:s}=await tt.from("tasks").select("assigned_to_id, status, deadline"),r=t.map(e=>{const t=(s||[]).filter(t=>t.assigned_to_id===e.id),r=t.filter(e=>"completed"===e.status).length,a=t.filter(e=>e.deadline&&new Date(e.deadline)<j&&"completed"!==e.status).length;return{name:e.name,total:t.length,completed:r,overdue:a,completionRate:t.length>0?Math.round(r/t.length*100):0}});x(r)}})()},[e,C]);const S=(e,t)=>0===t?0:Math.round((e-t)/t*100),I=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"}):"N/A",L=e=>{if(!e)return"N/A";const t=new Date(e),s=new Date,r=Math.floor((s-t)/36e5);if(r<1)return"Il y a moins d'1 heure";if(r<24)return`Il y a ${r}h`;const a=Math.floor(r/24);return 1===a?"Hier":a<7?`Il y a ${a} jours`:I(e)},M=e=>{const t=new Date,s=new Date(e),r=Math.ceil((s-t)/864e5);return r<0?"text-red-400":0===r?"text-orange-400":r<=2?"text-yellow-400":"text-blue-400"};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Tableau de bord"}),t.jsx("p",{className:"text-slate-400",children:"Bon retour ! Voici un aperçu de votre cabinet."})]}),t.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[t.jsx(w,{className:"w-5 h-5"}),t.jsx("p",{className:"text-slate-300 font-medium",children:(new Date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[C&&t.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0},onClick:()=>r("clients"),className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6 hover:border-blue-500/50 transition-all duration-200 cursor-pointer",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm font-medium mb-2",children:"Total Clients"}),t.jsx("p",{className:"text-3xl font-bold text-white",children:a.totalClients})]}),t.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:t.jsx(g,{className:"w-6 h-6 text-blue-400"})})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.totalClients>=a.previousClients?t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"w-4 h-4 text-green-400"}),t.jsxs("span",{className:"text-green-400",children:["+",S(a.totalClients,a.previousClients),"%"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(E,{className:"w-4 h-4 text-red-400"}),t.jsxs("span",{className:"text-red-400",children:[S(a.totalClients,a.previousClients),"%"]})]}),t.jsx("span",{className:"text-slate-500",children:"vs last month"})]})]}),t.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},onClick:()=>r("cases"),className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6 hover:border-green-500/50 transition-all duration-200 cursor-pointer",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm font-medium mb-2",children:"Dossiers Actifs"}),t.jsx("p",{className:"text-3xl font-bold text-white",children:a.activeCases})]}),t.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg",children:t.jsx(N,{className:"w-6 h-6 text-green-400"})})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.activeCases>=a.previousCases?t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"w-4 h-4 text-green-400"}),t.jsxs("span",{className:"text-green-400",children:["+",S(a.activeCases,a.previousCases),"%"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(E,{className:"w-4 h-4 text-red-400"}),t.jsxs("span",{className:"text-red-400",children:[S(a.activeCases,a.previousCases),"%"]})]}),t.jsx("span",{className:"text-slate-500",children:"vs last month"})]})]}),C&&t.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},onClick:()=>r("billing"),className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6 hover:border-yellow-500/50 transition-all duration-200 cursor-pointer",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm font-medium mb-2",children:"Revenu (Mois)"}),t.jsx("p",{className:"text-3xl font-bold text-white",children:(R=a.revenue,new Intl.NumberFormat("fr-FR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(R)+" F CFA")})]}),t.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-lg",children:t.jsx(P,{className:"w-6 h-6 text-yellow-400"})})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.revenue>=a.previousRevenue?t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"w-4 h-4 text-green-400"}),t.jsxs("span",{className:"text-green-400",children:["+",S(a.revenue,a.previousRevenue),"%"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(E,{className:"w-4 h-4 text-red-400"}),t.jsxs("span",{className:"text-red-400",children:[S(a.revenue,a.previousRevenue),"%"]})]}),t.jsx("span",{className:"text-slate-500",children:"vs last month"})]})]}),t.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},onClick:()=>r("tasks"),className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6 hover:border-red-500/50 transition-all duration-200 cursor-pointer",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm font-medium mb-2",children:"Tâches en Attente"}),t.jsx("p",{className:"text-3xl font-bold text-white",children:a.totalTasks-a.completedTasks})]}),t.jsx("div",{className:"p-3 bg-red-500/10 rounded-lg",children:t.jsx(D,{className:"w-6 h-6 text-red-400"})})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.totalTasks<=a.previousTasks?t.jsxs(t.Fragment,{children:[t.jsx(E,{className:"w-4 h-4 text-green-400"}),t.jsxs("span",{className:"text-green-400",children:[S(a.totalTasks,a.previousTasks),"%"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"w-4 h-4 text-red-400"}),t.jsxs("span",{className:"text-red-400",children:["+",S(a.totalTasks,a.previousTasks),"%"]})]}),t.jsx("span",{className:"text-slate-500",children:"vs last month"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs(k.div,{initial:{opacity:0,x:-20},animate:{opacity:1,y:0},transition:{delay:.4},className:"lg:col-span-2 bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Aperçu du statut des dossiers"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:t.jsx(N,{className:"w-4 h-4 text-blue-400"})}),t.jsx("span",{className:"text-slate-300 font-medium",children:"Actif"})]}),t.jsx("span",{className:"text-white font-bold text-xl",children:i.active})]}),t.jsx("div",{className:"w-full bg-slate-700/50 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:i.active/(i.active+i.pending+i.closed+i.suspended||1)*100+"%"}})}),t.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[(i.active/(i.active+i.pending+i.closed+i.suspended||1)*100).toFixed(1),"% du total"]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-lg",children:t.jsx(D,{className:"w-4 h-4 text-yellow-400"})}),t.jsx("span",{className:"text-slate-300 font-medium",children:"En attente"})]}),t.jsx("span",{className:"text-white font-bold text-xl",children:i.pending})]}),t.jsx("div",{className:"w-full bg-slate-700/50 rounded-full h-2",children:t.jsx("div",{className:"bg-yellow-500 h-2 rounded-full transition-all duration-500",style:{width:i.pending/(i.active+i.pending+i.closed+i.suspended||1)*100+"%"}})}),t.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[(i.pending/(i.active+i.pending+i.closed+i.suspended||1)*100).toFixed(1),"% du total"]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:t.jsx(b,{className:"w-4 h-4 text-green-400"})}),t.jsx("span",{className:"text-slate-300 font-medium",children:"Clôturé"})]}),t.jsx("span",{className:"text-white font-bold text-xl",children:i.closed})]}),t.jsx("div",{className:"w-full bg-slate-700/50 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:i.closed/(i.active+i.pending+i.closed+i.suspended||1)*100+"%"}})}),t.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[(i.closed/(i.active+i.pending+i.closed+i.suspended||1)*100).toFixed(1),"% du total"]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-2 bg-red-500/10 rounded-lg",children:t.jsx(T,{className:"w-4 h-4 text-red-400"})}),t.jsx("span",{className:"text-slate-300 font-medium",children:"En suspens"})]}),t.jsx("span",{className:"text-white font-bold text-xl",children:i.suspended})]}),t.jsx("div",{className:"w-full bg-slate-700/50 rounded-full h-2",children:t.jsx("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-500",style:{width:i.suspended/(i.active+i.pending+i.closed+i.suspended||1)*100+"%"}})}),t.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[(i.suspended/(i.active+i.pending+i.closed+i.suspended||1)*100).toFixed(1),"% du total"]})]})]})]}),t.jsxs(k.div,{initial:{opacity:0,x:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-white",children:"Échéances à venir"}),t.jsx("div",{className:"p-2 bg-slate-700/50 rounded-lg",children:t.jsx(T,{className:"w-5 h-5 text-slate-400"})})]}),t.jsx("div",{className:"space-y-4",children:l.length>0?l.map(e=>t.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-slate-600/50 hover:border-slate-500/50 transition-colors cursor-pointer",onClick:()=>r("tasks"),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg "+(e.title.includes("tribunal")||e.title.includes("Audience")?"bg-red-500/10":e.title.includes("document")||e.title.includes("Soumission")?"bg-yellow-500/10":"bg-green-500/10"),children:e.title.includes("tribunal")||e.title.includes("Audience")?t.jsx(T,{className:"w-4 h-4 text-red-400"}):e.title.includes("document")||e.title.includes("Soumission")?t.jsx(v,{className:"w-4 h-4 text-yellow-400"}):t.jsx(g,{className:"w-4 h-4 text-green-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-white font-medium text-sm mb-1 truncate",children:e.title}),t.jsx("p",{className:"text-slate-400 text-xs mb-2",children:e.assigned_to_name||"Non assigné"}),t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsx(w,{className:"w-3 h-3 text-slate-500"}),t.jsx("span",{className:M(e.deadline),children:I(e.deadline)}),t.jsx(D,{className:"w-3 h-3 text-slate-500 ml-2"}),t.jsx("span",{className:"text-slate-400",children:new Date(e.deadline).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]})]})},e.id)):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(b,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t.jsx("p",{className:"text-slate-400 text-sm",children:"Aucune échéance prévue dans les 7 prochains jours"})]})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Activités récentes"}),t.jsx("div",{className:"space-y-4",children:d.length>0?d.map((e,s)=>t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"p-2 rounded-lg flex-shrink-0 "+("task"===e.type?"bg-blue-500/10":"client"===e.type?"bg-green-500/10":"bg-purple-500/10"),children:"task"===e.type?t.jsx(N,{className:"w-5 h-5 text-blue-400"}):"client"===e.type?t.jsx(g,{className:"w-5 h-5 text-green-400"}):t.jsx(v,{className:"w-5 h-5 text-purple-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-white font-medium text-sm mb-1",children:e.title}),t.jsx("p",{className:"text-slate-400 text-xs mb-1",children:e.subtitle}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[t.jsx(D,{className:"w-3 h-3"}),t.jsx("span",{children:L(e.time)})]})]})]},e.id)):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(v,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),t.jsx("p",{className:"text-slate-400 text-sm",children:"Aucune activité récente"})]})})]}),t.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Actions rapides"}),t.jsxs("div",{className:"space-y-3",children:[C&&t.jsxs(t.Fragment,{children:[t.jsxs(et,{onClick:()=>r("clients"),className:"w-full justify-start gap-3 bg-slate-700/50 hover:bg-slate-700 border border-slate-600/50 text-white h-auto py-4",children:[t.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:t.jsx(A,{className:"w-5 h-5 text-blue-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-medium",children:"Ajouter un nouveau client"}),t.jsx("p",{className:"text-xs text-slate-400",children:"Enregistrer un nouveau profil client"})]})]}),t.jsxs(et,{onClick:()=>r("cases"),className:"w-full justify-start gap-3 bg-slate-700/50 hover:bg-slate-700 border border-slate-600/50 text-white h-auto py-4",children:[t.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:t.jsx(F,{className:"w-5 h-5 text-green-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-medium",children:"Créer un nouveau dossier"}),t.jsx("p",{className:"text-xs text-slate-400",children:"Ouvrir un nouveau dossier"})]})]})]}),t.jsxs(et,{onClick:()=>r("tasks"),className:"w-full justify-start gap-3 bg-slate-700/50 hover:bg-slate-700 border border-slate-600/50 text-white h-auto py-4",children:[t.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:t.jsx($,{className:"w-5 h-5 text-purple-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-medium",children:"Créer une nouvelle tâche"}),t.jsx("p",{className:"text-xs text-slate-400",children:"Ajouter une tâche au système"})]})]}),t.jsxs(et,{onClick:()=>r("calendar"),className:"w-full justify-start gap-3 bg-slate-700/50 hover:bg-slate-700 border border-slate-600/50 text-white h-auto py-4",children:[t.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-lg",children:t.jsx(w,{className:"w-5 h-5 text-yellow-400"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"font-medium",children:"Voir le calendrier"}),t.jsx("p",{className:"text-xs text-slate-400",children:"Consulter toutes les échéances"})]})]})]})]})]}),C&&f.length>0&&t.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Performance de l'Équipe"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-slate-700",children:[t.jsx("th",{className:"p-3 text-slate-400 font-medium",children:"Collaborateur"}),t.jsx("th",{className:"p-3 text-slate-400 font-medium text-center",children:"Tâches Assignées"}),t.jsx("th",{className:"p-3 text-slate-400 font-medium text-center",children:"Tâches Terminées"}),t.jsx("th",{className:"p-3 text-slate-400 font-medium text-center",children:"En Retard"}),t.jsx("th",{className:"p-3 text-slate-400 font-medium text-center",children:"Taux de Complétion"})]})}),t.jsx("tbody",{children:f.map(e=>t.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-700/30",children:[t.jsx("td",{className:"p-3 text-white font-medium",children:e.name}),t.jsx("td",{className:"p-3 text-white text-center",children:e.total}),t.jsx("td",{className:"p-3 text-green-400 text-center",children:e.completed}),t.jsx("td",{className:"p-3 text-red-400 text-center",children:e.overdue}),t.jsx("td",{className:"p-3 text-white text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsxs("span",{children:[e.completionRate,"%"]}),t.jsx("div",{className:"w-24 bg-slate-600 rounded-full h-2.5",children:t.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${e.completionRate}%`}})})]})})]},e.name))})]})})]})]});var R};mt.propTypes={currentUser:r.shape({id:r.string,name:r.string,email:r.string,role:r.string,function:r.string}),setActiveView:r.func.isRequired};const pt=s.createContext(void 0),ft="internal_session_token",xt=({children:e})=>{const{toast:r}=Ye(),[a,n]=s.useState(null),[i,o]=s.useState(null),[l,c]=s.useState(!0),[d,u]=s.useState(!1),m=s.useCallback(async e=>{try{const{data:t,error:s}=await tt.from("user_permissions").select("permissions").eq("user_id",e).maybeSingle();return t?.permissions||null}catch(t){return null}},[]),p=s.useCallback(async()=>{const e=localStorage.getItem(ft);if(e)try{const{data:t,error:s}=await tt.rpc("verify_internal_session",{session_token_param:e});if(s||!t?.success)return localStorage.removeItem(ft),n(null),o(null),void c(!1);const r=t.user,a=await m(r.id);n({...r,permissions:a}),o({token:e}),u(r.must_change_password),c(!1)}catch(t){localStorage.removeItem(ft),c(!1)}else c(!1)},[m]);s.useEffect(()=>{p()},[p]);const f=s.useCallback(async(e,t)=>{try{const{data:s,error:a}=await tt.rpc("internal_login",{user_identifier:e,user_password:t,user_agent_text:navigator.userAgent,ip_addr:null});if(a||!s?.success){return r({variant:"destructive",title:"Connexion impossible",description:{invalid_credentials:"Identifiant ou mot de passe incorrect",pending_approval:"Votre compte est en attente de validation",technical_error:s?.message||"Erreur technique"}[s?.error]||s?.message||"Erreur de connexion"}),{error:s?.error||a,mustChangePassword:!1}}const{session_token:i,user:l}=s;localStorage.setItem(ft,i);const c=await m(l.id);return n({...l,permissions:c}),o({token:i}),u(l.must_change_password),l.must_change_password?r({title:"⚠️ Changement de mot de passe requis",description:"Vous devez définir votre mot de passe personnel lors de cette première connexion.",duration:6e3}):r({title:"👋 Bienvenue !",description:`Bonjour ${l.name||l.email}`}),{error:null,mustChangePassword:l.must_change_password,userId:l.id}}catch(s){return r({variant:"destructive",title:"Erreur",description:"Une erreur inattendue s'est produite"}),{error:s,mustChangePassword:!1}}},[r,m]),x=s.useCallback(async()=>{try{const e=localStorage.getItem(ft);return e&&await tt.rpc("internal_logout",{session_token_param:e}),localStorage.removeItem(ft),n(null),o(null),u(!1),r({title:"Déconnexion réussie",description:"À bientôt !"}),{error:null}}catch(e){return localStorage.removeItem(ft),n(null),o(null),{error:e}}},[r]),h=s.useCallback(async(e,t,s,a)=>{try{const{data:n,error:i}=await tt.rpc("internal_set_personal_credentials",{user_email:e,new_password:t,secret_question:s,secret_answer:a});if(i||!n?.success){return r({variant:"destructive",title:"Erreur",description:{password_reused:"Ce mot de passe a déjà été utilisé. Veuillez en choisir un nouveau.",user_not_found:"Utilisateur introuvable"}[n?.error]||n?.message||"Impossible de définir les identifiants"}),{error:n?.error||i}}const{error:o}=await f(e,t);return o?(r({variant:"destructive",title:"Erreur",description:"Identifiants définis mais connexion échouée. Veuillez vous reconnecter."}),{error:o}):(r({title:"✅ Identifiants définis !",description:"Bienvenue dans votre espace de travail."}),{error:null})}catch(n){return r({variant:"destructive",title:"Erreur",description:"Une erreur inattendue est survenue."}),{error:n}}},[r,f]),b=s.useCallback(async e=>{try{const{data:t,error:s}=await tt.rpc("get_secret_question",{user_identifier:e});if(s||!t?.success){return r({variant:"destructive",title:"Erreur",description:{user_not_found:"Aucun utilisateur trouvé avec cet identifiant",no_secret_phrase:"Aucune phrase secrète n'a été configurée pour ce compte"}[t?.error]||"Impossible de récupérer la question secrète"}),{error:t?.error||s,question:null}}return{error:null,question:t.question,userId:t.user_id}}catch(t){return r({variant:"destructive",title:"Erreur",description:"Une erreur inattendue est survenue."}),{error:t,question:null}}},[r]),g=s.useCallback(async(e,t,s)=>{try{const{data:a,error:n}=await tt.rpc("verify_secret_answer_and_reset",{user_identifier:e,secret_answer:t,new_password:s});if(n||!a?.success){return r({variant:"destructive",title:"Erreur",description:{user_not_found:"Utilisateur introuvable",no_secret_phrase:"Aucune phrase secrète n'a été configurée",wrong_answer:"La réponse est incorrecte",password_reused:"Ce mot de passe a déjà été utilisé"}[a?.error]||a?.message||"Impossible de réinitialiser le mot de passe"}),{error:a?.error||n}}return r({title:"✅ Mot de passe réinitialisé !",description:"Vous pouvez maintenant vous connecter avec votre nouveau mot de passe."}),{error:null}}catch(a){return r({variant:"destructive",title:"Erreur",description:"Une erreur inattendue est survenue."}),{error:a}}},[r]),v=s.useMemo(()=>({user:a,session:i,loading:l,mustChangePassword:d,signIn:f,signOut:x,setPersonalCredentials:h,getSecretQuestion:b,resetPasswordWithSecretPhrase:g}),[a,i,l,d,f,x,h,b,g]);return t.jsx(pt.Provider,{value:v,children:e})};xt.propTypes={children:r.node.isRequired};const ht=()=>{const e=s.useContext(pt);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},bt=()=>{const{user:e,setPersonalCredentials:r,signOut:a}=ht(),[n,i]=s.useState(1),[o,l]=s.useState(""),[c,d]=s.useState(""),[u,m]=s.useState(""),[p,f]=s.useState(""),[x,h]=s.useState(!1),{toast:b}=Ye(),{companyInfo:g}=lt(),v=(e=>{const t=[];return e.length<12&&t.push("Minimum 12 caractères"),/[A-Z]/.test(e)||t.push("Au moins 1 majuscule"),/[a-z]/.test(e)||t.push("Au moins 1 minuscule"),/[0-9]/.test(e)||t.push("Au moins 1 chiffre"),/[!@#$%^&*(),.?":{}|<>]/.test(e)||t.push("Au moins 1 caractère spécial"),t})(o),w=0===v.length&&o===c;return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4",children:t.jsxs(k.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,type:"spring"},className:"w-full max-w-lg bg-slate-800/50 backdrop-blur-lg border border-slate-700/50 rounded-2xl p-8 shadow-2xl",children:[t.jsxs("div",{className:"flex flex-col items-center mb-8",children:[g?.logo_url?t.jsx("div",{className:"mb-4 bg-white/10 p-3 rounded-lg",children:t.jsx("img",{src:g.logo_url,alt:"Logo",className:"h-16 object-contain rounded-lg"})}):t.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-teal-600 rounded-lg mb-4",children:t.jsx(C,{className:"w-8 h-8 text-white"})}),t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Première connexion"}),t.jsx("p",{className:"text-slate-400 text-center mt-2",children:1===n?"Définissez votre mot de passe personnel":"Configurez votre phrase secrète de récupération"})]}),t.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[t.jsxs("div",{className:"flex items-center gap-2 "+(n>=1?"text-green-400":"text-slate-500"),children:[n>1?t.jsx(L,{className:"w-5 h-5"}):t.jsx("div",{className:"w-5 h-5 border-2 border-current rounded-full flex items-center justify-center text-xs",children:"1"}),t.jsx("span",{className:"text-sm font-medium",children:"Mot de passe"})]}),t.jsx("div",{className:"w-12 h-0.5 bg-slate-600"}),t.jsxs("div",{className:"flex items-center gap-2 "+(n>=2?"text-blue-400":"text-slate-500"),children:[t.jsx("div",{className:"w-5 h-5 border-2 border-current rounded-full flex items-center justify-center text-xs",children:"2"}),t.jsx("span",{className:"text-sm font-medium",children:"Phrase secrète"})]})]}),1===n&&t.jsxs("form",{onSubmit:e=>{e.preventDefault(),w?i(2):b({variant:"destructive",title:"❌ Mot de passe invalide",description:v.length>0?v.join(", "):"Les mots de passe ne correspondent pas"})},className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Nouveau mot de passe"}),t.jsxs("div",{className:"relative",children:[t.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),t.jsx("input",{id:"new-password",type:"password",value:o,onChange:e=>l(e.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Créez un mot de passe sécurisé"})]}),o&&t.jsx("div",{className:"mt-3 space-y-1",children:["Minimum 12 caractères","Au moins 1 majuscule","Au moins 1 minuscule","Au moins 1 chiffre","Au moins 1 caractère spécial"].map((e,s)=>{const r=-1===v.indexOf(e);return t.jsxs("div",{className:"flex items-center gap-2 text-xs "+(r?"text-green-400":"text-slate-500"),children:[r?t.jsx(L,{className:"w-3 h-3"}):t.jsx(R,{className:"w-3 h-3"}),t.jsx("span",{children:e})]},s)})})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Confirmer le mot de passe"}),t.jsxs("div",{className:"relative",children:[t.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),t.jsx("input",{id:"confirm-password",type:"password",value:c,onChange:e=>d(e.target.value),required:!0,className:"w-full pl-12 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Confirmez votre mot de passe"})]}),c&&o!==c&&t.jsx("p",{className:"mt-2 text-xs text-red-400",children:"Les mots de passe ne correspondent pas"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(et,{type:"button",onClick:a,className:"flex-1 h-12 bg-slate-600 hover:bg-slate-700 text-white",children:"Annuler"}),t.jsx(et,{type:"submit",disabled:!w,className:"flex-1 h-12 text-lg bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continuer"})]})]}),2===n&&t.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),u.trim()&&p.trim())if(p.trim().length<3)b({variant:"destructive",title:"❌ Réponse trop courte",description:"La réponse doit contenir au moins 3 caractères"});else{h(!0);try{const{error:t}=await r(e.email,o,u.trim(),p.trim());if(t)return void h(!1)}catch(s){b({variant:"destructive",title:"❌ Erreur",description:"Une erreur inattendue s'est produite"}),h(!1)}}else b({variant:"destructive",title:"❌ Phrase secrète incomplète",description:"Veuillez remplir la question et la réponse"})},className:"space-y-6",children:[t.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 mb-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(V,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"text-sm text-blue-200",children:[t.jsx("p",{className:"font-semibold mb-1",children:"Pourquoi une phrase secrète ?"}),t.jsx("p",{className:"text-blue-300",children:"Elle vous permettra de réinitialiser votre mot de passe si vous l'oubliez, sans avoir besoin d'un email."})]})]})}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"secret-question",className:"block text-sm font-medium text-slate-300 mb-2",children:"Question secrète"}),t.jsx("input",{id:"secret-question",type:"text",value:u,onChange:e=>m(e.target.value),required:!0,maxLength:200,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Quel est le nom de votre premier animal ?"}),t.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Choisissez une question dont vous vous souviendrez"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"secret-answer",className:"block text-sm font-medium text-slate-300 mb-2",children:"Réponse secrète"}),t.jsx("input",{id:"secret-answer",type:"text",value:p,onChange:e=>f(e.target.value),required:!0,maxLength:100,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Votre réponse (minimum 3 caractères)"}),t.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"La réponse n'est pas sensible à la casse"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(et,{type:"button",onClick:()=>i(1),disabled:x,className:"flex-1 h-12 bg-slate-600 hover:bg-slate-700 text-white",children:"Retour"}),t.jsx(et,{type:"submit",disabled:x||!u.trim()||!p.trim(),className:"flex-1 h-12 text-lg bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"En cours...":"Valider"})]})]}),t.jsx("div",{className:"mt-6 text-center text-xs text-slate-600",children:"🔒 Vos informations sont chiffrées et sécurisées"})]})})},gt=Object.freeze(Object.defineProperty({__proto__:null,default:bt},Symbol.toStringTag,{value:"Module"})),vt=({onBack:e})=>{const[r,a]=s.useState(1),[n,i]=s.useState(""),[o,l]=s.useState(""),[c,d]=s.useState(""),[u,m]=s.useState(""),[p,f]=s.useState(""),[x,h]=s.useState(!1),{toast:b}=Ye(),{getSecretQuestion:g,resetPasswordWithSecretPhrase:v}=ht(),{companyInfo:w}=lt();return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4",children:t.jsxs(k.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,type:"spring"},className:"w-full max-w-md bg-slate-800/50 backdrop-blur-lg border border-slate-700/50 rounded-2xl p-8 shadow-2xl",children:[t.jsxs("div",{className:"flex flex-col items-center mb-8",children:[w?.logo_url?t.jsx("div",{className:"mb-4 bg-white/10 p-3 rounded-lg",children:t.jsx("img",{src:w.logo_url,alt:"Logo",className:"h-16 object-contain rounded-lg"})}):t.jsx("div",{className:"p-3 bg-gradient-to-r from-orange-500 to-red-600 rounded-lg mb-4",children:t.jsx(C,{className:"w-8 h-8 text-white"})}),t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Mot de passe oublié"}),t.jsx("p",{className:"text-slate-400 text-center mt-2",children:1===r?"Saisissez votre identifiant pour commencer":"Répondez à votre question secrète"})]}),1===r&&t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!n.trim())return void b({variant:"destructive",title:"Champ requis",description:"Veuillez saisir votre identifiant"});h(!0);const{error:t,question:s}=await g(n.trim());h(!1),t||(l(s),a(2))},className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"identifier",className:"block text-sm font-medium text-slate-300 mb-2",children:"Identifiant"}),t.jsxs("div",{className:"relative",children:[t.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),t.jsx("input",{id:"identifier",type:"text",value:n,onChange:e=>i(e.target.value),required:!0,disabled:x,className:"w-full pl-12 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Email ou matricule"})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(et,{type:"button",onClick:e,disabled:x,className:"flex-1 h-12 bg-slate-600 hover:bg-slate-700 text-white",children:[t.jsx(U,{className:"w-4 h-4 mr-2"}),"Retour"]}),t.jsx(et,{type:"submit",disabled:x||!n.trim(),className:"flex-1 h-12 text-lg bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Vérification...":"Continuer"})]})]}),2===r&&t.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!c.trim())return void b({variant:"destructive",title:"Réponse requise",description:"Veuillez saisir votre réponse"});if(u.length<12)return void b({variant:"destructive",title:"Mot de passe trop court",description:"Le mot de passe doit contenir au moins 12 caractères"});if(u!==p)return void b({variant:"destructive",title:"Mots de passe différents",description:"Les mots de passe ne correspondent pas"});h(!0);const{error:s}=await v(n,c.trim(),u);h(!1),s||(b({title:"✅ Mot de passe réinitialisé",description:"Vous pouvez maintenant vous connecter avec votre nouveau mot de passe"}),setTimeout(()=>{e()},1500))},className:"space-y-6",children:[t.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(V,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-blue-200 mb-1",children:"Votre question secrète :"}),t.jsx("p",{className:"text-white",children:o})]})]})}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"secret-answer",className:"block text-sm font-medium text-slate-300 mb-2",children:"Réponse secrète"}),t.jsx("input",{id:"secret-answer",type:"text",value:c,onChange:e=>d(e.target.value),required:!0,disabled:x,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Votre réponse"}),t.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"La réponse n'est pas sensible à la casse"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Nouveau mot de passe"}),t.jsxs("div",{className:"relative",children:[t.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),t.jsx("input",{id:"new-password",type:"password",value:u,onChange:e=>m(e.target.value),required:!0,minLength:12,disabled:x,className:"w-full pl-12 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Minimum 12 caractères"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Confirmer le mot de passe"}),t.jsxs("div",{className:"relative",children:[t.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),t.jsx("input",{id:"confirm-password",type:"password",value:p,onChange:e=>f(e.target.value),required:!0,disabled:x,className:"w-full pl-12 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Confirmez votre mot de passe"})]}),p&&u!==p&&t.jsx("p",{className:"mt-2 text-xs text-red-400",children:"Les mots de passe ne correspondent pas"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(et,{type:"button",onClick:()=>{a(1),l(""),d(""),m(""),f("")},disabled:x,className:"flex-1 h-12 bg-slate-600 hover:bg-slate-700 text-white",children:"Retour"}),t.jsx(et,{type:"submit",disabled:x||!c.trim()||!u||u!==p,className:"flex-1 h-12 text-lg bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"En cours...":"Réinitialiser"})]})]}),t.jsx("div",{className:"mt-6 text-center text-xs text-slate-600",children:"🔒 Récupération sécurisée sans email"})]})})};vt.propTypes={onBack:r.func.isRequired};const wt=()=>{const[e,r]=s.useState(""),[a,n]=s.useState(""),[i,o]=s.useState(!1),[l,c]=s.useState(!1),[d,u]=s.useState(!1),{toast:m}=Ye(),{signIn:p}=ht(),{companyInfo:f}=lt(),x=()=>{c(!1),u(!1),n("")};return l?t.jsx(bt,{identifier:e,onBack:x}):d?t.jsx(vt,{onBack:x}):t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 p-4",children:t.jsxs(k.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,type:"spring"},className:"w-full max-w-md bg-slate-800/50 backdrop-blur-lg border border-slate-700/50 rounded-2xl p-8 shadow-2xl",children:[t.jsxs("div",{className:"flex flex-col items-center mb-8",children:[f?.logo_url?t.jsx("div",{className:"mb-4 bg-white/10 p-3 rounded-lg",children:t.jsx("img",{src:f.logo_url,alt:"Logo",className:"h-16 object-contain rounded-lg"})}):t.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg mb-4",children:t.jsx(C,{className:"w-8 h-8 text-white"})}),t.jsx("h1",{className:"text-3xl font-bold text-white",children:f?.name||"LEGALSUITE"}),t.jsx("p",{className:"text-slate-400",children:"Connectez-vous à votre espace"})]}),t.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e&&a){o(!0);try{const{error:t,mustChangePassword:s}=await p(e,a);if(!t&&s)return c(!0),void o(!1)}catch(s){m({variant:"destructive",title:"Erreur",description:"Une erreur inattendue s'est produite"})}finally{o(!1)}}else m({variant:"destructive",title:"Champs requis",description:"Veuillez remplir tous les champs"})},className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"identifier",className:"block text-sm font-medium text-slate-300 mb-2",children:"Identifiant"}),t.jsxs("div",{className:"relative",children:[t.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),t.jsx("input",{id:"identifier",type:"text",value:e,onChange:e=>r(e.target.value),required:!0,disabled:i,className:"w-full pl-12 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Email ou matricule"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Mot de passe"}),t.jsxs("div",{className:"relative",children:[t.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),t.jsx("input",{id:"password",type:"password",value:a,onChange:e=>n(e.target.value),required:!0,disabled:i,className:"w-full pl-12 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"••••••••"})]})]}),t.jsx(et,{type:"submit",disabled:i,className:"w-full h-12 text-lg bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Connexion en cours...":"Connexion"}),t.jsx("div",{className:"text-center",children:t.jsxs("button",{type:"button",onClick:()=>u(!0),disabled:i,className:"inline-flex items-center gap-2 text-sm text-slate-400 hover:text-blue-400 transition-colors",children:[t.jsx(V,{className:"w-4 h-4"}),"Mot de passe oublié ?"]})})]}),t.jsx("div",{className:"mt-6 text-center text-xs text-slate-600",children:"🔒 Connexion sécurisée"})]})})},yt=({isOpen:e,remainingSeconds:s,onExtend:r,onLogout:a})=>{if(!e)return null;return t.jsx(B,{children:e&&t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[t.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),t.jsxs(k.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative bg-slate-800 border border-slate-700 rounded-xl p-8 w-full max-w-md shadow-2xl",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"p-4 bg-yellow-500/20 rounded-full border-2 border-yellow-500/50",children:t.jsx(T,{className:"w-12 h-12 text-yellow-400"})})}),t.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-3",children:"Session expirée bientôt"}),t.jsx("p",{className:"text-slate-400 text-center mb-6",children:"Votre session sera automatiquement fermée dans :"}),t.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8",children:[t.jsx(D,{className:"w-6 h-6 text-blue-400"}),t.jsx("div",{className:"text-4xl font-bold "+(s<=10?"text-red-400 animate-pulse":"text-white"),children:(n=s,`${Math.floor(n/60)}:${(n%60).toString().padStart(2,"0")}`)})]}),t.jsx("p",{className:"text-sm text-slate-500 text-center mb-6",children:"Vous avez été inactif pendant un certain temps. Pour des raisons de sécurité, votre session sera fermée automatiquement."}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(et,{onClick:r,className:"flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 h-12",children:[t.jsx(D,{className:"w-4 h-4 mr-2"}),"Rester connecté"]}),t.jsxs(et,{onClick:a,variant:"outline",className:"flex-1 border-slate-600 text-slate-300 hover:bg-slate-700 h-12",children:[t.jsx(I,{className:"w-4 h-4 mr-2"}),"Se déconnecter"]})]}),t.jsx("p",{className:"text-xs text-slate-600 text-center mt-4",children:"🔒 Cette mesure protège vos données en cas d'oubli de déconnexion"})]})]})});var n},jt=()=>{const[e,r]=s.useState(!0),[a,n]=s.useState(!0),[i,o]=s.useState(!1);s.useEffect(()=>{if("true"===sessionStorage.getItem("pdf-service-alert-dismissed"))return o(!0),void n(!1);l();const e=setInterval(l,3e4);return()=>clearInterval(e)},[]);const l=async()=>{try{return r(!0),void n(!1)}catch(e){r(!0)}finally{n(!1)}};return a||e||i?null:t.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-amber-500/95 backdrop-blur-sm border-b border-amber-600 shadow-lg",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(T,{className:"w-5 h-5 text-amber-900 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-amber-900",children:"Service de normalisation PDF non démarré"}),t.jsx("p",{className:"text-xs text-amber-800 mt-1",children:'Les PDF uploadés ne seront pas optimisés pour l\'affichage. Des erreurs "TT undefined" peuvent apparaître lors de la visualisation.'}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[t.jsxs("button",{onClick:()=>{window.open("/QUICK_START_PDF.md","_blank")},className:"inline-flex items-center gap-1.5 text-xs font-medium text-amber-900 hover:text-amber-950 transition-colors",children:[t.jsx(G,{className:"w-3.5 h-3.5"}),"Voir la documentation"]}),t.jsx("code",{className:"text-xs bg-amber-600/30 text-amber-950 px-2 py-1 rounded font-mono",children:"./start-with-pdf-service.sh"})]})]}),t.jsx("button",{onClick:()=>{o(!0),sessionStorage.setItem("pdf-service-alert-dismissed","true")},className:"p-1 text-amber-900 hover:text-amber-950 hover:bg-amber-600/30 rounded transition-colors flex-shrink-0",title:"Masquer pour cette session",children:t.jsx(u,{className:"w-4 h-4"})})]})})})};async function Nt(e=[],t="attachments"){if(!Array.isArray(e)||0===e.length)return[];return await Promise.all(e.map(async e=>{try{return e.file_url&&e.file_url.startsWith("http")?{...e,valid_url:e.file_url,is_accessible:!0}:{...e,valid_url:null,is_accessible:!1}}catch(t){return{...e,valid_url:null,is_accessible:!1}}}))}async function _t(e,t={}){const s=e.includes(".supabase.co"),r={...t.headers||{}};if(s){const e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZodXprdWJueHVldGFrcHhrd2xyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxMTE4MTEsImV4cCI6MjA3NDY4NzgxMX0.6_fLQrCtBdYAKNXgT2fAo6vHVfhe3DmISq7F-egfyUY";r.apikey||(r.apikey=e,r.Authorization=`Bearer ${e}`)}const a={...t,headers:r,mode:"cors"};return fetch(e,a)}async function kt(e){if(!e||!e.startsWith("http"))return!1;try{return(await _t(e,{method:"HEAD"})).ok}catch{return!1}}async function Ct(e){const t=await _t(e);if(!t.ok)throw new Error(`Échec du téléchargement: ${t.status} ${t.statusText}`);return t.blob()}const St=Object.freeze(Object.defineProperty({__proto__:null,downloadFileWithCors:Ct,fetchWithCors:_t,validateUrlWithCors:kt},Symbol.toStringTag,{value:"Module"}));async function It(e,t){try{const{data:s,error:r}=await tt.from("tasks_files").select("*").eq("task_id",e).order("created_at",{ascending:!1});if(r){const e=zt(t);return await Nt(e)}if(s&&s.length>0){return await Promise.all(s.map(async e=>{const t=await async function(e){return kt(e)}(e.file_url);return{...e,is_accessible:t,valid_url:t?e.file_url:null,source:"tasks_files"}}))}const a=zt(t);return await Nt(a)}catch(s){const e=zt(t);return await Nt(e)}}function zt(e){if(!e)return[];return(Array.isArray(e)?e:function(e){try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return e?[e]:[]}}(e)).map((e,t)=>({id:`att-${t}`,file_name:e.split("/").pop()||`fichier-${t+1}`,file_url:e,file_size:null,file_type:null,created_at:null,source:"attachments"}))}function Et(e){if(!e||!e.name)return!1;const t=e.name.trim().replace(/[\)\]\}]+\s*$/g,""),s=t.lastIndexOf(".");let r="";if(s>0){r=t.substring(s+1).replace(/[^a-z0-9]/gi,"").toLowerCase()}const a=["doc","docx"];if(!a.includes(r))return!1;return["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(e.type)||a.includes(r)}async function Pt(e){try{if(!Et(e))throw new Error("Le fichier n'est pas un document Word");const t=await async function(e){try{const t=new FormData;t.append("file",e);const s="https://www.ges-cab.com/pdf",r=await fetch(`${s}/convert-word-to-pdf`,{method:"POST",body:t,headers:{Accept:"application/pdf"}});if(!r.ok)return null;const a=await r.blob();if(a.size<100)return null;const n=e.name.replace(/\.(doc|docx)$/i,".pdf");return new File([a],n,{type:"application/pdf"})}catch(t){return null}}(e);if(t)return t;const s=await async function(e){try{const[t,{jsPDF:s}]=await Promise.all([Dt(),Tt()]);if(!t||!s)return null;const r=await e.arrayBuffer(),a=(await t.extractRawText({arrayBuffer:r})).value;if(!a||0===a.trim().length)return null;const n=new s({orientation:"portrait",unit:"mm",format:"a4"}),i=n.splitTextToSize(a,180);let o=20;const l=7,c=280;i.forEach(e=>{o>c&&(n.addPage(),o=20),n.text(e,15,o),o+=l});const d=n.output("blob"),u=e.name.replace(/\.(doc|docx)$/i,".pdf");return new File([d],u,{type:"application/pdf"})}catch(t){return null}}(e);if(s)return s;throw new Error("Échec de la conversion Word vers PDF")}catch(t){throw t}}async function Dt(){try{return window.mammoth?window.mammoth:new Promise((e,t)=>{const s=document.createElement("script");s.src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js",s.async=!0,s.onload=()=>e(window.mammoth),s.onerror=()=>t(new Error("Échec du chargement de mammoth.js")),document.head.appendChild(s)})}catch(e){return null}}async function Tt(){try{return window.jspdf?window.jspdf:new Promise((e,t)=>{const s=document.createElement("script");s.src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js",s.async=!0,s.onload=()=>e(window.jspdf),s.onerror=()=>t(new Error("Échec du chargement de jsPDF")),document.head.appendChild(s)})}catch(e){return null}}const At=Object.freeze(Object.defineProperty({__proto__:null,convertWordToPdf:Pt,isWordDocument:Et},Symbol.toStringTag,{value:"Module"}));function Ft(e){if(!e||!e.name)return!1;const t=e.name.trim().replace(/[\)\]\}]+\s*$/g,""),s=t.lastIndexOf(".");let r="";if(s>0){r=t.substring(s+1).replace(/[^a-z0-9]/gi,"").toLowerCase()}const a="pdf"===r,n=["application/pdf"].includes(e.type);return a||n}async function $t(e){try{if(!Ft(e))return e;const t=await async function(e){try{const t=new FormData;t.append("file",e);const s="https://www.ges-cab.com/pdf",r=await fetch(`${s}/normalize-pdf`,{method:"POST",body:t,headers:{Accept:"application/pdf"}});if(!r.ok)return null;const a=await r.blob();if(a.size<100)return null;const n=e.name.replace(".pdf","_normalized.pdf");return new File([a],n,{type:"application/pdf"})}catch(t){return null}}(e);if(t)return t;const s=await async function(e){try{const t=await async function(){try{return window.PDFLib?window.PDFLib:new Promise((e,t)=>{const s=document.createElement("script");s.src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js",s.async=!0,s.onload=()=>{window.PDFLib?e(window.PDFLib):t(new Error("PDFLib non disponible après chargement"))},s.onerror=()=>t(new Error("Échec du chargement de pdf-lib")),document.head.appendChild(s)})}catch(e){return null}}();if(!t)return null;const s=await e.arrayBuffer(),r=await t.PDFDocument.load(s,{ignoreEncryption:!0,updateMetadata:!1}),a=await r.save({useObjectStreams:!1,addDefaultPage:!1,objectsPerTick:50,updateFieldAppearances:!0});if(a.byteLength<100)return null;const n=new Blob([a],{type:"application/pdf"}),i=e.name.replace(".pdf","_optimized.pdf");return new File([n],i,{type:"application/pdf"})}catch(t){return null}}(e);return s||e}catch(t){return e}}async function Lt(e,t,s=null,r=null){try{if(!t||"string"!=typeof t||""===t.trim())return{success:!1,error:"ID de tâche manquant. Veuillez créer la tâche avant d'uploader des fichiers."};const{data:o,error:l}=await tt.from("tasks").select("id").eq("id",t).single();if(l||!o)return{success:!1,error:"La tâche n'existe pas. Veuillez enregistrer la tâche avant d'uploader des fichiers."};const c=52428800;if(e.size>c){return{success:!1,error:`Fichier trop volumineux (${(e.size/1024/1024).toFixed(2)} Mo). Limite: 50 Mo.`}}let d=e,u=e.name,m=!1,p=!1;if(Et(e))try{const t=await Pt(e);t&&(d=t,m=!0)}catch(a){}if(Ft(d))try{const e=await $t(d);if(e&&e!==d){(d.size/1024).toFixed(2),(e.size/1024).toFixed(2);d=e,p=!0}}catch(n){}const f=Date.now(),x=d.name.replaceAll(/[^a-zA-Z0-9.-]/g,"_"),h=`tasks/${t}/${`${f}_${x}`}`;let b="";b=m&&p?`📤 Upload du PDF converti et optimisé "${d.name}" (original: "${u}") pour la tâche ${t}...`:m?`📤 Upload du PDF converti "${d.name}" (original: "${u}") pour la tâche ${t}...`:p?`📤 Upload du PDF optimisé "${d.name}" (${(d.size/1024).toFixed(2)} Ko) pour la tâche ${t}...`:`📤 Upload du fichier "${d.name}" (${(d.size/1024).toFixed(2)} Ko) pour la tâche ${t}...`;const{error:g}=await tt.storage.from("attachments").upload(h,d,{cacheControl:"3600",upsert:!0});if(g){if(g.message?.includes("Bucket not found")||g.message?.includes("bucket"))try{if(!(await Mt(!1)))return{success:!1,error:"Bucket 'attachments' non configuré. Créez-le dans Supabase Dashboard > Storage."};{const{error:e}=await tt.storage.from("attachments").upload(h,d,{cacheControl:"3600",upsert:!0});if(e)return{success:!1,error:e.message}}}catch(i){return{success:!1,error:g.message}}return{success:!1,error:g.message}}const{data:v}=tt.storage.from("attachments").getPublicUrl(h),w=v?.publicUrl;if(!w)return{success:!1,error:"URL publique non générée"};const y=null;let j=d.name;m&&p?j=`${d.name} (converti et optimisé depuis ${u})`:m?j=`${d.name} (converti depuis ${u})`:p&&(j=`${d.name} (optimisé pour PDF.js)`);let N=null;try{const{data:e}=await tt.from("tasks").select("case_id").eq("id",t).single();e&&e.case_id&&(N=e.case_id)}catch(i){}const _=await async function(e,t,s,r=null,a=null,n=null,o=null,l=null,c=null){try{if(!s||"string"==typeof s&&""===s.trim())return{success:!1,error:{message:"Aucune URL publique fournie — upload Storage non effectué"}};if(e){const{data:t,error:s}=await tt.from("tasks").select("id").eq("id",e).single();if(s||!t)return{success:!1,error:{message:`Le task_id "${e}" n'existe pas. Veuillez créer la tâche avant d'uploader des fichiers.`,code:"INVALID_TASK_ID"}}}if(l){const{data:e,error:t}=await tt.from("cases").select("id").eq("id",l).single();!t&&e||(l=null)}let i=null;if("number"==typeof r&&Number.isFinite(r))i=r;else if("string"==typeof r&&""!==r.trim()){const e=parseInt(r,10);i=Number.isFinite(e)?e:null}const d={task_id:e,case_id:l,file_name:t,file_url:s,file_size:i,file_type:a,document_category:c,created_by:n};o&&"string"==typeof o&&o.length>0&&(d.file_data=o);const{data:u,error:m}=await tt.from("tasks_files").insert(d).select().single();return m?{success:!1,error:m}:{success:!0,data:u}}catch(i){return{success:!1,error:i}}}(t,j,w,d.size,d.type,s,y,N,r);if(!_.success)return{success:!1,error:`Fichier uploadé mais métadonnées non sauvegardées: ${_.error?.message||_.error}`};let k="";k=m&&p?`✅ Métadonnées enregistrées (id: ${_.data?.id}) - "${u}" converti, optimisé et lié à la tâche ${t}`:m?`✅ Métadonnées enregistrées (id: ${_.data?.id}) - "${u}" converti en PDF et lié à la tâche ${t}`:p?`✅ Métadonnées enregistrées (id: ${_.data?.id}) - PDF optimisé et lié à la tâche ${t}`:`✅ Métadonnées enregistrées (id: ${_.data?.id}) pour le fichier "${d.name}" lié à la tâche ${t}`;const C={success:!0,data:{id:_.data?.id||null,task_id:t,file_name:j,file_url:w,file_size:d.size,file_type:d.type,document_category:r,created_at:(new Date).toISOString(),created_by:s,is_accessible:!0,valid_url:w,source:"tasks_files",was_converted:m,was_optimized:p,original_name:m?u:void 0}};let S="";return S=m&&p?`✅ Document Word "${u}" converti, optimisé et uploadé avec succès - ID: ${_.data?.id}`:m?`✅ Document Word "${u}" converti en PDF et uploadé avec succès - ID: ${_.data?.id}`:p?`✅ PDF "${u}" optimisé et uploadé avec succès - ID: ${_.data?.id}`:`✅ Fichier "${d.name}" enregistré et lié à la tâche ${t} — ID: ${_.data?.id}`,C}catch(o){return{success:!1,error:o.message}}}async function Mt(e=!1){try{const{data:e,error:s}=await tt.storage.listBuckets();if(s)return!1;const r=e?.some(e=>"attachments"===e.name);if(!r){try{const{data:e,error:t}=await tt.rpc("create_attachments_bucket");if(t)return!(!t.message?.includes("existe déjà")&&!t.message?.includes("already exists"));const{data:s,error:r}=await tt.storage.listBuckets();if(!r){const e=s?.some(e=>"attachments"===e.name);if(e)return!0}if(e?.message?.includes("existe"))return!0}catch(t){}return!0}return!0}catch(s){return!1}}const Rt=Object.freeze(Object.defineProperty({__proto__:null,ensureAttachmentsBucket:Mt,getConvertedPdfUrl:async function(e){try{if(!e||!e.file_url)return null;const t=e.original_name||e.file_name||"",s=t.trim().replace(/[\)\]\}]+\s*$/g,""),r=s.lastIndexOf(".");let a="";if(r>0){a=s.substring(r+1).replace(/[^a-z0-9]/gi,"").toLowerCase()}if("pdf"===a)return e.file_url;if(!["doc","docx"].includes(a))return null;const n=await fetch(e.file_url);if(!n.ok)return null;const i=await n.blob();let o=t;const l=t.match(/\(converti et optimisé depuis (.+?)\)$/);l&&(o=l[1]);const c=new File([i],o,{type:i.type}),{convertWordToPdf:d}=await X(async()=>{const{convertWordToPdf:e}=await Promise.resolve().then(()=>At);return{convertWordToPdf:e}},void 0),u=await d(c);if(!u)return null;return URL.createObjectURL(u)}catch(t){return null}},uploadMultipleTaskFiles:async function(e,t,s=null){const r={successes:[],errors:[],total:e.length},a=e.map(e=>Lt(e,t,s)),n=await Promise.allSettled(a);for(const o of n)if("fulfilled"===o.status){const e=o.value;e&&e.success?r.successes.push(e.data):r.errors.push({fileName:e?.data?.file_name||"unknown",error:e?.error||"unknown"})}else r.errors.push({fileName:"unknown",error:o.reason?.message||String(o.reason)});const i={success:0===r.errors.length,data:r.successes,errors:r.errors,summary:`${r.successes.length}/${r.total} fichiers uploadés`};return i.success&&r.successes.length,i},uploadMultipleTaskFilesWithCategory:async function(e,t,s=null,r=null){const a={successes:[],errors:[],total:e.length},n=e.map(e=>Lt(e,t,s,r)),i=await Promise.allSettled(n);for(const l of i)if("fulfilled"===l.status){const e=l.value;e&&e.success?a.successes.push(e.data):a.errors.push({fileName:e?.data?.file_name||"unknown",error:e?.error||"unknown"})}else a.errors.push({fileName:"unknown",error:l.reason?.message||String(l.reason)});const o={success:0===a.errors.length,data:a.successes,errors:a.errors,summary:`${a.successes.length}/${a.total} fichiers uploadés avec catégorie "${r}"`};return o.success&&a.successes.length,o},uploadTaskFile:Lt},Symbol.toStringTag,{value:"Module"}));let qt=null;async function Vt(){return qt||(qt=(async()=>{const e={database:!1,storage:!1,activities:!1,errors:[]},t=await async function(){try{const{error:e}=await tt.rpc("fix_activities_rls_policy",{});return!e}catch{return!1}}();e.activities=t;const s=await async function(){try{const{error:e}=await tt.rpc("fix_tasks_files_rls_policy",{});return!e}catch{return!1}}(),r=await async function(){return!1}();e.database=r&&s;const a=await Mt();return e.storage=a,await async function(){return!1}(),{success:!0,partial:e.database||e.storage||e.activities,details:e}})(),qt)}const Ot=s.lazy(()=>X(()=>import("./TaskManager-CeovSrtl.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Ut=s.lazy(()=>X(()=>import("./ClientManager-CNibaAaS.js"),__vite__mapDeps([7,1,3,8,5,6]))),Bt=s.lazy(()=>X(()=>import("./CaseManager-DuS_RHTx.js"),__vite__mapDeps([9,1,3,8,5,6]))),Gt=s.lazy(()=>X(()=>import("./Calendar-CGfHpmF9.js"),__vite__mapDeps([10,1,3,11,6]))),Wt=s.lazy(()=>X(()=>import("./Reports-nWWeTQ5u.js"),__vite__mapDeps([12,1,11,3,6]))),Jt=s.lazy(()=>X(()=>import("./TeamManager-CK1lznWe.js"),__vite__mapDeps([13,1,3,5,6]))),Ht=s.lazy(()=>X(()=>import("./DocumentManager-DknWUk5i.js"),__vite__mapDeps([14,1,3,4,6]))),Xt=s.lazy(()=>X(()=>import("./Settings-C1rBDFAd.js"),__vite__mapDeps([15,1,2,3,16,6]))),Kt=s.lazy(()=>X(()=>import("./BillingManager-CuZDoZ7P.js"),__vite__mapDeps([17,1,16,3,6]))),Yt=()=>t.jsx("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(W,{className:"w-12 h-12 text-blue-500 animate-spin mx-auto mb-3"}),t.jsx("p",{className:"text-slate-400 text-sm",children:"Chargement du module..."})]})});function Zt(){const[e,r]=s.useState("dashboard"),[i,o]=s.useState(!1),{user:l,loading:c,signOut:d,mustChangePassword:u}=ht();Ye();const m=parseInt(localStorage.getItem("app_auto_logout_minutes")||"15"),{showWarning:p,remainingSeconds:f,extendSession:x,forceLogout:h}=((e,t=15)=>{const[r,a]=s.useState(!1),[n,i]=s.useState(60),o=s.useRef(null),l=s.useRef(null),c=s.useRef(null),d=s.useRef(Date.now()),u=60*t*1e3,m=s.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null),l.current&&(clearTimeout(l.current),l.current=null),c.current&&(clearInterval(c.current),c.current=null)},[]),p=s.useCallback(()=>{m(),a(!1),e&&e()},[e,m]),f=s.useCallback(()=>{m(),a(!1),i(60),d.current=Date.now(),l.current=setTimeout(()=>{a(!0),i(60),c.current=setInterval(()=>{i(e=>e<=1?(p(),0):e-1)},1e3)},u-6e4),o.current=setTimeout(()=>{p()},u)},[u,p,m]),x=s.useCallback(()=>{f()},[f]);return s.useEffect(()=>{const e=["mousedown","mousemove","keypress","scroll","touchstart","click"],t=()=>{Date.now()-d.current>5e3&&f()};return e.forEach(e=>{window.addEventListener(e,t)}),f(),()=>{e.forEach(e=>{window.removeEventListener(e,t)}),m()}},[f,m]),{showWarning:r,remainingSeconds:n,extendSession:x,forceLogout:p}})(l?d:null,m);s.useEffect(()=>{l&&!c?(async()=>{if(l&&!c&&!i)try{await Vt()}finally{o(!0)}})():l||o(!1)},[l,c,i]);if(c||l&&!i)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(W,{className:"w-16 h-16 text-white animate-spin mx-auto mb-4"}),l&&!i&&t.jsx("p",{className:"text-white/70 text-sm",children:"Initialisation de l'infrastructure..."})]})});if(!l)return t.jsx(wt,{});if(u){const e=s.lazy(()=>X(()=>Promise.resolve().then(()=>gt),void 0));return t.jsx(s.Suspense,{fallback:t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:t.jsx(W,{className:"w-16 h-16 text-white animate-spin"})}),children:t.jsx(e,{})})}return t.jsxs(a,{children:[t.jsx(n,{children:t.jsx("title",{children:"LEGALSUITE - Gestion de Cabinet Juridique"})}),t.jsx(jt,{}),t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 print:bg-white",children:[t.jsxs("div",{className:"flex",children:[t.jsx(ut,{activeView:e,setActiveView:r,currentUser:l,onLogout:async()=>{await d(),r("dashboard")}}),t.jsx("main",{className:"flex-1 ml-64 print:ml-0",children:t.jsx(k.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"p-6 print:p-0",children:(()=>{const a=(()=>{switch(e){case"dashboard":default:return t.jsx(mt,{currentUser:l,setActiveView:r});case"tasks":return t.jsx(Ot,{currentUser:l});case"clients":return t.jsx(Ut,{currentUser:l});case"cases":return t.jsx(Bt,{currentUser:l});case"calendar":return t.jsx(Gt,{currentUser:l});case"team":return t.jsx(Jt,{currentUser:l});case"reports":return t.jsx(Wt,{currentUser:l});case"documents":return t.jsx(Ht,{currentUser:l});case"billing":return t.jsx(Kt,{currentUser:l});case"settings":return t.jsx(Xt,{currentUser:l})}})();return"dashboard"===e?a:t.jsx(s.Suspense,{fallback:t.jsx(Yt,{}),children:a})})()},e)})]}),t.jsx(Ze,{}),t.jsx(yt,{isOpen:p&&!!l,remainingSeconds:f,onExtend:x,onLogout:h})]})]})}i.createRoot(document.getElementById("root")).render(t.jsx(e.StrictMode,{children:t.jsx(xt,{children:t.jsx(Zt,{})})}));export{et as B,X as _,Le as a,Qe as b,Y as c,Ct as d,ht as e,lt as f,It as g,at as h,ct as i,nt as j,dt as k,it as l,qe as m,St as n,Rt as o,tt as s,Ke as t,Ye as u};
