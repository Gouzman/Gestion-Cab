import{r as e,j as t}from"./vendor-react-DYPeng9G.js";import{B as n,s as r,t as a}from"./index-0LlzAmpO.js";import{m as i,X as s,F as o,b as l,a3 as d,a7 as u,z as c,U as m,q as h,N as f,O as g}from"./vendor-ui-DYDeDtSQ.js";import{r as v,t as w,_ as x,b,a as p,c as y,d as N,l as j,s as k,e as T}from"./index-DpPMW0AV.js";import"./vendor-supabase-DEEIiAjM.js";function D(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function C(e,t){v(2,arguments);var n=w(e),r=D(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function M(e,t){v(2,arguments);var n=w(e),r=D(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var a=n.getDate(),i=new Date(n.getTime());return i.setMonth(n.getMonth()+r+1,0),a>=i.getDate()?i:(n.setFullYear(i.getFullYear(),i.getMonth(),a),n)}var S={};function U(){return S}function E(e,t){var n,r,a,i,s,o,l,d;v(1,arguments);var u=U(),c=D(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==a?a:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==n?n:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=w(e),h=m.getDay(),f=(h<c?7:0)+h-c;return m.setDate(m.getDate()-f),m.setHours(0,0,0,0),m}function _(e){v(1,arguments);var t=w(e);return t.setHours(0,0,0,0),t}function P(e,t){return v(2,arguments),C(e,7*D(t))}var Y=6e4,O=36e5;function W(e,t){v(2,arguments);var n=_(e),r=_(t);return n.getTime()===r.getTime()}function H(e){if(v(1,arguments),!function(e){return v(1,arguments),e instanceof Date||"object"===x(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e)return!1;var t=w(e);return!isNaN(Number(t))}function F(e,t){var n,r,a,i,s,o,l,d;v(1,arguments);var u=U(),c=D(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==a?a:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==n?n:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=w(e),h=m.getDay(),f=6+(h<c?-7:0)-(h-c);return m.setDate(m.getDate()+f),m.setHours(23,59,59,999),m}function z(e,t){return v(2,arguments),function(e,t){v(2,arguments);var n=w(e).getTime(),r=D(t);return new Date(n+r)}(e,-D(t))}function $(e){v(1,arguments);var t=w(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function q(e){v(1,arguments);var t=w(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=$(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var s=$(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function L(e){v(1,arguments);var t=w(e),n=$(t).getTime()-function(e){v(1,arguments);var t=q(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),$(n)}(t).getTime();return Math.round(n/6048e5)+1}function A(e,t){var n,r,a,i,s,o,l,d;v(1,arguments);var u=U(),c=D(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==a?a:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==n?n:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=w(e),h=m.getUTCDay(),f=(h<c?7:0)+h-c;return m.setUTCDate(m.getUTCDate()-f),m.setUTCHours(0,0,0,0),m}function R(e,t){var n,r,a,i,s,o,l,d;v(1,arguments);var u=w(e),c=u.getUTCFullYear(),m=U(),h=D(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:m.firstWeekContainsDate)&&void 0!==r?r:null===(l=m.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(c+1,0,h),f.setUTCHours(0,0,0,0);var g=A(f,t),x=new Date(0);x.setUTCFullYear(c,0,h),x.setUTCHours(0,0,0,0);var b=A(x,t);return u.getTime()>=g.getTime()?c+1:u.getTime()>=b.getTime()?c:c-1}function Q(e,t){v(1,arguments);var n=w(e),r=A(n,t).getTime()-function(e,t){var n,r,a,i,s,o,l,d;v(1,arguments);var u=U(),c=D(null!==(n=null!==(r=null!==(a=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1),m=R(e,t),h=new Date(0);return h.setUTCFullYear(m,0,c),h.setUTCHours(0,0,0,0),A(h,t)}(n,t).getTime();return Math.round(r/6048e5)+1}function G(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var X=function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return G("yy"===t?r%100:r,t.length)},B=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):G(n+1,2)},I=function(e,t){return G(e.getUTCDate(),t.length)},J=function(e,t){return G(e.getUTCHours()%12||12,t.length)},Z=function(e,t){return G(e.getUTCHours(),t.length)},V=function(e,t){return G(e.getUTCMinutes(),t.length)},K=function(e,t){return G(e.getUTCSeconds(),t.length)},ee=function(e,t){var n=t.length,r=e.getUTCMilliseconds();return G(Math.floor(r*Math.pow(10,n-3)),t.length)},te="midnight",ne="noon",re="morning",ae="afternoon",ie="evening",se="night",oe={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return X(e,t)},Y:function(e,t,n,r){var a=R(e,r),i=a>0?a:1-a;return"YY"===t?G(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):G(i,t.length)},R:function(e,t){return G(q(e),t.length)},u:function(e,t){return G(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return G(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return G(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return B(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return G(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=Q(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):G(a,t.length)},I:function(e,t,n){var r=L(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):G(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):I(e,t)},D:function(e,t,n){var r=function(e){v(1,arguments);var t=w(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):G(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return G(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return G(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return G(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?ne:0===a?te:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?ie:a>=12?ae:a>=4?re:se,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return J(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Z(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):G(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):G(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):V(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):K(e,t)},S:function(e,t){return ee(e,t)},X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return de(a);case"XXXX":case"XX":return ue(a);default:return ue(a,":")}},x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return de(a);case"xxxx":case"xx":return ue(a);default:return ue(a,":")}},O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+le(a,":");default:return"GMT"+ue(a,":")}},z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+le(a,":");default:return"GMT"+ue(a,":")}},t:function(e,t,n,r){var a=r._originalDate||e;return G(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,n,r){return G((r._originalDate||e).getTime(),t.length)}};function le(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(0===i)return n+String(a);var s=t;return n+String(a)+s+G(i,2)}function de(e,t){return e%60==0?(e>0?"-":"+")+G(Math.abs(e)/60,2):ue(e,t)}function ue(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e);return r+G(Math.floor(a/60),2)+n+G(a%60,2)}var ce=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},me=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},he={p:me,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return ce(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",ce(a,t)).replace("{{time}}",me(i,t))}},fe=["D","DD"],ge=["YY","YYYY"];function ve(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var we={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xe={date:b({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:b({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:b({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},be={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pe={code:"en-US",formatDistance:function(e,t,n){var r,a=we[e];return r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:xe,formatRelative:function(e,t,n,r){return be[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:p({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:p({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:p({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:p({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:p({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:N({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:y({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:y({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:y({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:y({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:y({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},ye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,je=/^'([^]*?)'?$/,ke=/''/g,Te=/[a-zA-Z]/;function De(e,t,n){var r,a,i,s,o,l,d,u,c,m,h,f,g,x,b,p,y,N;v(2,arguments);var j=String(t),k=U(),T=null!==(r=null!==(a=null==n?void 0:n.locale)&&void 0!==a?a:k.locale)&&void 0!==r?r:pe,C=D(null!==(i=null!==(s=null!==(o=null!==(l=null==n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null==n||null===(d=n.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==o?o:k.firstWeekContainsDate)&&void 0!==s?s:null===(c=k.locale)||void 0===c||null===(m=c.options)||void 0===m?void 0:m.firstWeekContainsDate)&&void 0!==i?i:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=D(null!==(h=null!==(f=null!==(g=null!==(x=null==n?void 0:n.weekStartsOn)&&void 0!==x?x:null==n||null===(b=n.locale)||void 0===b||null===(p=b.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==g?g:k.weekStartsOn)&&void 0!==f?f:null===(y=k.locale)||void 0===y||null===(N=y.options)||void 0===N?void 0:N.weekStartsOn)&&void 0!==h?h:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var S=w(e);if(!H(S))throw new RangeError("Invalid time value");var E=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}(S),_=z(S,E),P={firstWeekContainsDate:C,weekStartsOn:M,locale:T,_originalDate:S};return j.match(Ne).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,he[t])(e,T.formatLong):e}).join("").match(ye).map(function(r){if("''"===r)return"'";var a=r[0];if("'"===a)return function(e){var t=e.match(je);if(!t)return e;return t[1].replace(ke,"'")}(r);var i,s=oe[a];if(s)return null!=n&&n.useAdditionalWeekYearTokens||(i=r,-1===ge.indexOf(i))||ve(r,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||!function(e){return-1!==fe.indexOf(e)}(r)||ve(r,t,String(e)),s(_,r,T.localize,P);if(a.match(Te))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return r}).join("")}function Ce(e,t){v(2,arguments);var n=w(e),r=w(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Me(e,t){v(1,arguments);var n=D(2);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,a=function(e){var t,n={},r=e.split(Se.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],Se.timeZoneDelimiter.test(n.date)&&(n.date=e.split(Se.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var a=Se.timezone.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}(e);if(a.date){var i=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var a=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:null===i?a:100*i,restDateString:e.slice((r[1]||r[2]).length)}}(a.date,n);r=function(e,t){if(null===t)return new Date(NaN);var n=e.match(Ue);if(!n)return new Date(NaN);var r=!!n[4],a=Pe(n[1]),i=Pe(n[2])-1,s=Pe(n[3]),o=Pe(n[4]),l=Pe(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,l)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var a=r.getUTCDay()||7,i=7*(t-1)+n+1-a;return r.setUTCDate(r.getUTCDate()+i),r}(t,o,l):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Oe[t]||(We(e)?29:28))}(t,i,s)&&function(e,t){return t>=1&&t<=(We(e)?366:365)}(t,a)?(d.setUTCFullYear(t,i,Math.max(a,s)),d):new Date(NaN)}(i.restDateString,i.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var s,o=r.getTime(),l=0;if(a.time&&(l=function(e){var t=e.match(Ee);if(!t)return NaN;var n=Ye(t[1]),r=Ye(t[2]),a=Ye(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,a))return NaN;return n*O+r*Y+1e3*a}(a.time),isNaN(l)))return new Date(NaN);if(!a.timezone){var d=new Date(o+l),u=new Date(0);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return s=function(e){if("Z"===e)return 0;var t=e.match(_e);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,a))return NaN;return n*(r*O+a*Y)}(a.timezone),isNaN(s)?new Date(NaN):new Date(o+l+s)}var Se={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ue=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ee=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,_e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Pe(e){return e?parseInt(e):1}function Ye(e){return e&&parseFloat(e.replace(",","."))||0}var Oe=[31,null,31,30,31,30,31,31,30,31,30,31];function We(e){return e%400==0||e%4==0&&e%100!=0}function He(e,t){v(2,arguments);var n=w(e),r=D(t);return n.setHours(r),n}const Fe=({currentUser:h,onCancel:f,onEventCreated:g})=>{const[v,w]=e.useState({title:"",startTime:"",description:"",attendees:[],location:"",linked_cases:[],linked_files:[]}),[x,b]=e.useState([]),[p,y]=e.useState([]),[N,j]=e.useState([]),[k,T]=e.useState([]);e.useEffect(()=>{(async()=>{const{data:e,error:t}=await r.from("profiles").select("id, name, role"),n=(e||[]).filter(e=>"admin"!==e.role);t?a({variant:"destructive",title:"Erreur",description:"Impossible de charger les collaborateurs."}):b(n.filter(e=>e.id!==h.id));const{data:i,error:s}=await r.from("cases").select("id, title");s||y(i||[]);const{data:o,error:l}=await r.from("tasks_files").select("id, file_name, file_path, task_id");l||(j(o||[]),T(o||[]))})()},[h.id]),e.useEffect(()=>{v.linked_cases.length,T(N)},[v.linked_cases,N]);const D=e=>{const{name:t,value:n}=e.target;w(e=>({...e,[t]:n}))};return t.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:t.jsxs(i.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-slate-800 border border-slate-700 rounded-xl p-6 w-full max-w-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Nouvel Ã‰vÃ©nement"}),t.jsx(n,{variant:"ghost",size:"icon",onClick:f,className:"text-slate-400 hover:text-white",children:t.jsx(s,{className:"w-5 h-5"})})]}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!v.title||!v.startTime)return void a({variant:"destructive",title:"Champs requis",description:"Le titre et la date de dÃ©but sont obligatoires."});const t={location:v.location,linked_cases:v.linked_cases,linked_files:v.linked_files},n={title:v.title,description:v.description,start_time:v.startTime,attendees:v.attendees,metadata:t};n.created_by=h.id;const{error:i}=await r.from("calendar_events").insert([n]);i?a({variant:"destructive",title:"Erreur",description:"L'Ã©vÃ©nement n'a pas pu Ãªtre crÃ©Ã©."}):(a({title:"âœ… Ã‰vÃ©nement crÃ©Ã©",description:"Votre Ã©vÃ©nement a Ã©tÃ© ajoutÃ© Ã  l'agenda."}),g())},className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[t.jsx(o,{className:"w-4 h-4 inline mr-2"}),"Titre de l'Ã©vÃ©nement *"]}),t.jsx("input",{type:"text",name:"title",value:v.title,onChange:D,required:!0,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: RÃ©union projet X"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[t.jsx(l,{className:"w-4 h-4 inline mr-2"}),"Date et heure de dÃ©but *"]}),t.jsx("input",{type:"datetime-local",name:"startTime",value:v.startTime,onChange:D,required:!0,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"event-description",className:"block text-sm font-medium text-slate-300 mb-2",children:"Description"}),t.jsx("textarea",{id:"event-description",name:"description",value:v.description,onChange:D,rows:3,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ordre du jour, dÃ©tails..."})]}),t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"event-location",className:"block text-sm font-medium text-slate-300 mb-2",children:[t.jsx(d,{className:"w-4 h-4 inline mr-2"}),"Lieu"]}),t.jsx("input",{type:"text",id:"event-location",name:"location",value:v.location,onChange:D,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Salle de rÃ©union A, Cabinet, Tribunal..."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[t.jsx(u,{className:"w-4 h-4 inline mr-2"}),"Dossier(s) liÃ©(s)"]}),t.jsxs("div",{className:"max-h-40 overflow-y-auto space-y-2 p-3 bg-slate-700/30 rounded-lg border border-slate-600",children:[0===p.length&&t.jsx("p",{className:"text-xs text-slate-500",children:"Aucun dossier disponible"}),p.map(e=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:`case-${e.id}`,checked:v.linked_cases.includes(e.id),onChange:()=>{return t=e.id,void w(e=>{const n=e.linked_cases.includes(t)?e.linked_cases.filter(e=>e!==t):[...e.linked_cases,t];return{...e,linked_cases:n}});var t},className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsxs("label",{htmlFor:`case-${e.id}`,className:"ml-3 block text-sm text-slate-300",children:[e.id," - ",e.title]})]},e.id))]}),t.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"SÃ©lectionnez un ou plusieurs dossiers liÃ©s Ã  cet Ã©vÃ©nement."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[t.jsx(c,{className:"w-4 h-4 inline mr-2"}),"Fichier(s) liÃ©(s)"]}),t.jsxs("div",{className:"max-h-40 overflow-y-auto space-y-2 p-3 bg-slate-700/30 rounded-lg border border-slate-600",children:[0===k.length&&t.jsx("p",{className:"text-xs text-slate-500",children:"Aucun fichier disponible"}),k.map(e=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:`file-${e.id}`,checked:v.linked_files.includes(e.id),onChange:()=>{return t=e.id,void w(e=>{const n=e.linked_files.includes(t)?e.linked_files.filter(e=>e!==t):[...e.linked_files,t];return{...e,linked_files:n}});var t},className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("label",{htmlFor:`file-${e.id}`,className:"ml-3 block text-sm text-slate-300 truncate",children:e.file_name})]},e.id))]}),t.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Les fichiers seront filtrÃ©s automatiquement selon les dossiers sÃ©lectionnÃ©s."})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:[t.jsx(m,{className:"w-4 h-4 inline mr-2"}),"Participant(s)"]}),t.jsxs("div",{className:"max-h-40 overflow-y-auto space-y-2 p-3 bg-slate-700/30 rounded-lg border border-slate-600",children:[0===x.length&&t.jsx("p",{className:"text-xs text-slate-500",children:"Aucun collaborateur disponible"}),x.map(e=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:`attendee-${e.id}`,checked:v.attendees.includes(e.id),onChange:()=>{return t=e.id,void w(e=>{const n=e.attendees.includes(t)?e.attendees.filter(e=>e!==t):[...e.attendees,t];return{...e,attendees:n}});var t},className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("label",{htmlFor:`attendee-${e.id}`,className:"ml-3 block text-sm text-slate-300",children:e.name})]},e.id))]}),t.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"SÃ©lectionnez les participants Ã  cet Ã©vÃ©nement. Vous et les administrateurs sont toujours inclus."})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsx(n,{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700",children:"CrÃ©er l'Ã©vÃ©nement"}),t.jsx(n,{type:"button",variant:"outline",onClick:f,className:"flex-1 border-slate-600 text-slate-300 hover:bg-slate-700",children:"Annuler"})]})]})]})})},ze=({currentUser:s})=>{const[o,l]=e.useState(new Date),[d,u]=e.useState("month"),[c,m]=e.useState([]),[x,b]=e.useState([]),[p,y]=e.useState(!1),N=s&&("Gerant"===s.function||"Associe Emerite"===s.function)||s.role&&"admin"===s.role.toLowerCase(),S=e.useCallback(async()=>{const[e,t]=await Promise.all([(async()=>{let e=r.from("tasks").select("id, title, deadline, priority, status, created_at").not("deadline","is",null);N||(e=e.or(`assigned_to_id.eq.${s.id},assigned_to_ids.cs.{${s.id}},visible_by_ids.cs.{${s.id}}`));const{data:t,error:n}=await e;return n?(a({variant:"destructive",title:"Erreur",description:"Impossible de charger les tÃ¢ches."}),[]):t.map(e=>({...e,type:"task",display_time:e.deadline,isOverdue:new Date(e.deadline)<new Date&&"completed"!==e.status}))})(),(async()=>{let e=r.from("calendar_events").select("*");const{data:t,error:n}=await e;if(n)return a({variant:"destructive",title:"Erreur",description:"Impossible de charger les Ã©vÃ©nements."}),[];return t.filter(e=>e.created_by===s.id||e.attendees&&e.attendees.includes(s.id)||N).map(e=>({...e,type:"event",deadline:e.start_time,display_time:e.start_time}))})()]);b(e),m(t)},[s,N]);e.useEffect(()=>{S()},[o,S]),e.useEffect(()=>{const e=e=>{S()};return window.addEventListener("taskCreated",e),window.addEventListener("taskUpdated",e),window.addEventListener("taskDeleted",e),()=>{window.removeEventListener("taskCreated",e),window.removeEventListener("taskUpdated",e),window.removeEventListener("taskDeleted",e)}},[S]);const U=e=>{if("task"===e.type){if(e.isOverdue)return"bg-red-700/90 text-white border border-red-400";switch(e.priority){case"urgent":return"bg-red-500/70 text-white";case"high":return"bg-orange-500/70 text-white";case"medium":return"bg-yellow-500/70 text-slate-900";default:return"bg-green-500/70 text-white"}}return"bg-purple-500/70 text-white"},_=e=>{const t=Me(e.display_time),n=e.metadata||{};let r=`${"task"===e.type?"ðŸ“ TÃ¢che":"ðŸ“… Ã‰vÃ©nement"}: ${e.title}\n`;return"task"===e.type?(r+=`â° Ã‰chÃ©ance: ${De(t,"dd/MM/yyyy Ã  HH:mm",{locale:j})}\n`,e.isOverdue&&(r+="âš ï¸ DEADLINE DÃ‰PASSÃ‰E\n"),r+=`ðŸ“Š PrioritÃ©: ${"urgent"===e.priority?"Urgente":"high"===e.priority?"Haute":"medium"===e.priority?"Moyenne":"Normale"}\n`,r+=`ðŸ“‹ Statut: ${"completed"===e.status?"ComplÃ©tÃ©e":"in_progress"===e.status?"En cours":"En attente"}\n`):r+=`ðŸ“† ${De(t,"dd/MM/yyyy Ã  HH:mm",{locale:j})}\n`,e.description&&(r+=`ðŸ’¬ Description: ${e.description}\n`),n.location&&(r+=`ðŸ“ Lieu: ${n.location}\n`),n.linked_cases&&n.linked_cases.length>0&&(r+=`ðŸ“‚ Dossier(s): ${n.linked_cases.length} liÃ©(s)\n`),n.linked_files&&n.linked_files.length>0&&(r+=`ðŸ“Ž Fichier(s): ${n.linked_files.length} joint(s)\n`),n.attendees&&n.attendees.length>0&&(r+=`ðŸ‘¥ Participants: ${n.attendees.length}\n`),r},Y=e=>{switch(e){case"urgent":return"ðŸ”´";case"high":return"ðŸŸ ";case"medium":return"ðŸŸ¡";default:return"ðŸŸ¢"}},O=e=>{if("task"===e.type){if(e.isOverdue)return"bg-red-700/90 text-white border border-red-400";switch(e.priority){case"urgent":return"bg-red-500/80 text-white";case"high":return"bg-orange-500/80 text-white";case"medium":return"bg-yellow-500/80 text-slate-900";default:return"bg-green-500/80 text-white"}}return"bg-purple-500/80 text-white"};return t.jsxs(t.Fragment,{children:[t.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Agenda"}),t.jsx("p",{className:"text-slate-400",children:"Visualisez vos Ã©chÃ©ances et Ã©vÃ©nements"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"bg-slate-700/50 p-1 rounded-lg flex gap-1",children:[t.jsx(n,{size:"sm",variant:"week"===d?"secondary":"ghost",onClick:()=>u("week"),children:"Semaine"}),t.jsx(n,{size:"sm",variant:"month"===d?"secondary":"ghost",onClick:()=>u("month"),children:"Mois"})]}),t.jsxs(n,{onClick:()=>y(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700",children:[t.jsx(h,{className:"w-4 h-4 mr-2"}),"Nouvel Ã‰vÃ©nement"]})]})]}),t.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx(n,{variant:"ghost",size:"icon",onClick:()=>l("month"===d?function(e,t){return v(2,arguments),M(e,-D(t))}(o,1):function(e,t){return v(2,arguments),P(e,-D(t))}(o,1)),children:t.jsx(f,{className:"w-6 h-6 text-slate-300"})}),t.jsx("span",{className:"text-2xl font-bold text-white capitalize",children:De(o,"MMMM yyyy",{locale:j})}),t.jsx(n,{variant:"ghost",size:"icon",onClick:()=>l("month"===d?M(o,1):P(o,1)),children:t.jsx(g,{className:"w-6 h-6 text-slate-300"})})]}),"month"===d&&(()=>{const e=[],n=E(o,{locale:j});for(let r=0;r<7;r++)e.push(t.jsx("div",{className:"text-center text-sm font-medium text-slate-400 capitalize",children:De(C(n,r),"EEEE",{locale:j})},r));return t.jsx("div",{className:"grid grid-cols-7 gap-2",children:e})})(),t.jsx("div",{className:"mt-2",children:"month"===d?(()=>{const e=k(o),n=T(e),r=E(e,{locale:j}),a=F(n,{locale:j}),i=[];let s=[],l=r;for(;l<=a;){for(let n=0;n<7;n++){const n=l,r=[...x,...c].filter(e=>W(Me(e.display_time),n));s.push(t.jsxs("div",{className:`p-2 h-32 border border-slate-700/50 rounded-lg flex flex-col overflow-hidden transition-colors duration-200 ${Ce(l,e)?"bg-slate-800/60 hover:bg-slate-700/50":"bg-slate-800/30"} ${W(l,new Date)?"border-blue-500":""}`,children:[t.jsx("span",{className:"font-semibold "+(Ce(l,e)?"text-slate-300":"text-slate-600"),children:De(l,"d")}),t.jsx("div",{className:"flex-grow overflow-y-auto mt-1 space-y-1 pr-1",children:r.sort((e,t)=>new Date(e.display_time)-new Date(t.display_time)).map(e=>{const n=Me(e.display_time);return t.jsxs("div",{className:`px-1.5 py-0.5 text-xs rounded-md mb-1 ${U(e)} cursor-pointer hover:opacity-90 transition-opacity`,title:_(e),children:[t.jsxs("div",{className:"font-semibold text-xs flex items-center justify-between",children:[t.jsx("span",{children:De(n,"HH:mm")}),"task"===e.type&&t.jsx("span",{className:"text-xs opacity-75",children:e.isOverdue?"â°":Y(e.priority)})]}),t.jsxs("div",{className:"truncate flex items-center gap-1",children:["task"===e.type&&t.jsx("span",{className:"text-[10px]",children:"ðŸ“"}),t.jsx("span",{children:e.title})]}),"task"===e.type&&t.jsxs("div",{className:"text-[10px] opacity-75 mt-0.5",children:["Ã‰chÃ©ance: ",De(n,"dd/MM/yyyy")]})]},`${e.type}-${e.id}`)})})]},l.toString())),l=C(l,1)}i.push(t.jsx("div",{className:"grid grid-cols-7 gap-2",children:s},l.toString())),s=[]}return t.jsx("div",{className:"space-y-2",children:i})})():(()=>{const e=function(e,t){v(1,arguments);var n=e||{},r=w(n.start),a=w(n.end).getTime();if(!(r.getTime()<=a))throw new RangeError("Invalid interval");var i=[],s=r;s.setHours(0,0,0,0);var o=Number(1);if(o<1||isNaN(o))throw new RangeError("`options.step` must be a number greater than 1");for(;s.getTime()<=a;)i.push(w(s)),s.setDate(s.getDate()+o),s.setHours(0,0,0,0);return i}({start:E(o,{locale:j}),end:F(o,{locale:j})}),n=Array.from({length:17},(e,t)=>t+6);return t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{className:"h-12"}),n.map(e=>t.jsx("div",{className:"h-12 flex items-center justify-center text-xs text-slate-400 pr-2",children:De(He(new Date,e),"HH:mm")},e))]}),t.jsx("div",{className:"flex-1 grid grid-cols-7",children:e.map(e=>t.jsxs("div",{className:"flex flex-col border-l border-slate-700/50",children:[t.jsxs("div",{className:"h-12 text-center p-2 "+(W(e,new Date)?"text-blue-400":"text-slate-300"),children:[t.jsx("p",{className:"font-semibold text-lg",children:De(e,"d")}),t.jsx("p",{className:"text-xs capitalize",children:De(e,"EEE",{locale:j})})]}),t.jsxs("div",{className:"relative flex-1",children:[n.map(e=>t.jsx("div",{className:"h-12 border-t border-slate-700/50"},e)),[...x,...c].filter(t=>W(Me(t.display_time),e)).map(e=>{const n=Me(e.display_time),r=3*(n.getHours()-6+n.getMinutes()/60);return t.jsxs("div",{className:`absolute w-full p-1 text-xs rounded-md z-10 cursor-pointer hover:opacity-90 transition-opacity ${O(e)}`,style:{top:`${r}rem`},title:_(e),children:[t.jsxs("div",{className:"font-semibold flex items-center justify-between",children:[t.jsx("span",{children:De(n,"HH:mm")}),"task"===e.type&&t.jsx("span",{className:"text-xs",children:e.isOverdue?"â°":Y(e.priority)})]}),t.jsxs("div",{className:"truncate flex items-center gap-1",children:["task"===e.type&&t.jsx("span",{className:"text-[10px]",children:"ðŸ“"}),t.jsx("span",{children:e.title})]}),"task"===e.type&&t.jsxs("div",{className:"text-[10px] opacity-75",children:["Ã‰chÃ©ance: ",De(n,"dd/MM/yyyy")]})]},`${e.type}-${e.id}`)})]})]},e.toString()))})]})})()})]})]}),p&&t.jsx(Fe,{currentUser:s,onCancel:()=>y(!1),onEventCreated:()=>{y(!1),S()}})]})};export{ze as default};
